!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/platform-browser"),require("@angular/core"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@tinkoff/ng-event-plugins",["exports","@angular/platform-browser","@angular/core","rxjs","rxjs/operators"],e):e(((t=t||self).tinkoff=t.tinkoff||{},t.tinkoff["ng-event-plugins"]={}),t.ng.platformBrowser,t.ng.core,t.rxjs,t.rxjs.operators)}(this,(function(t,e,n,r,o){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function u(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function a(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),u=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u}var s=function(){function t(){}return t.prototype.supports=function(t){return t.includes(this.modifier)},t.prototype.addGlobalEventListener=function(t,e,n){throw new Error("Global event targets are not supported by "+this.modifier+" plugin")},t.prototype.unwrap=function(t){var e=this;return t.split(".").filter((function(t){return!e.modifier.includes(t)})).join(".")},t}();var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.modifier="$",e}return u(e,t),e.prototype.addEventListener=function(t,e){t[e]=t[e]||r.EMPTY;var n=this.getMethod(t,e),i=this.manager.getZone().onStable,u=r.concat(i.pipe(o.takeWhile((function(){return t[e]===r.EMPTY}))),r.defer((function(){return t[e]}))).subscribe(n);return function(){return u.unsubscribe()}},e.prototype.getMethod=function(t,e){var n=a(e.split("."),4),r=n[1],o=n[2],i=n[3],u=void 0===i?"":i;return e.endsWith(".attr")?function(e){return null===e?t.removeAttribute(r):t.setAttribute(r,String(e))}:"class"===r?function(e){return t.classList.toggle(o,!!e)}:"style"===r?function(e){return t.style.setProperty(o.replace(/[a-z][A-Z]/g,(function(t){return t[0]+"-"+t[1].toLowerCase()})),""+e+u)}:function(e){return t[r]=e}},e.decorators=[{type:n.Injectable}],e}(s);var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.modifier="capture.once.passive",e}return u(e,t),e.prototype.supports=function(t){return t.includes(".")&&!this.unwrap(t).includes(".")},e.prototype.addEventListener=function(t,e,n){var r=this;return t.addEventListener(this.unwrap(e),n,{once:e.includes(".once"),passive:e.includes(".passive"),capture:e.includes(".capture")}),function(){return t.removeEventListener(r.unwrap(e),n)}},e.decorators=[{type:n.Injectable}],e}(s);var c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.modifier=".prevent",e}return u(e,t),e.prototype.addEventListener=function(t,e,n){return this.manager.addEventListener(t,this.unwrap(e),(function(t){t.preventDefault(),n(t)}))},e.prototype.addGlobalEventListener=function(t,e,n){return this.manager.addGlobalEventListener(t,this.unwrap(e),(function(t){t.preventDefault(),n(t)}))},e.decorators=[{type:n.Injectable}],e}(s);var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.modifier=".self",e}return u(e,t),e.prototype.addEventListener=function(t,e,n){return this.manager.addEventListener(t,this.unwrap(e),(function(t){t.target===t.currentTarget&&n(t)}))},e.decorators=[{type:n.Injectable}],e}(s);var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.modifier=".silent",e}return u(e,t),e.prototype.addEventListener=function(t,e,n){var r=this;return this.manager.getZone().runOutsideAngular((function(){return r.manager.addEventListener(t,r.unwrap(e),n)}))},e.prototype.addGlobalEventListener=function(t,e,n){var r=this;return this.manager.getZone().runOutsideAngular((function(){return r.manager.addGlobalEventListener(t,r.unwrap(e),n)}))},e.decorators=[{type:n.Injectable}],e}(s);var v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.modifier=".stop",e}return u(e,t),e.prototype.addEventListener=function(t,e,n){return this.manager.addEventListener(t,this.unwrap(e),(function(t){t.stopPropagation(),n(t)}))},e.prototype.addGlobalEventListener=function(t,e,n){return this.manager.addGlobalEventListener(t,this.unwrap(e),(function(t){t.stopPropagation(),n(t)}))},e.decorators=[{type:n.Injectable}],e}(s);var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.modifier=".init",e}return u(e,t),e.prototype.addEventListener=function(t,e,n){return this.handle(n)},e.prototype.addGlobalEventListener=function(t,e,n){return this.handle(n)},e.prototype.handle=function(t){var e=this.manager.getZone(),n=e.onStable.subscribe((function(){n.unsubscribe(),t(e)}));return function(){}},e.decorators=[{type:n.Injectable}],e}(s);var y=[{provide:e.EVENT_MANAGER_PLUGINS,useClass:d,multi:!0},{provide:e.EVENT_MANAGER_PLUGINS,useClass:c,multi:!0},{provide:e.EVENT_MANAGER_PLUGINS,useClass:f,multi:!0},{provide:e.EVENT_MANAGER_PLUGINS,useClass:v,multi:!0},{provide:e.EVENT_MANAGER_PLUGINS,useClass:h,multi:!0},{provide:e.EVENT_MANAGER_PLUGINS,useClass:p,multi:!0},{provide:e.EVENT_MANAGER_PLUGINS,useClass:l,multi:!0}];var E=function(){function t(e){console.assert(!(e[0]instanceof d)||t.initialized,"EventPluginsModule must come after BrowserModule in imports"),t.initialized=!0}return t.initialized=!1,t.decorators=[{type:n.NgModule,args:[{providers:y}]}],t.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.Inject,args:[e.EVENT_MANAGER_PLUGINS]}]}]},t}();t.BindEventPlugin=l,t.EventPluginsModule=E,t.NG_EVENT_PLUGINS=y,t.OptionsEventPlugin=p,t.PreventEventPlugin=c,t.SilentEventPlugin=d,t.StopEventPlugin=v,t.ZoneEventPlugin=h,t.asCallable=function(t){return t},t.shouldCall=function(t){return function(e,r,o){var i=o.value;o.value=function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];var u=arguments[0];u instanceof n.NgZone?Object.defineProperty(this,r,{value:function(){for(var e=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];t.apply(this,n)&&u.run((function(){i.apply(e,n)}))}}):t.apply(this,e)&&i.apply(this,e)}}},t.ɵa=s,t.ɵb=f,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=tinkoff-ng-event-plugins.umd.min.js.map