/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { NgComponentOutlet } from '@angular/common';
import { ChangeDetectionStrategy, ChangeDetectorRef, Component, ContentChild, Input, TemplateRef, ViewChild, } from '@angular/core';
import { PolymorpheusComponent } from '../classes/component';
import { PolymorpheusTemplate } from '../directives/template';
/**
 * Outlet instantiating {\@link PolymorpheusContent} with given context
 * @template C
 */
var PolymorpheusOutletComponent = /** @class */ (function () {
    function PolymorpheusOutletComponent() {
        this.template = null;
        this.content = null;
    }
    Object.defineProperty(PolymorpheusOutletComponent.prototype, "primitive", {
        get: /**
         * @return {?}
         */
        function () {
            if (!this.content || this.isAdvanced(this.content)) {
                return '';
            }
            return typeof this.content === 'function'
                ? this.content(this.context)
                : this.content;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} content
     * @return {?}
     */
    PolymorpheusOutletComponent.prototype.isAdvanced = /**
     * @param {?} content
     * @return {?}
     */
    function (content) {
        return isTemplate(content) || isComponent(content);
    };
    /**
     * @param {?} content
     * @param {?} componentTmp
     * @return {?}
     */
    PolymorpheusOutletComponent.prototype.getTemplate = /**
     * @param {?} content
     * @param {?} componentTmp
     * @return {?}
     */
    function (content, componentTmp) {
        if (isComponent(content)) {
            return componentTmp;
        }
        return isDirective(content) ? content.template : content;
    };
    /**
     * @param {?} content
     * @return {?}
     */
    PolymorpheusOutletComponent.prototype.guard = /**
     * @param {?} content
     * @return {?}
     */
    function (content) {
        return isComponent(content);
    };
    /**
     * @param {?} __0
     * @return {?}
     */
    PolymorpheusOutletComponent.prototype.ngOnChanges = /**
     * @param {?} __0
     * @return {?}
     */
    function (_a) {
        var _this = this;
        var content = _a.content, context = _a.context;
        if (context && this.proxy === undefined) {
            this.proxy =
                typeof this.context === 'object' && !Array.isArray(this.context)
                    ? new Proxy(this.context, {
                        get: function (_, key) { return _this.context[(/** @type {?} */ (key))]; },
                    })
                    : this.context;
        }
        // TODO: Keep an eye on private field, name can change
        /** @type {?} */
        var componentRef = (/** @type {?} */ ((!content &&
            context &&
            this.outlet &&
            this.outlet['_componentRef'])));
        if (componentRef) {
            componentRef.injector.get(ChangeDetectorRef).markForCheck();
        }
    };
    /**
     * @return {?}
     */
    PolymorpheusOutletComponent.prototype.ngDoCheck = /**
     * @return {?}
     */
    function () {
        if (isDirective(this.content)) {
            this.content.check();
        }
    };
    PolymorpheusOutletComponent.decorators = [
        { type: Component, args: [{
                    selector: '[polymorpheus-outlet]',
                    template: "<ng-container\n    *ngIf=\"isAdvanced(content)\"\n    [ngTemplateOutlet]=\"getTemplate(content, component)\"\n    [ngTemplateOutletContext]=\"context\"\n>\n    <ng-template #component>\n        <ng-container\n            *ngIf=\"guard(content)\"\n            [ngComponentOutlet]=\"content.component\"\n            [ngComponentOutletInjector]=\"content | injector : proxy\"\n        ></ng-container>\n    </ng-template>\n</ng-container>\n<ng-container *ngIf=\"primitive\">\n    <ng-container *ngIf=\"!template; else child\">{{primitive}}</ng-container>\n    <ng-template #child>\n        <ng-container\n            [ngTemplateOutlet]=\"template\"\n            [ngTemplateOutletContext]=\"{$implicit: primitive}\"\n        ></ng-container>\n    </ng-template>\n</ng-container>\n",
                    changeDetection: ChangeDetectionStrategy.OnPush
                }] }
    ];
    PolymorpheusOutletComponent.propDecorators = {
        template: [{ type: ContentChild, args: [TemplateRef,] }],
        outlet: [{ type: ViewChild, args: [NgComponentOutlet,] }],
        content: [{ type: Input }],
        context: [{ type: Input }]
    };
    return PolymorpheusOutletComponent;
}());
export { PolymorpheusOutletComponent };
if (false) {
    /** @type {?} */
    PolymorpheusOutletComponent.prototype.template;
    /** @type {?} */
    PolymorpheusOutletComponent.prototype.outlet;
    /** @type {?} */
    PolymorpheusOutletComponent.prototype.proxy;
    /** @type {?} */
    PolymorpheusOutletComponent.prototype.content;
    /** @type {?} */
    PolymorpheusOutletComponent.prototype.context;
}
/**
 * @template C
 * @param {?} content
 * @return {?}
 */
function isDirective(content) {
    return content instanceof PolymorpheusTemplate;
}
/**
 * @template C
 * @param {?} content
 * @return {?}
 */
function isComponent(content) {
    return content instanceof PolymorpheusComponent;
}
/**
 * @template C
 * @param {?} content
 * @return {?}
 */
function isTemplate(content) {
    return isDirective(content) || content instanceof TemplateRef;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3V0bGV0LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0B0aW5rb2ZmL25nLXBvbHltb3JwaGV1cy8iLCJzb3VyY2VzIjpbIm91dGxldC9vdXRsZXQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUMsaUJBQWlCLEVBQUMsTUFBTSxpQkFBaUIsQ0FBQztBQUNsRCxPQUFPLEVBQ0gsdUJBQXVCLEVBQ3ZCLGlCQUFpQixFQUNqQixTQUFTLEVBRVQsWUFBWSxFQUVaLEtBQUssRUFHTCxXQUFXLEVBQ1gsU0FBUyxHQUNaLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBQyxxQkFBcUIsRUFBQyxNQUFNLHNCQUFzQixDQUFDO0FBQzNELE9BQU8sRUFBQyxvQkFBb0IsRUFBQyxNQUFNLHdCQUF3QixDQUFDOzs7OztBQU81RDtJQUFBO1FBT2EsYUFBUSxHQUEwQixJQUFJLENBQUM7UUFRaEQsWUFBTyxHQUFrQyxJQUFJLENBQUM7SUFzRWxELENBQUM7SUFqRUcsc0JBQUksa0RBQVM7Ozs7UUFBYjtZQUNJLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFO2dCQUNoRCxPQUFPLEVBQUUsQ0FBQzthQUNiO1lBRUQsT0FBTyxPQUFPLElBQUksQ0FBQyxPQUFPLEtBQUssVUFBVTtnQkFDckMsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQztnQkFDNUIsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUM7UUFDdkIsQ0FBQzs7O09BQUE7Ozs7O0lBRUQsZ0RBQVU7Ozs7SUFBVixVQUNJLE9BQXNDO1FBS3RDLE9BQU8sVUFBVSxDQUFDLE9BQU8sQ0FBQyxJQUFJLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUN2RCxDQUFDOzs7Ozs7SUFFRCxpREFBVzs7Ozs7SUFBWCxVQUNJLE9BR29CLEVBQ3BCLFlBQTRCO1FBRTVCLElBQUksV0FBVyxDQUFDLE9BQU8sQ0FBQyxFQUFFO1lBQ3RCLE9BQU8sWUFBWSxDQUFDO1NBQ3ZCO1FBRUQsT0FBTyxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQztJQUM3RCxDQUFDOzs7OztJQUVELDJDQUFLOzs7O0lBQUwsVUFDSSxPQUFzQztRQUV0QyxPQUFPLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUNoQyxDQUFDOzs7OztJQUVELGlEQUFXOzs7O0lBQVgsVUFBWSxFQUFpQztRQUE3QyxpQkFtQkM7WUFuQlksb0JBQU8sRUFBRSxvQkFBTztRQUN6QixJQUFJLE9BQU8sSUFBSSxJQUFJLENBQUMsS0FBSyxLQUFLLFNBQVMsRUFBRTtZQUNyQyxJQUFJLENBQUMsS0FBSztnQkFDTixPQUFPLElBQUksQ0FBQyxPQUFPLEtBQUssUUFBUSxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDO29CQUM1RCxDQUFDLENBQUMsSUFBSSxLQUFLLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRTt3QkFDcEIsR0FBRyxFQUFFLFVBQUMsQ0FBQyxFQUFFLEdBQUcsSUFBSyxPQUFBLEtBQUksQ0FBQyxPQUFPLENBQUMsbUJBQUEsR0FBRyxFQUFXLENBQUMsRUFBNUIsQ0FBNEI7cUJBQ2hELENBQUM7b0JBQ0osQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUM7U0FDMUI7OztZQUdLLFlBQVksR0FBRyxtQkFBQSxDQUFDLENBQUMsT0FBTztZQUMxQixPQUFPO1lBQ1AsSUFBSSxDQUFDLE1BQU07WUFDWCxJQUFJLENBQUMsTUFBTSxDQUFDLGVBQWUsQ0FBQyxDQUFDLEVBQXVDO1FBRXhFLElBQUksWUFBWSxFQUFFO1lBQ2QsWUFBWSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxZQUFZLEVBQUUsQ0FBQztTQUMvRDtJQUNMLENBQUM7Ozs7SUFFRCwrQ0FBUzs7O0lBQVQ7UUFDSSxJQUFJLFdBQVcsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUU7WUFDM0IsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsQ0FBQztTQUN4QjtJQUNMLENBQUM7O2dCQXBGSixTQUFTLFNBQUM7b0JBQ1AsUUFBUSxFQUFFLHVCQUF1QjtvQkFDakMsb3hCQUFxQztvQkFDckMsZUFBZSxFQUFFLHVCQUF1QixDQUFDLE1BQU07aUJBQ2xEOzs7MkJBRUksWUFBWSxTQUFDLFdBQVc7eUJBR3hCLFNBQVMsU0FBQyxpQkFBaUI7MEJBSzNCLEtBQUs7MEJBR0wsS0FBSzs7SUFvRVYsa0NBQUM7Q0FBQSxBQXJGRCxJQXFGQztTQWhGWSwyQkFBMkI7OztJQUNwQywrQ0FDZ0Q7O0lBRWhELDZDQUNvQzs7SUFFcEMsNENBQVU7O0lBRVYsOENBQzhDOztJQUU5Qyw4Q0FDWTs7Ozs7OztBQXFFaEIsU0FBUyxXQUFXLENBQ2hCLE9BQXNDO0lBRXRDLE9BQU8sT0FBTyxZQUFZLG9CQUFvQixDQUFDO0FBQ25ELENBQUM7Ozs7OztBQUVELFNBQVMsV0FBVyxDQUNoQixPQUFzQztJQUV0QyxPQUFPLE9BQU8sWUFBWSxxQkFBcUIsQ0FBQztBQUNwRCxDQUFDOzs7Ozs7QUFFRCxTQUFTLFVBQVUsQ0FDZixPQUFzQztJQUV0QyxPQUFPLFdBQVcsQ0FBQyxPQUFPLENBQUMsSUFBSSxPQUFPLFlBQVksV0FBVyxDQUFDO0FBQ2xFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge05nQ29tcG9uZW50T3V0bGV0fSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHtcbiAgICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSxcbiAgICBDaGFuZ2VEZXRlY3RvclJlZixcbiAgICBDb21wb25lbnQsXG4gICAgQ29tcG9uZW50UmVmLFxuICAgIENvbnRlbnRDaGlsZCxcbiAgICBEb0NoZWNrLFxuICAgIElucHV0LFxuICAgIE9uQ2hhbmdlcyxcbiAgICBTaW1wbGVDaGFuZ2VzLFxuICAgIFRlbXBsYXRlUmVmLFxuICAgIFZpZXdDaGlsZCxcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge1BvbHltb3JwaGV1c0NvbXBvbmVudH0gZnJvbSAnLi4vY2xhc3Nlcy9jb21wb25lbnQnO1xuaW1wb3J0IHtQb2x5bW9ycGhldXNUZW1wbGF0ZX0gZnJvbSAnLi4vZGlyZWN0aXZlcy90ZW1wbGF0ZSc7XG5pbXBvcnQge1BvbHltb3JwaGV1c0NvbnRlbnR9IGZyb20gJy4uL3R5cGVzL2NvbnRlbnQnO1xuaW1wb3J0IHtQb2x5bW9ycGhldXNQcmltaXRpdmV9IGZyb20gJy4uL3R5cGVzL3ByaW1pdGl2ZSc7XG5cbi8qKlxuICogT3V0bGV0IGluc3RhbnRpYXRpbmcge0BsaW5rIFBvbHltb3JwaGV1c0NvbnRlbnR9IHdpdGggZ2l2ZW4gY29udGV4dFxuICovXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogJ1twb2x5bW9ycGhldXMtb3V0bGV0XScsXG4gICAgdGVtcGxhdGVVcmw6ICcuL291dGxldC50ZW1wbGF0ZS5odG1sJyxcbiAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbn0pXG5leHBvcnQgY2xhc3MgUG9seW1vcnBoZXVzT3V0bGV0Q29tcG9uZW50PEMgZXh0ZW5kcyBvYmplY3Q+IGltcGxlbWVudHMgRG9DaGVjaywgT25DaGFuZ2VzIHtcbiAgICBAQ29udGVudENoaWxkKFRlbXBsYXRlUmVmKVxuICAgIHJlYWRvbmx5IHRlbXBsYXRlOiBUZW1wbGF0ZVJlZjxDPiB8IG51bGwgPSBudWxsO1xuXG4gICAgQFZpZXdDaGlsZChOZ0NvbXBvbmVudE91dGxldClcbiAgICByZWFkb25seSBvdXRsZXQ/OiBOZ0NvbXBvbmVudE91dGxldDtcblxuICAgIHByb3h5PzogQztcblxuICAgIEBJbnB1dCgpXG4gICAgY29udGVudDogUG9seW1vcnBoZXVzQ29udGVudDxDPiB8IG51bGwgPSBudWxsO1xuXG4gICAgQElucHV0KClcbiAgICBjb250ZXh0ITogQztcblxuICAgIGdldCBwcmltaXRpdmUoKTogUG9seW1vcnBoZXVzUHJpbWl0aXZlIHtcbiAgICAgICAgaWYgKCF0aGlzLmNvbnRlbnQgfHwgdGhpcy5pc0FkdmFuY2VkKHRoaXMuY29udGVudCkpIHtcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0eXBlb2YgdGhpcy5jb250ZW50ID09PSAnZnVuY3Rpb24nXG4gICAgICAgICAgICA/IHRoaXMuY29udGVudCh0aGlzLmNvbnRleHQpXG4gICAgICAgICAgICA6IHRoaXMuY29udGVudDtcbiAgICB9XG5cbiAgICBpc0FkdmFuY2VkKFxuICAgICAgICBjb250ZW50OiBQb2x5bW9ycGhldXNDb250ZW50PEM+IHwgbnVsbCxcbiAgICApOiBjb250ZW50IGlzXG4gICAgICAgIHwgUG9seW1vcnBoZXVzVGVtcGxhdGU8Qz5cbiAgICAgICAgfCBUZW1wbGF0ZVJlZjxDPlxuICAgICAgICB8IFBvbHltb3JwaGV1c0NvbXBvbmVudDxvYmplY3QsIEM+IHtcbiAgICAgICAgcmV0dXJuIGlzVGVtcGxhdGUoY29udGVudCkgfHwgaXNDb21wb25lbnQoY29udGVudCk7XG4gICAgfVxuXG4gICAgZ2V0VGVtcGxhdGUoXG4gICAgICAgIGNvbnRlbnQ6XG4gICAgICAgICAgICB8IFBvbHltb3JwaGV1c0NvbXBvbmVudDxvYmplY3QsIEM+XG4gICAgICAgICAgICB8IFBvbHltb3JwaGV1c1RlbXBsYXRlPEM+XG4gICAgICAgICAgICB8IFRlbXBsYXRlUmVmPEM+LFxuICAgICAgICBjb21wb25lbnRUbXA6IFRlbXBsYXRlUmVmPEM+LFxuICAgICk6IFRlbXBsYXRlUmVmPEM+IHtcbiAgICAgICAgaWYgKGlzQ29tcG9uZW50KGNvbnRlbnQpKSB7XG4gICAgICAgICAgICByZXR1cm4gY29tcG9uZW50VG1wO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGlzRGlyZWN0aXZlKGNvbnRlbnQpID8gY29udGVudC50ZW1wbGF0ZSA6IGNvbnRlbnQ7XG4gICAgfVxuXG4gICAgZ3VhcmQoXG4gICAgICAgIGNvbnRlbnQ6IFBvbHltb3JwaGV1c0NvbnRlbnQ8Qz4gfCBudWxsLFxuICAgICk6IGNvbnRlbnQgaXMgUG9seW1vcnBoZXVzQ29tcG9uZW50PG9iamVjdCwgQz4ge1xuICAgICAgICByZXR1cm4gaXNDb21wb25lbnQoY29udGVudCk7XG4gICAgfVxuXG4gICAgbmdPbkNoYW5nZXMoe2NvbnRlbnQsIGNvbnRleHR9OiBTaW1wbGVDaGFuZ2VzKSB7XG4gICAgICAgIGlmIChjb250ZXh0ICYmIHRoaXMucHJveHkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5wcm94eSA9XG4gICAgICAgICAgICAgICAgdHlwZW9mIHRoaXMuY29udGV4dCA9PT0gJ29iamVjdCcgJiYgIUFycmF5LmlzQXJyYXkodGhpcy5jb250ZXh0KVxuICAgICAgICAgICAgICAgICAgICA/IG5ldyBQcm94eSh0aGlzLmNvbnRleHQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0OiAoXywga2V5KSA9PiB0aGlzLmNvbnRleHRba2V5IGFzIGtleW9mIENdLFxuICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIDogdGhpcy5jb250ZXh0O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVE9ETzogS2VlcCBhbiBleWUgb24gcHJpdmF0ZSBmaWVsZCwgbmFtZSBjYW4gY2hhbmdlXG4gICAgICAgIGNvbnN0IGNvbXBvbmVudFJlZiA9ICghY29udGVudCAmJlxuICAgICAgICAgICAgY29udGV4dCAmJlxuICAgICAgICAgICAgdGhpcy5vdXRsZXQgJiZcbiAgICAgICAgICAgIHRoaXMub3V0bGV0WydfY29tcG9uZW50UmVmJ10pIGFzIENvbXBvbmVudFJlZjxvYmplY3Q+IHwgbnVsbCB8IGZhbHNlO1xuXG4gICAgICAgIGlmIChjb21wb25lbnRSZWYpIHtcbiAgICAgICAgICAgIGNvbXBvbmVudFJlZi5pbmplY3Rvci5nZXQoQ2hhbmdlRGV0ZWN0b3JSZWYpLm1hcmtGb3JDaGVjaygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgbmdEb0NoZWNrKCkge1xuICAgICAgICBpZiAoaXNEaXJlY3RpdmUodGhpcy5jb250ZW50KSkge1xuICAgICAgICAgICAgdGhpcy5jb250ZW50LmNoZWNrKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGlzRGlyZWN0aXZlPEMgZXh0ZW5kcyBvYmplY3Q+KFxuICAgIGNvbnRlbnQ6IFBvbHltb3JwaGV1c0NvbnRlbnQ8Qz4gfCBudWxsLFxuKTogY29udGVudCBpcyBQb2x5bW9ycGhldXNUZW1wbGF0ZTxDPiB7XG4gICAgcmV0dXJuIGNvbnRlbnQgaW5zdGFuY2VvZiBQb2x5bW9ycGhldXNUZW1wbGF0ZTtcbn1cblxuZnVuY3Rpb24gaXNDb21wb25lbnQ8QyBleHRlbmRzIG9iamVjdD4oXG4gICAgY29udGVudDogUG9seW1vcnBoZXVzQ29udGVudDxDPiB8IG51bGwsXG4pOiBjb250ZW50IGlzIFBvbHltb3JwaGV1c0NvbXBvbmVudDxvYmplY3QsIEM+IHtcbiAgICByZXR1cm4gY29udGVudCBpbnN0YW5jZW9mIFBvbHltb3JwaGV1c0NvbXBvbmVudDtcbn1cblxuZnVuY3Rpb24gaXNUZW1wbGF0ZTxDIGV4dGVuZHMgb2JqZWN0PihcbiAgICBjb250ZW50OiBQb2x5bW9ycGhldXNDb250ZW50PEM+IHwgbnVsbCxcbik6IGNvbnRlbnQgaXMgUG9seW1vcnBoZXVzVGVtcGxhdGU8Qz4gfCBUZW1wbGF0ZVJlZjxDPiB7XG4gICAgcmV0dXJuIGlzRGlyZWN0aXZlKGNvbnRlbnQpIHx8IGNvbnRlbnQgaW5zdGFuY2VvZiBUZW1wbGF0ZVJlZjtcbn1cbiJdfQ==