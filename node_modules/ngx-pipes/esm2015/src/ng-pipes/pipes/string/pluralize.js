import { Pipe } from '@angular/core';
import { isVowel } from '../helpers/helpers';
/**
 * Takes a singular entity string and pluralizes it.
 * Uses both naive and holdout-list approaches.
 * If several words appear in the string, only the last word is pluralized -- this
 * means that if "your story" was passed in, "your stories" would be passed out.
 *
 * @param {string} singularEntity - Entity to pluralize. Pass as a singular ('story' or 'house').
 *          NOTE: The last word is examined. So you can pass in e.g. 'my story'.
 * @param {number} [quantity=0] quantity - How many of the entity are there? If left blank, this will
 *          pluralize the string (e.g. 'story' -> 'stories', 'house' -> 'houses'). If given a value,
 *          this will pluralize appropriately (e.g. ('story', 1) -> 'story', ('story', 2) -> 'stories').
 */
export class MakePluralStringPipe {
    constructor() {
        this.irregularMap = {
            addendum: 'addenda',
            alga: 'algae',
            alumna: 'alumnae',
            alumnus: 'alumni',
            analysis: 'analyses',
            antenna: 'antennae',
            appendix: 'appendices',
            aquarium: 'aquaria',
            arch: 'arches',
            axe: 'axes',
            axis: 'axes',
            bacillus: 'bacilli',
            bacterium: 'bacteria',
            basis: 'bases',
            batch: 'batches',
            beach: 'beaches',
            beau: 'beaux',
            bison: 'bison',
            brush: 'brushes',
            buffalo: 'buffaloes',
            bureau: 'bureaus',
            bus: 'busses',
            cactus: 'cacti',
            calf: 'calves',
            chateau: 'chateaux',
            cherry: 'cherries',
            child: 'children',
            church: 'churches',
            circus: 'circuses',
            cod: 'cod',
            corps: 'corps',
            corpus: 'corpora',
            crisis: 'crises',
            criterion: 'criteria',
            curriculum: 'curricula',
            datum: 'data',
            deer: 'deer',
            diagnosis: 'diagnoses',
            die: 'dice',
            domino: 'dominoes',
            dwarf: 'dwarves',
            echo: 'echoes',
            elf: 'elves',
            ellipsis: 'ellipses',
            embargo: 'embargoes',
            emphasis: 'emphases',
            erratum: 'errata',
            fax: 'faxes',
            fireman: 'firemen',
            fish: 'fish',
            flush: 'flushes',
            focus: 'foci',
            foot: 'feet',
            formula: 'formulas',
            fungus: 'fungi',
            genus: 'genera',
            goose: 'geese',
            grafito: 'grafiti',
            half: 'halves',
            hero: 'heroes',
            hoax: 'hoaxes',
            hoof: 'hooves',
            hypothesis: 'hypotheses',
            index: 'indices',
            kiss: 'kisses',
            knife: 'knives',
            leaf: 'leaves',
            life: 'lives',
            loaf: 'loaves',
            louse: 'lice',
            man: 'men',
            mango: 'mangoes',
            matrix: 'matrices',
            means: 'means',
            medium: 'media',
            memorandum: 'memoranda',
            millennium: 'milennia',
            moose: 'moose',
            mosquito: 'mosquitoes',
            motto: 'mottoes',
            mouse: 'mice',
            nebula: 'nebulae',
            neurosis: 'neuroses',
            nucleus: 'nuclei',
            oasis: 'oases',
            octopus: 'octopodes',
            ovum: 'ova',
            ox: 'oxen',
            paralysis: 'paralyses',
            parenthesis: 'parentheses',
            person: 'people',
            phenomenon: 'phenomena',
            plateau: 'plateaux',
            potato: 'potatoes',
            quiz: 'quizzes',
            radius: 'radii',
            reflex: 'reflexes',
            'runner-up': 'runners-up',
            scampo: 'scampi',
            scarf: 'scarves',
            scissors: 'scissors',
            scratch: 'scratches',
            self: 'selves',
            series: 'series',
            sheaf: 'sheaves',
            sheep: 'sheep',
            shelf: 'shelves',
            'son-in-law': 'sons-in-law',
            species: 'species',
            splash: 'splashes',
            stimulus: 'stimuli',
            stitch: 'stitches',
            stratum: 'strata',
            syllabus: 'syllabi',
            symposium: 'symposia',
            synopsis: 'synopses',
            synthesis: 'syntheses',
            tableau: 'tableaux',
            tax: 'taxes',
            that: 'those',
            thesis: 'theses',
            thief: 'thieves',
            this: 'these',
            tomato: 'tomatoes',
            tooth: 'teeth',
            tornado: 'tornadoes',
            torpedo: 'torpedoes',
            vertebra: 'vertebrae',
            veto: 'vetoes',
            vita: 'vitae',
            volcano: 'volcanoes',
            waltz: 'waltzes',
            wash: 'washes',
            watch: 'watches',
            wharf: 'wharves',
            wife: 'wives',
            wolf: 'wolves',
            woman: 'women',
            zero: 'zeroes',
        };
    }
    transform(singularEntity, quantity = 0) {
        if (!singularEntity || singularEntity === '') {
            return '';
        }
        if (quantity === 1) {
            return singularEntity;
        }
        else {
            const lastWord = singularEntity.trim().split(' ')[singularEntity.trim().split(' ').length - 1];
            if (this.irregularMap[lastWord.toLocaleLowerCase()]) {
                if (lastWord[0] === lastWord[0].toLocaleUpperCase()) {
                    return singularEntity.replace(lastWord, this.irregularMap[lastWord.toLocaleLowerCase()].replace(this.irregularMap[lastWord.toLocaleLowerCase()][0], this.irregularMap[lastWord.toLocaleLowerCase()][0].toLocaleUpperCase()));
                }
                return singularEntity.replace(lastWord, this.irregularMap[lastWord.toLocaleLowerCase()]);
            }
            else if (lastWord[lastWord.length - 1] === 'y') {
                // Naive approach:
                // consonant+y = word - 'y' +'ies'
                // vowel+y = word + 's'
                return isVowel(lastWord[lastWord.length - 2])
                    ? singularEntity + 's'
                    : singularEntity.replace(lastWord, lastWord.slice(0, -1) + 'ies');
            }
            else if (lastWord[lastWord.length - 1] === 's') {
                return singularEntity + 'es';
            }
            else {
                return singularEntity + 's';
            }
        }
    }
}
MakePluralStringPipe.decorators = [
    { type: Pipe, args: [{
                name: 'makePluralString',
            },] }
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGx1cmFsaXplLmpzIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9kYW5yZXZhaC9wcml2YXRlL25neC1waXBlcy8iLCJzb3VyY2VzIjpbInNyYy9uZy1waXBlcy9waXBlcy9zdHJpbmcvcGx1cmFsaXplLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxJQUFJLEVBQWlCLE1BQU0sZUFBZSxDQUFDO0FBQ3BELE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQU03Qzs7Ozs7Ozs7Ozs7R0FXRztBQUNILE1BQU0sT0FBTyxvQkFBb0I7SUFoQmpDO1FBaUJVLGlCQUFZLEdBQVE7WUFDMUIsUUFBUSxFQUFFLFNBQVM7WUFDbkIsSUFBSSxFQUFFLE9BQU87WUFDYixNQUFNLEVBQUUsU0FBUztZQUNqQixPQUFPLEVBQUUsUUFBUTtZQUNqQixRQUFRLEVBQUUsVUFBVTtZQUNwQixPQUFPLEVBQUUsVUFBVTtZQUNuQixRQUFRLEVBQUUsWUFBWTtZQUN0QixRQUFRLEVBQUUsU0FBUztZQUNuQixJQUFJLEVBQUUsUUFBUTtZQUNkLEdBQUcsRUFBRSxNQUFNO1lBQ1gsSUFBSSxFQUFFLE1BQU07WUFDWixRQUFRLEVBQUUsU0FBUztZQUNuQixTQUFTLEVBQUUsVUFBVTtZQUNyQixLQUFLLEVBQUUsT0FBTztZQUNkLEtBQUssRUFBRSxTQUFTO1lBQ2hCLEtBQUssRUFBRSxTQUFTO1lBQ2hCLElBQUksRUFBRSxPQUFPO1lBQ2IsS0FBSyxFQUFFLE9BQU87WUFDZCxLQUFLLEVBQUUsU0FBUztZQUNoQixPQUFPLEVBQUUsV0FBVztZQUNwQixNQUFNLEVBQUUsU0FBUztZQUNqQixHQUFHLEVBQUUsUUFBUTtZQUNiLE1BQU0sRUFBRSxPQUFPO1lBQ2YsSUFBSSxFQUFFLFFBQVE7WUFDZCxPQUFPLEVBQUUsVUFBVTtZQUNuQixNQUFNLEVBQUUsVUFBVTtZQUNsQixLQUFLLEVBQUUsVUFBVTtZQUNqQixNQUFNLEVBQUUsVUFBVTtZQUNsQixNQUFN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YUFDN0I7U0FDRjtJQUNILENBQUM7OztZQWxNRixJQUFJLFNBQUM7Z0JBQ0osSUFBSSxFQUFFLGtCQUFrQjthQUN6QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBpcGUsIFBpcGVUcmFuc2Zvcm0gfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IGlzVm93ZWwgfSBmcm9tICcuLi9oZWxwZXJzL2hlbHBlcnMnO1xuXG5AUGlwZSh7XG4gIG5hbWU6ICdtYWtlUGx1cmFsU3RyaW5nJyxcbn0pXG5cbi8qKlxuICogVGFrZXMgYSBzaW5ndWxhciBlbnRpdHkgc3RyaW5nIGFuZCBwbHVyYWxpemVzIGl0LlxuICogVXNlcyBib3RoIG5haXZlIGFuZCBob2xkb3V0LWxpc3QgYXBwcm9hY2hlcy5cbiAqIElmIHNldmVyYWwgd29yZHMgYXBwZWFyIGluIHRoZSBzdHJpbmcsIG9ubHkgdGhlIGxhc3Qgd29yZCBpcyBwbHVyYWxpemVkIC0tIHRoaXNcbiAqIG1lYW5zIHRoYXQgaWYgXCJ5b3VyIHN0b3J5XCIgd2FzIHBhc3NlZCBpbiwgXCJ5b3VyIHN0b3JpZXNcIiB3b3VsZCBiZSBwYXNzZWQgb3V0LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBzaW5ndWxhckVudGl0eSAtIEVudGl0eSB0byBwbHVyYWxpemUuIFBhc3MgYXMgYSBzaW5ndWxhciAoJ3N0b3J5JyBvciAnaG91c2UnKS5cbiAqICAgICAgICAgIE5PVEU6IFRoZSBsYXN0IHdvcmQgaXMgZXhhbWluZWQuIFNvIHlvdSBjYW4gcGFzcyBpbiBlLmcuICdteSBzdG9yeScuXG4gKiBAcGFyYW0ge251bWJlcn0gW3F1YW50aXR5PTBdIHF1YW50aXR5IC0gSG93IG1hbnkgb2YgdGhlIGVudGl0eSBhcmUgdGhlcmU/IElmIGxlZnQgYmxhbmssIHRoaXMgd2lsbFxuICogICAgICAgICAgcGx1cmFsaXplIHRoZSBzdHJpbmcgKGUuZy4gJ3N0b3J5JyAtPiAnc3RvcmllcycsICdob3VzZScgLT4gJ2hvdXNlcycpLiBJZiBnaXZlbiBhIHZhbHVlLFxuICogICAgICAgICAgdGhpcyB3aWxsIHBsdXJhbGl6ZSBhcHByb3ByaWF0ZWx5IChlLmcuICgnc3RvcnknLCAxKSAtPiAnc3RvcnknLCAoJ3N0b3J5JywgMikgLT4gJ3N0b3JpZXMnKS5cbiAqL1xuZXhwb3J0IGNsYXNzIE1ha2VQbHVyYWxTdHJpbmdQaXBlIGltcGxlbWVudHMgUGlwZVRyYW5zZm9ybSB7XG4gIHByaXZhdGUgaXJyZWd1bGFyTWFwOiBhbnkgPSB7XG4gICAgYWRkZW5kdW06ICdhZGRlbmRhJyxcbiAgICBhbGdhOiAnYWxnYWUnLFxuICAgIGFsdW1uYTogJ2FsdW1uYWUnLFxuICAgIGFsdW1udXM6ICdhbHVtbmknLFxuICAgIGFuYWx5c2lzOiAnYW5hbHlzZXMnLFxuICAgIGFudGVubmE6ICdhbnRlbm5hZScsXG4gICAgYXBwZW5kaXg6ICdhcHBlbmRpY2VzJyxcbiAgICBhcXVhcml1bTogJ2FxdWFyaWEnLFxuICAgIGFyY2g6ICdhcmNoZXMnLFxuICAgIGF4ZTogJ2F4ZXMnLFxuICAgIGF4aXM6ICdheGVzJyxcbiAgICBiYWNpbGx1czogJ2JhY2lsbGknLFxuICAgIGJhY3Rlcml1bTogJ2JhY3RlcmlhJyxcbiAgICBiYXNpczogJ2Jhc2VzJyxcbiAgICBiYXRjaDogJ2JhdGNoZXMnLFxuICAgIGJlYWNoOiAnYmVhY2hlcycsXG4gICAgYmVhdTogJ2JlYXV4JyxcbiAgICBiaXNvbjogJ2Jpc29uJyxcbiAgICBicnVzaDogJ2JydXNoZXMnLFxuICAgIGJ1ZmZhbG86ICdidWZmYWxvZXMnLFxuICAgIGJ1cmVhdTogJ2J1cmVhdXMnLFxuICAgIGJ1czogJ2J1c3NlcycsXG4gICAgY2FjdHVzOiAnY2FjdGknLFxuICAgIGNhbGY6ICdjYWx2ZXMnLFxuICAgIGNoYXRlYXU6ICdjaGF0ZWF1eCcsXG4gICAgY2hlcnJ5OiAnY2hlcnJpZXMnLFxuICAgIGNoaWxkOiAnY2hpbGRyZW4nLFxuICAgIGNodXJjaDogJ2NodXJjaGVzJyxcbiAgICBjaXJjdXM6ICdjaXJjdXNlcycsXG4gICAgY29kOiAnY29kJyxcbiAgICBjb3JwczogJ2NvcnBzJyxcbiAgICBjb3JwdXM6ICdjb3Jwb3JhJyxcbiAgICBjcmlzaXM6ICdjcmlzZXMnLFxuICAgIGNyaXRlcmlvbjogJ2NyaXRlcmlhJyxcbiAgICBjdXJyaWN1bHVtOiAnY3VycmljdWxhJyxcbiAgICBkYXR1bTogJ2RhdGEnLFxuICAgIGRlZXI6ICdkZWVyJyxcbiAgICBkaWFnbm9zaXM6ICdkaWFnbm9zZXMnLFxuICAgIGRpZTogJ2RpY2UnLFxuICAgIGRvbWlubzogJ2RvbWlub2VzJyxcbiAgICBkd2FyZjogJ2R3YXJ2ZXMnLFxuICAgIGVjaG86ICdlY2hvZXMnLFxuICAgIGVsZjogJ2VsdmVzJyxcbiAgICBlbGxpcHNpczogJ2VsbGlwc2VzJyxcbiAgICBlbWJhcmdvOiAnZW1iYXJnb2VzJyxcbiAgICBlbXBoYXNpczogJ2VtcGhhc2VzJyxcbiAgICBlcnJhdHVtOiAnZXJyYXRhJyxcbiAgICBmYXg6ICdmYXhlcycsXG4gICAgZmlyZW1hbjogJ2ZpcmVtZW4nLFxuICAgIGZpc2g6ICdmaXNoJyxcbiAgICBmbHVzaDogJ2ZsdXNoZXMnLFxuICAgIGZvY3VzOiAnZm9jaScsXG4gICAgZm9vdDogJ2ZlZXQnLFxuICAgIGZvcm11bGE6ICdmb3JtdWxhcycsXG4gICAgZnVuZ3VzOiAnZnVuZ2knLFxuICAgIGdlbnVzOiAnZ2VuZXJhJyxcbiAgICBnb29zZTogJ2dlZXNlJyxcbiAgICBncmFmaXRvOiAnZ3JhZml0aScsXG4gICAgaGFsZjogJ2hhbHZlcycsXG4gICAgaGVybzogJ2hlcm9lcycsXG4gICAgaG9heDogJ2hvYXhlcycsXG4gICAgaG9vZjogJ2hvb3ZlcycsXG4gICAgaHlwb3RoZXNpczogJ2h5cG90aGVzZXMnLFxuICAgIGluZGV4OiAnaW5kaWNlcycsXG4gICAga2lzczogJ2tpc3NlcycsXG4gICAga25pZmU6ICdrbml2ZXMnLFxuICAgIGxlYWY6ICdsZWF2ZXMnLFxuICAgIGxpZmU6ICdsaXZlcycsXG4gICAgbG9hZjogJ2xvYXZlcycsXG4gICAgbG91c2U6ICdsaWNlJyxcbiAgICBtYW46ICdtZW4nLFxuICAgIG1hbmdvOiAnbWFuZ29lcycsXG4gICAgbWF0cml4OiAnbWF0cmljZXMnLFxuICAgIG1lYW5zOiAnbWVhbnMnLFxuICAgIG1lZGl1bTogJ21lZGlhJyxcbiAgICBtZW1vcmFuZHVtOiAnbWVtb3JhbmRhJyxcbiAgICBtaWxsZW5uaXVtOiAnbWlsZW5uaWEnLFxuICAgIG1vb3NlOiAnbW9vc2UnLFxuICAgIG1vc3F1aXRvOiAnbW9zcXVpdG9lcycsXG4gICAgbW90dG86ICdtb3R0b2VzJyxcbiAgICBtb3VzZTogJ21pY2UnLFxuICAgIG5lYnVsYTogJ25lYnVsYWUnLFxuICAgIG5ldXJvc2lzOiAnbmV1cm9zZXMnLFxuICAgIG51Y2xldXM6ICdudWNsZWknLFxuICAgIG9hc2lzOiAnb2FzZXMnLFxuICAgIG9jdG9wdXM6ICdvY3RvcG9kZXMnLFxuICAgIG92dW06ICdvdmEnLFxuICAgIG94OiAnb3hlbicsXG4gICAgcGFyYWx5c2lzOiAncGFyYWx5c2VzJyxcbiAgICBwYXJlbnRoZXNpczogJ3BhcmVudGhlc2VzJyxcbiAgICBwZXJzb246ICdwZW9wbGUnLFxuICAgIHBoZW5vbWVub246ICdwaGVub21lbmEnLFxuICAgIHBsYXRlYXU6ICdwbGF0ZWF1eCcsXG4gICAgcG90YXRvOiAncG90YXRvZXMnLFxuICAgIHF1aXo6ICdxdWl6emVzJyxcbiAgICByYWRpdXM6ICdyYWRpaScsXG4gICAgcmVmbGV4OiAncmVmbGV4ZXMnLFxuICAgICdydW5uZXItdXAnOiAncnVubmVycy11cCcsXG4gICAgc2NhbXBvOiAnc2NhbXBpJyxcbiAgICBzY2FyZjogJ3NjYXJ2ZXMnLFxuICAgIHNjaXNzb3JzOiAnc2Npc3NvcnMnLFxuICAgIHNjcmF0Y2g6ICdzY3JhdGNoZXMnLFxuICAgIHNlbGY6ICdzZWx2ZXMnLFxuICAgIHNlcmllczogJ3NlcmllcycsXG4gICAgc2hlYWY6ICdzaGVhdmVzJyxcbiAgICBzaGVlcDogJ3NoZWVwJyxcbiAgICBzaGVsZjogJ3NoZWx2ZXMnLFxuICAgICdzb24taW4tbGF3JzogJ3NvbnMtaW4tbGF3JyxcbiAgICBzcGVjaWVzOiAnc3BlY2llcycsXG4gICAgc3BsYXNoOiAnc3BsYXNoZXMnLFxuICAgIHN0aW11bHVzOiAnc3RpbXVsaScsXG4gICAgc3RpdGNoOiAnc3RpdGNoZXMnLFxuICAgIHN0cmF0dW06ICdzdHJhdGEnLFxuICAgIHN5bGxhYnVzOiAnc3lsbGFiaScsXG4gICAgc3ltcG9zaXVtOiAnc3ltcG9zaWEnLFxuICAgIHN5bm9wc2lzOiAnc3lub3BzZXMnLFxuICAgIHN5bnRoZXNpczogJ3N5bnRoZXNlcycsXG4gICAgdGFibGVhdTogJ3RhYmxlYXV4JyxcbiAgICB0YXg6ICd0YXhlcycsXG4gICAgdGhhdDogJ3Rob3NlJyxcbiAgICB0aGVzaXM6ICd0aGVzZXMnLFxuICAgIHRoaWVmOiAndGhpZXZlcycsXG4gICAgdGhpczogJ3RoZXNlJyxcbiAgICB0b21hdG86ICd0b21hdG9lcycsXG4gICAgdG9vdGg6ICd0ZWV0aCcsXG4gICAgdG9ybmFkbzogJ3Rvcm5hZG9lcycsXG4gICAgdG9ycGVkbzogJ3RvcnBlZG9lcycsXG4gICAgdmVydGVicmE6ICd2ZXJ0ZWJyYWUnLFxuICAgIHZldG86ICd2ZXRvZXMnLFxuICAgIHZpdGE6ICd2aXRhZScsXG4gICAgdm9sY2FubzogJ3ZvbGNhbm9lcycsXG4gICAgd2FsdHo6ICd3YWx0emVzJyxcbiAgICB3YXNoOiAnd2FzaGVzJyxcbiAgICB3YXRjaDogJ3dhdGNoZXMnLFxuICAgIHdoYXJmOiAnd2hhcnZlcycsXG4gICAgd2lmZTogJ3dpdmVzJyxcbiAgICB3b2xmOiAnd29sdmVzJyxcbiAgICB3b21hbjogJ3dvbWVuJyxcbiAgICB6ZXJvOiAnemVyb2VzJyxcbiAgfTtcblxuICB0cmFuc2Zvcm0oc2luZ3VsYXJFbnRpdHk6IHN0cmluZywgcXVhbnRpdHk6IG51bWJlciA9IDApOiBzdHJpbmcge1xuICAgIGlmICghc2luZ3VsYXJFbnRpdHkgfHwgc2luZ3VsYXJFbnRpdHkgPT09ICcnKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuXG4gICAgaWYgKHF1YW50aXR5ID09PSAxKSB7XG4gICAgICByZXR1cm4gc2luZ3VsYXJFbnRpdHk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGxhc3RXb3JkID0gc2luZ3VsYXJFbnRpdHkudHJpbSgpLnNwbGl0KCcgJylbc2luZ3VsYXJFbnRpdHkudHJpbSgpLnNwbGl0KCcgJykubGVuZ3RoIC0gMV07XG4gICAgICBpZiAodGhpcy5pcnJlZ3VsYXJNYXBbbGFzdFdvcmQudG9Mb2NhbGVMb3dlckNhc2UoKV0pIHtcbiAgICAgICAgaWYgKGxhc3RXb3JkWzBdID09PSBsYXN0V29yZFswXS50b0xvY2FsZVVwcGVyQ2FzZSgpKSB7XG4gICAgICAgICAgcmV0dXJuIHNpbmd1bGFyRW50aXR5LnJlcGxhY2UoXG4gICAgICAgICAgICBsYXN0V29yZCxcbiAgICAgICAgICAgIHRoaXMuaXJyZWd1bGFyTWFwW2xhc3RXb3JkLnRvTG9jYWxlTG93ZXJDYXNlKCldLnJlcGxhY2UoXG4gICAgICAgICAgICAgIHRoaXMuaXJyZWd1bGFyTWFwW2xhc3RXb3JkLnRvTG9jYWxlTG93ZXJDYXNlKCldWzBdLFxuICAgICAgICAgICAgICB0aGlzLmlycmVndWxhck1hcFtsYXN0V29yZC50b0xvY2FsZUxvd2VyQ2FzZSgpXVswXS50b0xvY2FsZVVwcGVyQ2FzZSgpXG4gICAgICAgICAgICApXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzaW5ndWxhckVudGl0eS5yZXBsYWNlKGxhc3RXb3JkLCB0aGlzLmlycmVndWxhck1hcFtsYXN0V29yZC50b0xvY2FsZUxvd2VyQ2FzZSgpXSk7XG4gICAgICB9IGVsc2UgaWYgKGxhc3RXb3JkW2xhc3RXb3JkLmxlbmd0aCAtIDFdID09PSAneScpIHtcbiAgICAgICAgLy8gTmFpdmUgYXBwcm9hY2g6XG4gICAgICAgIC8vIGNvbnNvbmFudCt5ID0gd29yZCAtICd5JyArJ2llcydcbiAgICAgICAgLy8gdm93ZWwreSA9IHdvcmQgKyAncydcblxuICAgICAgICByZXR1cm4gaXNWb3dlbChsYXN0V29yZFtsYXN0V29yZC5sZW5ndGggLSAyXSlcbiAgICAgICAgICA/IHNpbmd1bGFyRW50aXR5ICsgJ3MnXG4gICAgICAgICAgOiBzaW5ndWxhckVudGl0eS5yZXBsYWNlKGxhc3RXb3JkLCBsYXN0V29yZC5zbGljZSgwLCAtMSkgKyAnaWVzJyk7XG4gICAgICB9IGVsc2UgaWYgKGxhc3RXb3JkW2xhc3RXb3JkLmxlbmd0aCAtIDFdID09PSAncycpIHtcbiAgICAgICAgcmV0dXJuIHNpbmd1bGFyRW50aXR5ICsgJ2VzJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBzaW5ndWxhckVudGl0eSArICdzJztcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiJdfQ==