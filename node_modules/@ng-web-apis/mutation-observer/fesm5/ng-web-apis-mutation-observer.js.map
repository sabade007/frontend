{"version":3,"file":"ng-web-apis-mutation-observer.js.map","sources":["ng://@ng-web-apis/mutation-observer/tokens/mutation-observer-init.ts","ng://@ng-web-apis/mutation-observer/utils/boolean-attribute.ts","ng://@ng-web-apis/mutation-observer/utils/mutation-observer-init-factory.ts","ng://@ng-web-apis/mutation-observer/directives/mutation-observer.directive.ts","ng://@ng-web-apis/mutation-observer/services/mutation-observer.service.ts","ng://@ng-web-apis/mutation-observer/module.ts"],"sourcesContent":["import {InjectionToken} from '@angular/core';\r\n\r\nexport const MUTATION_OBSERVER_INIT = new InjectionToken<MutationObserverInit>(\r\n    'MutationObserver config',\r\n);\r\n","export function booleanAttribute(element: Element, attribute: string): true | undefined {\r\n    return element.getAttribute(attribute) !== null || undefined;\r\n}\r\n","import {ElementRef} from '@angular/core';\r\nimport {booleanAttribute} from './boolean-attribute';\r\n\r\nexport function mutationObserverInitFactory({\r\n    nativeElement,\r\n}: ElementRef<Element>): MutationObserverInit {\r\n    const attributeFilterAttr = nativeElement.getAttribute('attributeFilter');\r\n    const attributeFilter = attributeFilterAttr\r\n        ? attributeFilterAttr.split(',').map(attr => attr.trim())\r\n        : undefined;\r\n\r\n    return {\r\n        attributeFilter,\r\n        attributeOldValue: booleanAttribute(nativeElement, 'attributeOldValue'),\r\n        attributes: booleanAttribute(nativeElement, 'attributes'),\r\n        characterData: booleanAttribute(nativeElement, 'characterData'),\r\n        characterDataOldValue: booleanAttribute(nativeElement, 'characterDataOldValue'),\r\n        childList: booleanAttribute(nativeElement, 'childList'),\r\n        subtree: booleanAttribute(nativeElement, 'subtree'),\r\n    };\r\n}\r\n","import {\r\n    Attribute,\r\n    Directive,\r\n    ElementRef,\r\n    EventEmitter,\r\n    Inject,\r\n    OnDestroy,\r\n    Output,\r\n} from '@angular/core';\r\nimport {MUTATION_OBSERVER_INIT} from '../tokens/mutation-observer-init';\r\nimport {mutationObserverInitFactory} from '../utils/mutation-observer-init-factory';\r\n\r\n// @dynamic\r\n@Directive({\r\n    selector: '[waMutationObserver]',\r\n    exportAs: 'MutationObserver',\r\n    providers: [\r\n        {\r\n            provide: MUTATION_OBSERVER_INIT,\r\n            deps: [ElementRef],\r\n            useFactory: mutationObserverInitFactory,\r\n        },\r\n    ],\r\n})\r\nexport class MutationObserverDirective extends MutationObserver implements OnDestroy {\r\n    @Output()\r\n    readonly waMutationObserver = new EventEmitter<MutationRecord[]>();\r\n\r\n    constructor(\r\n        @Inject(ElementRef) {nativeElement}: ElementRef<Node>,\r\n        @Inject(MUTATION_OBSERVER_INIT) config: MutationObserverInit,\r\n        @Attribute('attributeFilter') _1: unknown,\r\n        @Attribute('attributeOldValue') _2: unknown,\r\n        @Attribute('attributes') _3: unknown,\r\n        @Attribute('characterData') _4: unknown,\r\n        @Attribute('characterDataOldValue') _5: unknown,\r\n        @Attribute('childList') _6: unknown,\r\n        @Attribute('subtree') _7: unknown,\r\n    ) {\r\n        super(records => {\r\n            this.waMutationObserver.emit(records);\r\n        });\r\n\r\n        this.observe(nativeElement, config);\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.disconnect();\r\n    }\r\n}\r\n","import {ElementRef, Inject, Injectable} from '@angular/core';\r\nimport {Observable} from 'rxjs';\r\nimport {MUTATION_OBSERVER_INIT} from '../tokens/mutation-observer-init';\r\n\r\n// @dynamic\r\n@Injectable()\r\nexport class MutationObserverService extends Observable<ReadonlyArray<MutationRecord>> {\r\n    constructor(\r\n        @Inject(ElementRef) {nativeElement}: ElementRef<Node>,\r\n        @Inject(MUTATION_OBSERVER_INIT) config: MutationObserverInit,\r\n    ) {\r\n        super(subscriber => {\r\n            const observer = new MutationObserver(records => {\r\n                subscriber.next(records);\r\n            });\r\n\r\n            observer.observe(nativeElement, config);\r\n\r\n            return () => {\r\n                observer.disconnect();\r\n            };\r\n        });\r\n    }\r\n}\r\n","import {NgModule} from '@angular/core';\r\nimport {MutationObserverDirective} from './directives/mutation-observer.directive';\r\n\r\n@NgModule({\r\n    declarations: [MutationObserverDirective],\r\n    exports: [MutationObserverDirective],\r\n})\r\nexport class MutationObserverModule {}\r\n"],"names":["tslib_1.__extends"],"mappings":"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"}
