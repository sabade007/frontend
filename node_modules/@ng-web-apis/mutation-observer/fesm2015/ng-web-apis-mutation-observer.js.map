{"version":3,"file":"ng-web-apis-mutation-observer.js.map","sources":["ng://@ng-web-apis/mutation-observer/tokens/mutation-observer-init.ts","ng://@ng-web-apis/mutation-observer/utils/boolean-attribute.ts","ng://@ng-web-apis/mutation-observer/utils/mutation-observer-init-factory.ts","ng://@ng-web-apis/mutation-observer/directives/mutation-observer.directive.ts","ng://@ng-web-apis/mutation-observer/services/mutation-observer.service.ts","ng://@ng-web-apis/mutation-observer/module.ts"],"sourcesContent":["import {InjectionToken} from '@angular/core';\r\n\r\nexport const MUTATION_OBSERVER_INIT = new InjectionToken<MutationObserverInit>(\r\n    'MutationObserver config',\r\n);\r\n","export function booleanAttribute(element: Element, attribute: string): true | undefined {\r\n    return element.getAttribute(attribute) !== null || undefined;\r\n}\r\n","import {ElementRef} from '@angular/core';\r\nimport {booleanAttribute} from './boolean-attribute';\r\n\r\nexport function mutationObserverInitFactory({\r\n    nativeElement,\r\n}: ElementRef<Element>): MutationObserverInit {\r\n    const attributeFilterAttr = nativeElement.getAttribute('attributeFilter');\r\n    const attributeFilter = attributeFilterAttr\r\n        ? attributeFilterAttr.split(',').map(attr => attr.trim())\r\n        : undefined;\r\n\r\n    return {\r\n        attributeFilter,\r\n        attributeOldValue: booleanAttribute(nativeElement, 'attributeOldValue'),\r\n        attributes: booleanAttribute(nativeElement, 'attributes'),\r\n        characterData: booleanAttribute(nativeElement, 'characterData'),\r\n        characterDataOldValue: booleanAttribute(nativeElement, 'characterDataOldValue'),\r\n        childList: booleanAttribute(nativeElement, 'childList'),\r\n        subtree: booleanAttribute(nativeElement, 'subtree'),\r\n    };\r\n}\r\n","import {\r\n    Attribute,\r\n    Directive,\r\n    ElementRef,\r\n    EventEmitter,\r\n    Inject,\r\n    OnDestroy,\r\n    Output,\r\n} from '@angular/core';\r\nimport {MUTATION_OBSERVER_INIT} from '../tokens/mutation-observer-init';\r\nimport {mutationObserverInitFactory} from '../utils/mutation-observer-init-factory';\r\n\r\n// @dynamic\r\n@Directive({\r\n    selector: '[waMutationObserver]',\r\n    exportAs: 'MutationObserver',\r\n    providers: [\r\n        {\r\n            provide: MUTATION_OBSERVER_INIT,\r\n            deps: [ElementRef],\r\n            useFactory: mutationObserverInitFactory,\r\n        },\r\n    ],\r\n})\r\nexport class MutationObserverDirective extends MutationObserver implements OnDestroy {\r\n    @Output()\r\n    readonly waMutationObserver = new EventEmitter<MutationRecord[]>();\r\n\r\n    constructor(\r\n        @Inject(ElementRef) {nativeElement}: ElementRef<Node>,\r\n        @Inject(MUTATION_OBSERVER_INIT) config: MutationObserverInit,\r\n        @Attribute('attributeFilter') _1: unknown,\r\n        @Attribute('attributeOldValue') _2: unknown,\r\n        @Attribute('attributes') _3: unknown,\r\n        @Attribute('characterData') _4: unknown,\r\n        @Attribute('characterDataOldValue') _5: unknown,\r\n        @Attribute('childList') _6: unknown,\r\n        @Attribute('subtree') _7: unknown,\r\n    ) {\r\n        super(records => {\r\n            this.waMutationObserver.emit(records);\r\n        });\r\n\r\n        this.observe(nativeElement, config);\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.disconnect();\r\n    }\r\n}\r\n","import {ElementRef, Inject, Injectable} from '@angular/core';\r\nimport {Observable} from 'rxjs';\r\nimport {MUTATION_OBSERVER_INIT} from '../tokens/mutation-observer-init';\r\n\r\n// @dynamic\r\n@Injectable()\r\nexport class MutationObserverService extends Observable<ReadonlyArray<MutationRecord>> {\r\n    constructor(\r\n        @Inject(ElementRef) {nativeElement}: ElementRef<Node>,\r\n        @Inject(MUTATION_OBSERVER_INIT) config: MutationObserverInit,\r\n    ) {\r\n        super(subscriber => {\r\n            const observer = new MutationObserver(records => {\r\n                subscriber.next(records);\r\n            });\r\n\r\n            observer.observe(nativeElement, config);\r\n\r\n            return () => {\r\n                observer.disconnect();\r\n            };\r\n        });\r\n    }\r\n}\r\n","import {NgModule} from '@angular/core';\r\nimport {MutationObserverDirective} from './directives/mutation-observer.directive';\r\n\r\n@NgModule({\r\n    declarations: [MutationObserverDirective],\r\n    exports: [MutationObserverDirective],\r\n})\r\nexport class MutationObserverModule {}\r\n"],"names":[],"mappings":"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"}
