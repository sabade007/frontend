!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/router"),require("rxjs")):"function"==typeof define&&define.amd?define("ngx-quicklink",["exports","@angular/core","@angular/router","rxjs"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["ngx-quicklink"]={},e.ng.core,e.ng.router,e.rxjs)}(this,(function(e,t,r,n){"use strict";var i=[],o=function(){function e(e){this.router=e,this.trees=i}return e.prototype.add=function(e){this.trees.push(e)},e.prototype.shouldPrefetch=function(e){var t=this.router.parseUrl(e);return this.trees.some(s.bind(null,t))},e}();function s(e,t){return function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every((function(r){return t[r]===e[r]}))}(t.queryParams,e.queryParams)&&u(t.root,e.root,e.root.segments)}function u(e,t,n){if(e.segments.length>n.length)return!!a(o=e.segments.slice(0,n.length),n)&&!t.hasChildren();if(e.segments.length===n.length){if(!a(e.segments,n))return!1;if(!t.hasChildren())return!0;for(var i in t.children){if(!e.children[i])break;if(u(e.children[i],t.children[i],t.children[i].segments))return!0}return!1}var o=n.slice(0,e.segments.length),s=n.slice(e.segments.length);return!!a(e.segments,o)&&(!!e.children[r.PRIMARY_OUTLET]&&u(e.children[r.PRIMARY_OUTLET],t,s))}function a(e,t){return e.length===t.length&&e.every((function(e,r){return e.path===t[r].path||e.path.startsWith(":")||t[r].path.startsWith(":")}))}o.decorators=[{type:t.Injectable}],o.ctorParameters=function(){return[{type:r.Router}]};var l="undefined"!=typeof window?window.requestIdleCallback||function(e){var t=Date.now();return setTimeout((function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})}),1)}:function(){},c=function(){return"undefined"!=typeof window&&!!window.IntersectionObserver},f=new t.InjectionToken("LinkHandler"),d=function(){function e(e,t,r){var n=this;this.loader=e,this.registry=t,this.ngZone=r,this.elementLink=new Map,this.observer=c()?new IntersectionObserver((function(e){e.forEach((function(e){if(e.isIntersecting){var t=e.target,r=n.elementLink.get(t);if(!r||!r.urlTree)return;n.registry.add(r.urlTree),n.observer.unobserve(t),l((function(){n.loader.preload().subscribe((function(){}))}))}}))})):null}return e.prototype.register=function(e){var t=this;this.elementLink.set(e.element,e),this.ngZone.runOutsideAngular((function(){t.observer.observe(e.element)}))},e.prototype.unregister=function(e){this.elementLink.has(e.element)&&(this.observer.unobserve(e.element),this.elementLink.delete(e.element))},e.prototype.supported=function(){return c()},e}();d.decorators=[{type:t.Injectable}],d.ctorParameters=function(){return[{type:r.RouterPreloader},{type:o},{type:t.NgZone}]};var h=function(){function e(e,t){this.loader=e,this.registry=t}return e.prototype.register=function(e){var t=this;this.registry.add(e.urlTree),l((function(){return t.loader.preload().subscribe((function(){}))}))},e.prototype.unregister=function(e){},e.prototype.supported=function(){return!0},e}();h.decorators=[{type:t.Injectable}],h.ctorParameters=function(){return[{type:r.RouterPreloader},{type:o}]};var p=function(){function e(e,t,r,n){this.linkHandlers=e,this.el=t,this.linkHandler=this.linkHandlers.filter((function(e){return e.supported()})).shift(),this.rl=r||n,this.element&&this.element.setAttribute&&this.element.setAttribute("ngx-ql","")}return e.prototype.ngOnChanges=function(e){e.routerLink&&(this.linkHandler.unregister(this),this.linkHandler.register(this))},e.prototype.ngOnDestroy=function(){this.linkHandler.unregister(this)},Object.defineProperty(e.prototype,"element",{get:function(){return this.el.nativeElement},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"urlTree",{get:function(){return this.rl.urlTree},enumerable:!1,configurable:!0}),e}();p.decorators=[{type:t.Directive,args:[{selector:"[routerLink]"}]}],p.ctorParameters=function(){return[{type:Array,decorators:[{type:t.Inject,args:[f]}]},{type:t.ElementRef},{type:r.RouterLink,decorators:[{type:t.Optional}]},{type:r.RouterLinkWithHref,decorators:[{type:t.Optional}]}]},p.propDecorators={routerLink:[{type:t.Input}]};var g=function(){function e(e,t){this.registry=e,this.router=t,this.loading=new Set}return e.prototype.preload=function(e,t){if(this.loading.has(e))return n.EMPTY;var r="undefined"!=typeof navigator?navigator.connection:void 0;if(r&&((r.effectiveType||"").includes("2g")||r.saveData))return n.EMPTY;if(e.data&&!1===e.data.preload)return n.EMPTY;var i=y(this.router.config,e);return this.registry.shouldPrefetch(i)?(this.loading.add(e),t()):n.EMPTY},e}();g.decorators=[{type:t.Injectable}],g.ctorParameters=function(){return[{type:o},{type:r.Router}]};var y=function(e,t){e=e.slice();for(var r=new Map,n=new Set,i=function(){var i=e.shift();if(n.add(i),i===t)return"break";var o=i.children||[],s=i._loadedConfig;s&&s.routes&&(o=o.concat(s.routes)),o.forEach((function(t){n.has(t)||(r.set(t,i),e.push(t))}))};e.length;){if("break"===i())break}for(var o="",s=t;s;)o=m(s)?"/"+s.path+o:"/("+s.outlet+":"+s.path+o+")",s=r.get(s);return o.replace(/\/\//,"/")};function m(e){return e.outlet===r.PRIMARY_OUTLET||!e.outlet}var v=function(){};v.decorators=[{type:t.NgModule,args:[{declarations:[p],providers:[{provide:f,useClass:d,multi:!0},{provide:f,useClass:h,multi:!0},o,g],exports:[p]}]}],e.QuicklinkModule=v,e.QuicklinkStrategy=g,e.ɵa=f,e.ɵb=d,e.ɵc=h,e.ɵe=o,e.ɵɵLinkDirective=p,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-quicklink.umd.min.js.map