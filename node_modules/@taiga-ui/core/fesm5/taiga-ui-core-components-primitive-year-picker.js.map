{"version":3,"file":"taiga-ui-core-components-primitive-year-picker.js","sources":["ng://@taiga-ui/core/components/primitive-year-picker/primitive-year-picker.component.ts","ng://@taiga-ui/core/components/primitive-year-picker/primitive-year-picker.module.ts","ng://@taiga-ui/core/components/primitive-year-picker/taiga-ui-core-components-primitive-year-picker.ts"],"sourcesContent":["import {\n    ChangeDetectionStrategy,\n    Component,\n    EventEmitter,\n    HostBinding,\n    Input,\n    Output,\n} from '@angular/core';\nimport {\n    ALWAYS_FALSE_HANDLER,\n    inRange,\n    TUI_FIRST_DAY,\n    TUI_LAST_DAY,\n    TuiBooleanHandler,\n    TuiDayRange,\n    tuiDefaultProp,\n    TuiMonth,\n    TuiMonthRange,\n    TuiYear,\n} from '@taiga-ui/cdk';\nimport {TuiInteractiveState, TuiRangeState} from '@taiga-ui/core/enums';\n\nconst LIMIT = 100;\nconst ITEMS_IN_ROW = 4;\n\n@Component({\n    selector: 'tui-primitive-year-picker',\n    templateUrl: './primitive-year-picker.template.html',\n    styleUrls: ['./primitive-year-picker.style.less'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TuiPrimitiveYearPickerComponent {\n    private hoveredItem: number | null = null;\n    private pressedItem: number | null = null;\n    private readonly currentYear = TuiMonth.currentLocal().year;\n\n    @Input()\n    @tuiDefaultProp()\n    value: TuiDayRange | TuiMonthRange | TuiYear | null = null;\n\n    @Input()\n    @tuiDefaultProp()\n    initialItem: TuiYear = TuiMonth.currentLocal();\n\n    @Input()\n    @tuiDefaultProp()\n    min: TuiYear = TUI_FIRST_DAY;\n\n    @Input()\n    @tuiDefaultProp()\n    max: TuiYear = TUI_LAST_DAY;\n\n    @Input()\n    @tuiDefaultProp()\n    disabledItemHandler: TuiBooleanHandler<number> = ALWAYS_FALSE_HANDLER;\n\n    @Output()\n    readonly yearClick = new EventEmitter<TuiYear>();\n\n    @HostBinding('class._single')\n    get isSingle(): boolean {\n        const {value} = this;\n\n        return !!value && this.isRange(value) && value.from.yearSame(value.to);\n    }\n\n    get rows(): number {\n        return Math.ceil((this.calculatedMax - this.calculatedMin) / ITEMS_IN_ROW);\n    }\n\n    get calculatedMin(): number {\n        const initial = this.initialItem.year - LIMIT;\n\n        return this.min.year > initial ? this.min.year : initial;\n    }\n\n    get calculatedMax(): number {\n        const initial = this.initialItem.year + LIMIT;\n\n        return this.max.year < initial ? this.max.year + 1 : initial;\n    }\n\n    isRange(item: TuiMonthRange | TuiYear): item is TuiMonthRange {\n        return item instanceof TuiMonthRange;\n    }\n\n    scrollItemIntoView(item: number): boolean {\n        return this.initialItem.year === item;\n    }\n\n    getItem(rowIndex: number, colIndex: number): number {\n        return rowIndex * ITEMS_IN_ROW + colIndex + this.calculatedMin;\n    }\n\n    getItemState(item: number): TuiInteractiveState | null {\n        const {disabledItemHandler, max, pressedItem, hoveredItem} = this;\n\n        if (\n            max.year < item ||\n            (disabledItemHandler !== ALWAYS_FALSE_HANDLER && disabledItemHandler(item))\n        ) {\n            return TuiInteractiveState.Disabled;\n        }\n\n        if (pressedItem === item) {\n            return TuiInteractiveState.Pressed;\n        }\n\n        if (hoveredItem === item) {\n            return TuiInteractiveState.Hovered;\n        }\n\n        return null;\n    }\n\n    getItemRange(item: number): TuiRangeState | null {\n        const {value, hoveredItem} = this;\n\n        if (value === null) {\n            return null;\n        }\n\n        if (value instanceof TuiYear) {\n            return value.year === item ? TuiRangeState.Single : null;\n        }\n\n        if (\n            (value.from.year === item && !value.from.yearSame(value.to)) ||\n            (hoveredItem !== null &&\n                hoveredItem > value.from.year &&\n                value.from.year === item &&\n                value.from.yearSame(value.to)) ||\n            (hoveredItem !== null &&\n                hoveredItem === item &&\n                hoveredItem < value.from.year &&\n                value.from.yearSame(value.to))\n        ) {\n            return TuiRangeState.Start;\n        }\n\n        if (\n            (value.to.year === item && !value.from.yearSame(value.to)) ||\n            (hoveredItem !== null &&\n                hoveredItem < value.from.year &&\n                value.from.year === item &&\n                value.from.yearSame(value.to)) ||\n            (hoveredItem !== null &&\n                hoveredItem === item &&\n                hoveredItem > value.from.year &&\n                value.from.yearSame(value.to))\n        ) {\n            return TuiRangeState.End;\n        }\n\n        return value.from.yearSame(value.to) && value.from.year === item\n            ? TuiRangeState.Single\n            : null;\n    }\n\n    itemIsToday(item: number): boolean {\n        return this.currentYear === item;\n    }\n\n    itemIsInterval(item: number): boolean {\n        const {value, hoveredItem} = this;\n\n        if (value === null || !this.isRange(value)) {\n            return false;\n        }\n\n        if (!value.from.yearSame(value.to)) {\n            return value.from.year <= item && value.to.year > item;\n        }\n\n        if (hoveredItem === null || value.from.year === hoveredItem) {\n            return false;\n        }\n\n        return inRange(\n            item,\n            Math.min(value.from.year, hoveredItem),\n            Math.max(value.from.year, hoveredItem),\n        );\n    }\n\n    onItemHovered(hovered: boolean, item: number): void {\n        this.updateHoveredItem(hovered, item);\n    }\n\n    onItemPressed(pressed: boolean, item: number): void {\n        this.updatePressedItem(pressed, item);\n    }\n\n    onItemClick(item: number): void {\n        this.yearClick.emit(new TuiYear(item));\n    }\n\n    private updateHoveredItem(hovered: boolean, item: number): void {\n        this.hoveredItem = hovered ? item : null;\n    }\n\n    private updatePressedItem(pressed: boolean, item: number): void {\n        this.pressedItem = pressed ? item : null;\n    }\n}\n","import {NgModule} from '@angular/core';\nimport {\n    TuiHoveredModule,\n    TuiLetModule,\n    TuiPressedModule,\n    TuiRepeatTimesModule,\n} from '@taiga-ui/cdk';\nimport {TuiScrollIntoViewModule} from '@taiga-ui/core/directives/scroll-into-view';\n\nimport {TuiPrimitiveYearPickerComponent} from './primitive-year-picker.component';\n\n@NgModule({\n    imports: [\n        TuiHoveredModule,\n        TuiPressedModule,\n        TuiRepeatTimesModule,\n        TuiLetModule,\n        TuiScrollIntoViewModule,\n    ],\n    declarations: [TuiPrimitiveYearPickerComponent],\n    exports: [TuiPrimitiveYearPickerComponent],\n})\nexport class TuiPrimitiveYearPickerModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":";;;;;AAsBA,IAAM,KAAK,GAAG,GAAG,CAAC;AAClB,IAAM,YAAY,GAAG,CAAC,CAAC;;IAQvB;QACY,gBAAW,GAAkB,IAAI,CAAC;QAClC,gBAAW,GAAkB,IAAI,CAAC;QACzB,gBAAW,GAAG,QAAQ,CAAC,YAAY,EAAE,CAAC,IAAI,CAAC;QAI5D,UAAK,GAAiD,IAAI,CAAC;QAI3D,gBAAW,GAAY,QAAQ,CAAC,YAAY,EAAE,CAAC;QAI/C,QAAG,GAAY,aAAa,CAAC;QAI7B,QAAG,GAAY,YAAY,CAAC;QAI5B,wBAAmB,GAA8B,oBAAoB,CAAC;QAG7D,cAAS,GAAG,IAAI,YAAY,EAAW,CAAC;KAmJpD;IAhJG,sBAAI,qDAAQ;aAAZ;YACW,IAAA,kBAAK,CAAS;YAErB,OAAO,CAAC,CAAC,KAAK,IAAI,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;SAC1E;;;OAAA;IAED,sBAAI,iDAAI;aAAR;YACI,OAAO,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,IAAI,YAAY,CAAC,CAAC;SAC9E;;;OAAA;IAED,sBAAI,0DAAa;aAAjB;YACI,IAAM,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,GAAG,KAAK,CAAC;YAE9C,OAAO,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,OAAO,CAAC;SAC5D;;;OAAA;IAED,sBAAI,0DAAa;aAAjB;YACI,IAAM,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,GAAG,KAAK,CAAC;YAE9C,OAAO,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,CAAC,GAAG,OAAO,CAAC;SAChE;;;OAAA;IAED,iDAAO,GAAP,UAAQ,IAA6B;QACjC,OAAO,IAAI,YAAY,aAAa,CAAC;KACxC;IAED,4DAAkB,GAAlB,UAAmB,IAAY;QAC3B,OAAO,IAAI,CAAC,WAAW,CAAC,IAAI,KAAK,IAAI,CAAC;KACzC;IAED,iDAAO,GAAP,UAAQ,QAAgB,EAAE,QAAgB;QACtC,OAAO,QAAQ,GAAG,YAAY,GAAG,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAC;KAClE;IAED,sDAAY,GAAZ,UAAa,IAAY;QACf,IAAA,SAA2D,EAA1D,4CAAmB,EAAE,YAAG,EAAE,4BAAW,EAAE,4BAAmB,CAAC;QAElE,IACI,GAAG,CAAC,IAAI,GAAG,IAAI;aACd,mBAAmB,KAAK,oBAAoB,IAAI,mBAAmB,CAAC,IAAI,CAAC,CAAC,EAC7E;YACE,iCAAoC;SACvC;QAED,IAAI,WAAW,KAAK,IAAI,EAAE;YACtB,+BAAmC;SACtC;QAED,IAAI,WAAW,KAAK,IAAI,EAAE;YACtB,+BAAmC;SACtC;QAED,OAAO,IAAI,CAAC;KACf;IAED,sDAAY,GAAZ,UAAa,IAAY;QACf,IAAA,SAA2B,EAA1B,gBAAK,EAAE,4BAAmB,CAAC;QAElC,IAAI,KAAK,KAAK,IAAI,EAAE;YAChB,OAAO,IAAI,CAAC;SACf;QAED,IAAI,KAAK,YAAY,OAAO,EAAE;YAC1B,OAAO,KAAK,CAAC,IAAI,KAAK,IAAI,2BAA0B,IAAI,CAAC;SAC5D;QAED,IACI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE,CAAC;aAC1D,WAAW,KAAK,IAAI;gBACjB,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI;gBAC7B,KAAK,CAAC,IAAI,CAAC,IAAI,KAAK,IAAI;gBACxB,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;aACjC,WAAW,KAAK,IAAI;gBACjB,WAAW,KAAK,IAAI;gBACpB,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI;gBAC7B,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,EACpC;YACE,2BAA2B;SAC9B;QAED,IACI,CAAC,KAAK,CAAC,EAAE,CAAC,IAAI,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE,CAAC;aACxD,WAAW,KAAK,IAAI;gBACjB,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI;gBAC7B,KAAK,CAAC,IAAI,CAAC,IAAI,KAAK,IAAI;gBACxB,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;aACjC,WAAW,KAAK,IAAI;gBACjB,WAAW,KAAK,IAAI;gBACpB,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI;gBAC7B,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,EACpC;YACE,uBAAyB;SAC5B;QAED,OAAO,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE,CAAC,IAAI,KAAK,CAAC,IAAI,CAAC,IAAI,KAAK,IAAI;;cAE1D,IAAI,CAAC;KACd;IAED,qDAAW,GAAX,UAAY,IAAY;QACpB,OAAO,IAAI,CAAC,WAAW,KAAK,IAAI,CAAC;KACpC;IAED,wDAAc,GAAd,UAAe,IAAY;QACjB,IAAA,SAA2B,EAA1B,gBAAK,EAAE,4BAAmB,CAAC;QAElC,IAAI,KAAK,KAAK,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;YACxC,OAAO,KAAK,CAAC;SAChB;QAED,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE,CAAC,EAAE;YAChC,OAAO,KAAK,CAAC,IAAI,CAAC,IAAI,IAAI,IAAI,IAAI,KAAK,CAAC,EAAE,CAAC,IAAI,GAAG,IAAI,CAAC;SAC1D;QAED,IAAI,WAAW,KAAK,IAAI,IAAI,KAAK,CAAC,IAAI,CAAC,IAAI,KAAK,WAAW,EAAE;YACzD,OAAO,KAAK,CAAC;SAChB;QAED,OAAO,OAAO,CACV,IAAI,EACJ,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,WAAW,CAAC,EACtC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,WAAW,CAAC,CACzC,CAAC;KACL;IAED,uDAAa,GAAb,UAAc,OAAgB,EAAE,IAAY;QACxC,IAAI,CAAC,iBAAiB,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;KACzC;IAED,uDAAa,GAAb,UAAc,OAAgB,EAAE,IAAY;QACxC,IAAI,CAAC,iBAAiB,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;KACzC;IAED,qDAAW,GAAX,UAAY,IAAY;QACpB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC;KAC1C;IAEO,2DAAiB,GAAzB,UAA0B,OAAgB,EAAE,IAAY;QACpD,IAAI,CAAC,WAAW,GAAG,OAAO,GAAG,IAAI,GAAG,IAAI,CAAC;KAC5C;IAEO,2DAAiB,GAAzB,UAA0B,OAAgB,EAAE,IAAY;QACpD,IAAI,CAAC,WAAW,GAAG,OAAO,GAAG,IAAI,GAAG,IAAI,CAAC;KAC5C;IArKD;QAFC,KAAK,EAAE;QACP,cAAc,EAAE;kEAC0C;IAI3D;QAFC,KAAK,EAAE;QACP,cAAc,EAAE;wEAC8B;IAI/C;QAFC,KAAK,EAAE;QACP,cAAc,EAAE;gEACY;IAI7B;QAFC,KAAK,EAAE;QACP,cAAc,EAAE;gEACW;IAI5B;QAFC,KAAK,EAAE;QACP,cAAc,EAAE;gFACqD;IAGtE;QADC,MAAM,EAAE;sEACwC;IAGjD;QADC,WAAW,CAAC,eAAe,CAAC;mEAK5B;IAjCQ,+BAA+B;QAN3C,SAAS,CAAC;YACP,QAAQ,EAAE,2BAA2B;YACrC,u6BAAoD;YAEpD,eAAe,EAAE,uBAAuB,CAAC,MAAM;;SAClD,CAAC;OACW,+BAA+B,CA6K3C;IAAD,sCAAC;CA7KD;;;ICTA;KAA4C;IAA/B,4BAA4B;QAXxC,QAAQ,CAAC;YACN,OAAO,EAAE;gBACL,gBAAgB;gBAChB,gBAAgB;gBAChB,oBAAoB;gBACpB,YAAY;gBACZ,uBAAuB;aAC1B;YACD,YAAY,EAAE,CAAC,+BAA+B,CAAC;YAC/C,OAAO,EAAE,CAAC,+BAA+B,CAAC;SAC7C,CAAC;OACW,4BAA4B,CAAG;IAAD,mCAAC;CAA5C;;ACtBA;;;;;;"}