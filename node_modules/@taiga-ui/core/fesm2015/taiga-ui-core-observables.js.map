{"version":3,"file":"taiga-ui-core-observables.js","sources":["ng://@taiga-ui/core/observables/smart-search.ts","ng://@taiga-ui/core/observables/zoneful-map.ts","ng://@taiga-ui/core/observables/taiga-ui-core-observables.ts"],"sourcesContent":["import {EMPTY_ARRAY} from '@taiga-ui/cdk';\nimport {Observable, OperatorFunction} from 'rxjs';\nimport {\n    debounceTime,\n    distinctUntilChanged,\n    scan,\n    startWith,\n    switchMap,\n} from 'rxjs/operators';\n\n/**\n * @deprecated: use {@link tuiSmartSearch} instead\n */\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport function smartSearch<T>(\n    getSearchFunction: (search: string) => Observable<readonly T[] | readonly T[][]>,\n    searchDebounceTimeMs: number = 400,\n): OperatorFunction<string, readonly T[] | readonly T[][] | null> {\n    return source =>\n        source.pipe(\n            debounceTime(searchDebounceTimeMs),\n            scan((previousSearched, current) => {\n                return previousSearched !== `` && current.startsWith(previousSearched)\n                    ? previousSearched\n                    : current;\n            }, ``),\n            distinctUntilChanged(),\n            switchMap(value => getSearchFunction(value).pipe(startWith(null))),\n            startWith(EMPTY_ARRAY),\n        );\n}\n\nexport const tuiSmartSearch = smartSearch;\n","import {NgZone} from '@angular/core';\nimport {tuiZonefull} from '@taiga-ui/cdk';\nimport {OperatorFunction, pipe} from 'rxjs';\nimport {distinctUntilChanged, map} from 'rxjs/operators';\n\n/**\n * Works like regular map + distinctUntilChanged\n * and only returns to NgZone if value has changed\n *\n * @param project mapping function\n * @param ngZone NgZone instance\n */\nexport function tuiZonefulMap<T, R>(\n    project: (value: T, index: number) => R,\n    ngZone: NgZone,\n): OperatorFunction<T, R> {\n    return pipe(map(project), distinctUntilChanged(), tuiZonefull(ngZone));\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":";;;;AAUA;;;AAGA;SACgB,WAAW,CACvB,iBAAgF,EAChF,uBAA+B,GAAG;IAElC,OAAO,MAAM,IACT,MAAM,CAAC,IAAI,CACP,YAAY,CAAC,oBAAoB,CAAC,EAClC,IAAI,CAAC,CAAC,gBAAgB,EAAE,OAAO;QAC3B,OAAO,gBAAgB,KAAK,EAAE,IAAI,OAAO,CAAC,UAAU,CAAC,gBAAgB,CAAC;cAChE,gBAAgB;cAChB,OAAO,CAAC;KACjB,EAAE,EAAE,CAAC,EACN,oBAAoB,EAAE,EACtB,SAAS,CAAC,KAAK,IAAI,iBAAiB,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,EAClE,SAAS,CAAC,WAAW,CAAC,CACzB,CAAC;AACV,CAAC;MAEY,cAAc,GAAG;;AC3B9B;;;;;;;SAOgB,aAAa,CACzB,OAAuC,EACvC,MAAc;IAEd,OAAO,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE,oBAAoB,EAAE,EAAE,WAAW,CAAC,MAAM,CAAC,CAAC,CAAC;AAC3E;;ACjBA;;;;;;"}