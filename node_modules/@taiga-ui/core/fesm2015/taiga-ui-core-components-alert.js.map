{"version":3,"file":"taiga-ui-core-components-alert.js","sources":["ng://@taiga-ui/core/components/alert/alert.component.ts","ng://@taiga-ui/core/components/alert/alert.service.ts","ng://@taiga-ui/core/components/alert/alert.module.ts","ng://@taiga-ui/core/components/alert/taiga-ui-core-components-alert.ts"],"sourcesContent":["import {AnimationOptions} from '@angular/animations';\nimport {\n    ChangeDetectionStrategy,\n    Component,\n    ElementRef,\n    HostBinding,\n    Inject,\n    OnInit,\n} from '@angular/core';\nimport {\n    isNumber,\n    TuiContextWithImplicit,\n    TuiDestroyService,\n    TuiDialog,\n    tuiPure,\n} from '@taiga-ui/cdk';\nimport {tuiFadeIn, tuiHeightCollapse, tuiSlideInRight} from '@taiga-ui/core/animations';\nimport {TuiNotification} from '@taiga-ui/core/enums';\nimport {TuiAlertOptions} from '@taiga-ui/core/interfaces';\nimport {\n    TUI_ANIMATION_OPTIONS,\n    TUI_NOTIFICATION_OPTIONS,\n    TuiNotificationDefaultOptions,\n} from '@taiga-ui/core/tokens';\nimport {POLYMORPHEUS_CONTEXT, PolymorpheusContent} from '@tinkoff/ng-polymorpheus';\nimport {fromEvent, timer} from 'rxjs';\nimport {repeatWhen, takeUntil} from 'rxjs/operators';\n\n// TODO: 3.0 Remove and start using TuiDialog<TuiAlertOptions<I>, O>\nexport interface TuiNotificationContentContext<O = void, I = undefined>\n    extends TuiContextWithImplicit<TuiNotification> {\n    label: PolymorpheusContent<TuiContextWithImplicit<TuiNotification>>;\n    data: I;\n    closeHook: () => void;\n    emitHook: (data: O) => void;\n    emitAndCloseHook: (data: O) => void;\n}\n\n// TODO: 3.0 Refactor according to new context by 3.0 and get rid of $any in template\n@Component({\n    selector: 'tui-alert',\n    templateUrl: './alert.template.html',\n    styleUrls: ['./alert.style.less'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    providers: [TuiDestroyService],\n    animations: [tuiFadeIn, tuiSlideInRight, tuiHeightCollapse],\n    host: {role: 'alert'},\n})\nexport class TuiAlertComponent<O, I> implements OnInit {\n    private readonly autoClose =\n        typeof this.item.autoClose === 'function'\n            ? this.item.autoClose(this.item.status)\n            : this.item.autoClose;\n\n    @HostBinding('@tuiFadeIn')\n    @HostBinding('@tuiSlideInRight')\n    @HostBinding('@tuiHeightCollapse')\n    readonly animation = {value: '', ...this.animationOptions} as const;\n\n    constructor(\n        @Inject(ElementRef) private readonly elementRef: ElementRef<HTMLElement>,\n        @Inject(TuiDestroyService) private readonly destroy$: TuiDestroyService,\n        @Inject(TUI_NOTIFICATION_OPTIONS)\n        private readonly options: TuiNotificationDefaultOptions,\n        @Inject(TUI_ANIMATION_OPTIONS)\n        private readonly animationOptions: AnimationOptions,\n        @Inject(POLYMORPHEUS_CONTEXT) readonly item: TuiDialog<TuiAlertOptions<I>, O>,\n    ) {}\n\n    ngOnInit(): void {\n        this.initAutoClose();\n    }\n\n    get context(): TuiNotificationContentContext<O, I> {\n        return this.calculateContext(this.item);\n    }\n\n    closeNotification(): void {\n        this.item.$implicit.complete();\n    }\n\n    @tuiPure\n    private calculateContext({\n        $implicit,\n        status,\n        data,\n        label,\n    }: TuiDialog<TuiAlertOptions<I>, O>): TuiNotificationContentContext<O, I> {\n        return {\n            $implicit: status,\n            data,\n            label,\n            closeHook: () => {\n                $implicit.complete();\n            },\n            emitHook: (data: O) => {\n                $implicit.next(data);\n            },\n            emitAndCloseHook: (data: O) => {\n                $implicit.next(data);\n                $implicit.complete();\n            },\n        };\n    }\n\n    private initAutoClose(): void {\n        if (!this.autoClose) {\n            return;\n        }\n\n        timer(\n            isNumber(this.autoClose) ? this.autoClose : this.options.defaultAutoCloseTime,\n        )\n            .pipe(\n                takeUntil(fromEvent(this.elementRef.nativeElement, 'mouseenter')),\n                // eslint-disable-next-line rxjs/no-ignored-notifier\n                repeatWhen(() => fromEvent(this.elementRef.nativeElement, 'mouseleave')),\n                takeUntil(this.destroy$),\n            )\n            .subscribe(() => this.closeNotification());\n    }\n}\n","import {Inject, Injectable} from '@angular/core';\nimport {AbstractTuiDialogService, TuiIdService} from '@taiga-ui/cdk';\nimport {\n    TuiAlertOptions,\n    TuiNotificationOptions,\n    TuiNotificationOptionsWithData,\n} from '@taiga-ui/core/interfaces';\nimport {TUI_NOTIFICATION_OPTIONS} from '@taiga-ui/core/tokens';\nimport {PolymorpheusComponent, PolymorpheusContent} from '@tinkoff/ng-polymorpheus';\nimport {Observable} from 'rxjs';\n\nimport {TuiAlertComponent, TuiNotificationContentContext} from './alert.component';\n\n@Injectable({providedIn: `root`})\nexport class TuiAlertService extends AbstractTuiDialogService<TuiAlertOptions<any>> {\n    protected readonly component = new PolymorpheusComponent(TuiAlertComponent);\n\n    constructor(\n        @Inject(TUI_NOTIFICATION_OPTIONS)\n        protected readonly defaultOptions: TuiAlertOptions<any>,\n        @Inject(TuiIdService) idService: TuiIdService,\n    ) {\n        super(idService);\n    }\n}\n\n/** @deprecated use {@link TuiAlertService} */\n@Injectable({providedIn: `root`})\nexport class TuiNotificationsService {\n    constructor(@Inject(TuiAlertService) private readonly alert: TuiAlertService) {}\n\n    show<O = void>(\n        content: PolymorpheusContent<TuiNotificationContentContext<O>>,\n    ): Observable<O>;\n    show<O = void>(\n        content: PolymorpheusContent<TuiNotificationContentContext<O>>,\n        options: TuiNotificationOptions,\n    ): Observable<O>;\n    show<O, I>(\n        content: PolymorpheusContent<TuiNotificationContentContext<O, I>>,\n        options: TuiNotificationOptionsWithData<I>,\n    ): Observable<O>;\n    show<O, I>(\n        content: PolymorpheusContent<TuiNotificationContentContext<O, I>>,\n        options: TuiNotificationOptions | TuiNotificationOptionsWithData<I> = {},\n    ): Observable<O> {\n        return this.alert.open(content as any, options) as unknown as Observable<O>;\n    }\n}\n","import {CommonModule} from '@angular/common';\nimport {NgModule} from '@angular/core';\nimport {TUI_ALERTS} from '@taiga-ui/cdk';\nimport {TuiNotificationModule} from '@taiga-ui/core/components/notification';\nimport {PolymorpheusModule} from '@tinkoff/ng-polymorpheus';\n\nimport {TuiAlertComponent} from './alert.component';\nimport {TuiAlertService} from './alert.service';\n\n@NgModule({\n    imports: [CommonModule, PolymorpheusModule, TuiNotificationModule],\n    declarations: [TuiAlertComponent],\n    exports: [TuiAlertComponent],\n    entryComponents: [TuiAlertComponent],\n    providers: [\n        {\n            provide: TUI_ALERTS,\n            useExisting: TuiAlertService,\n            multi: true,\n        },\n    ],\n})\nexport class TuiAlertModule {}\n\n/** @deprecated use {@link TuiAlertModule} */\n@NgModule({imports: [TuiAlertModule]})\nexport class TuiNotificationsModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}