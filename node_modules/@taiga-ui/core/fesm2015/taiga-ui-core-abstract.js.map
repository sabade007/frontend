{"version":3,"file":"taiga-ui-core-abstract.js","sources":["ng://@taiga-ui/core/abstract/abstract-dropdown.ts","ng://@taiga-ui/core/abstract/abstract-hint.ts","ng://@taiga-ui/core/abstract/abstract-hint-options.ts","ng://@taiga-ui/core/abstract/abstract-textfield-host.ts","ng://@taiga-ui/core/abstract/taiga-ui-core-abstract.ts"],"sourcesContent":["import {\n    AfterViewChecked,\n    ComponentFactoryResolver,\n    ComponentRef,\n    Directive,\n    ElementRef,\n    Injector,\n    Input,\n    OnDestroy,\n} from '@angular/core';\nimport {\n    TuiActiveZoneDirective,\n    tuiDefaultProp,\n    TuiNativeFocusableElement,\n    TuiPortalService,\n    tuiPure,\n} from '@taiga-ui/cdk';\nimport {TuiDropdownBoxComponent} from '@taiga-ui/core/components/dropdown-box';\nimport {DEFAULT_MAX_HEIGHT, DEFAULT_MIN_HEIGHT} from '@taiga-ui/core/constants';\nimport {TuiDropdown} from '@taiga-ui/core/interfaces';\nimport {\n    TuiDropdownWidthT,\n    TuiHorizontalDirection,\n    TuiVerticalDirection,\n} from '@taiga-ui/core/types';\nimport {checkFixedPosition} from '@taiga-ui/core/utils/dom';\nimport {PolymorpheusContent} from '@tinkoff/ng-polymorpheus';\nimport {Observable} from 'rxjs';\n\n// @bad TODO: Possibly refactor to make more abstract\n@Directive()\nexport abstract class AbstractTuiDropdown\n    implements TuiDropdown, AfterViewChecked, OnDestroy\n{\n    abstract refresh$: Observable<unknown>;\n\n    @Input(`tuiDropdownContent`)\n    @tuiDefaultProp()\n    content: PolymorpheusContent = ``;\n\n    @Input(`tuiDropdownHost`)\n    @tuiDefaultProp()\n    tuiDropdownHost: HTMLElement | TuiNativeFocusableElement | null = null;\n\n    @Input(`tuiDropdownMinHeight`)\n    @tuiDefaultProp()\n    minHeight = DEFAULT_MIN_HEIGHT;\n\n    @Input(`tuiDropdownMaxHeight`)\n    @tuiDefaultProp()\n    maxHeight = DEFAULT_MAX_HEIGHT;\n\n    @Input(`tuiDropdownAlign`)\n    @tuiDefaultProp()\n    align: TuiHorizontalDirection = `left`;\n\n    @Input(`tuiDropdownDirection`)\n    @tuiDefaultProp()\n    direction: TuiVerticalDirection | null = null;\n\n    @Input(`tuiDropdownSided`)\n    @tuiDefaultProp()\n    sided = false;\n\n    @Input(`tuiDropdownLimitWidth`)\n    @tuiDefaultProp()\n    limitMinWidth: TuiDropdownWidthT = `min`;\n\n    dropdownBoxRef: ComponentRef<TuiDropdownBoxComponent> | null = null;\n\n    protected constructor(\n        private readonly componentFactoryResolver: ComponentFactoryResolver,\n        private readonly injector: Injector,\n        private readonly portalService: TuiPortalService,\n        protected readonly elementRef: ElementRef<HTMLElement>,\n        readonly activeZone: TuiActiveZoneDirective | null,\n    ) {}\n\n    ngOnDestroy(): void {\n        this.closeDropdownBox();\n    }\n\n    ngAfterViewChecked(): void {\n        // @awful TODO: This is probably wrong to call both but in TuiHostedDropdown some changes do not propagate otherwise\n        if (this.dropdownBoxRef !== null) {\n            this.dropdownBoxRef.changeDetectorRef.detectChanges();\n            this.dropdownBoxRef.changeDetectorRef.markForCheck();\n        }\n    }\n\n    get clientRect(): ClientRect {\n        return this.elementRef.nativeElement.getBoundingClientRect();\n    }\n\n    get host(): HTMLElement | TuiNativeFocusableElement {\n        return this.tuiDropdownHost || this.elementRef.nativeElement;\n    }\n\n    @tuiPure\n    get fixed(): boolean {\n        return checkFixedPosition(this.elementRef.nativeElement);\n    }\n\n    @tuiPure\n    protected toggleDropdown(value: boolean): void {\n        if (value) {\n            this.openDropdownBox();\n        } else {\n            this.closeDropdownBox();\n        }\n    }\n\n    protected openDropdownBox(): void {\n        if (this.dropdownBoxRef !== null) {\n            return;\n        }\n\n        const componentFactory = this.componentFactoryResolver.resolveComponentFactory(\n            TuiDropdownBoxComponent,\n        );\n\n        this.dropdownBoxRef = this.portalService.add(componentFactory, this.injector);\n        this.dropdownBoxRef.changeDetectorRef.detectChanges();\n    }\n\n    protected closeDropdownBox(): void {\n        if (this.dropdownBoxRef === null) {\n            return;\n        }\n\n        this.portalService.remove(this.dropdownBoxRef);\n        this.dropdownBoxRef = null;\n    }\n}\n","import {Directive, ElementRef, Input, OnDestroy} from '@angular/core';\nimport {TuiActiveZoneDirective, tuiDefaultProp} from '@taiga-ui/cdk';\nimport {TuiHintService} from '@taiga-ui/core/services';\nimport {PolymorpheusContent} from '@tinkoff/ng-polymorpheus';\n\nimport {TuiAbstractHintOptions} from './abstract-hint-options';\n\n@Directive()\nexport abstract class AbstractTuiHint implements OnDestroy {\n    @Input(`tuiHintMode`)\n    @tuiDefaultProp()\n    mode: TuiAbstractHintOptions['mode'] = this.options.mode;\n\n    @Input(`tuiHintDirection`)\n    @tuiDefaultProp()\n    direction: TuiAbstractHintOptions['direction'] = this.options.direction;\n\n    content: PolymorpheusContent = ``;\n\n    protected constructor(\n        protected readonly elementRef: ElementRef<HTMLElement>,\n        protected readonly hintService: TuiHintService,\n        readonly activeZone: TuiActiveZoneDirective | null,\n        protected readonly options: TuiAbstractHintOptions,\n    ) {}\n\n    abstract getElementClientRect(): ClientRect;\n\n    ngOnDestroy(): void {\n        this.hideTooltip();\n    }\n\n    protected showTooltip(): void {\n        this.hintService.add(this);\n    }\n\n    protected hideTooltip(): void {\n        this.hintService.remove(this);\n    }\n}\n","import {TuiDirection, TuiHintModeT} from '@taiga-ui/core/types';\n\nexport interface TuiAbstractHintOptions {\n    readonly mode: TuiHintModeT | null;\n    readonly direction: TuiDirection;\n}\n\n/** Default values for abstract hint options */\nexport const TUI_ABSTRACT_HINT_DEFAULT_OPTIONS: TuiAbstractHintOptions = {\n    mode: null,\n    direction: `bottom-left`,\n};\n","import {Directive, Inject} from '@angular/core';\nimport {AbstractTuiControl} from '@taiga-ui/cdk';\nimport {TuiTextfieldHost} from '@taiga-ui/core/interfaces';\n\n// @dynamic\n@Directive()\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport abstract class TuiAbstractTextfieldHost<T extends AbstractTuiControl<any>>\n    implements TuiTextfieldHost\n{\n    constructor(@Inject(AbstractTuiControl) protected readonly host: T) {}\n\n    get readOnly(): boolean {\n        return this.host.readOnly;\n    }\n\n    get disabled(): boolean {\n        return this.host.computedDisabled;\n    }\n\n    get invalid(): boolean {\n        return this.host.computedInvalid;\n    }\n\n    get focusable(): boolean {\n        return this.host.computedFocusable;\n    }\n\n    get value(): string {\n        return String(this.host.value);\n    }\n\n    abstract onValueChange(value: string): void;\n\n    process(_input: HTMLInputElement): void {}\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}