import { ElementRef, Optional } from '@angular/core';
import { TuiModeDirective } from '@taiga-ui/core/directives/mode';
import { TUI_MODE } from '@taiga-ui/core/tokens';
import { of } from 'rxjs';
import { map, startWith } from 'rxjs/operators';
/**
 * @deprecated: use {@link tuiModeFactory} instead
 */
// eslint-disable-next-line @typescript-eslint/naming-convention
export function modeFactory(mode, { nativeElement }) {
    const mode$ = mode
        ? mode.change$.pipe(startWith(null), map(() => mode.mode))
        : of(null);
    nativeElement[`$.data-mode.attr`] = mode$;
    return mode$;
}
export const MODE_PROVIDER = {
    provide: TUI_MODE,
    deps: [[new Optional(), TuiModeDirective], ElementRef],
    useFactory: modeFactory,
};
export const tuiModeFactory = modeFactory;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kZS5wcm92aWRlci5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0B0YWlnYS11aS9jb3JlL3Byb3ZpZGVycy8iLCJzb3VyY2VzIjpbIm1vZGUucHJvdmlkZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFDLFVBQVUsRUFBRSxRQUFRLEVBQVcsTUFBTSxlQUFlLENBQUM7QUFDN0QsT0FBTyxFQUFDLGdCQUFnQixFQUFDLE1BQU0sZ0NBQWdDLENBQUM7QUFDaEUsT0FBTyxFQUFDLFFBQVEsRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBRS9DLE9BQU8sRUFBYSxFQUFFLEVBQUMsTUFBTSxNQUFNLENBQUM7QUFDcEMsT0FBTyxFQUFDLEdBQUcsRUFBRSxTQUFTLEVBQUMsTUFBTSxnQkFBZ0IsQ0FBQztBQUU5Qzs7R0FFRztBQUNILGdFQUFnRTtBQUNoRSxNQUFNLFVBQVUsV0FBVyxDQUN2QixJQUE2QixFQUM3QixFQUFDLGFBQWEsRUFBYTtJQUUzQixNQUFNLEtBQUssR0FBRyxJQUFJO1FBQ2QsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUNiLFNBQVMsQ0FBQyxJQUFJLENBQUMsRUFDZixHQUFHLENBQUMsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUN2QjtRQUNILENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUM7SUFFZixhQUFhLENBQUMsa0JBQWtCLENBQUMsR0FBRyxLQUFLLENBQUM7SUFFMUMsT0FBTyxLQUFLLENBQUM7QUFDakIsQ0FBQztBQUVELE1BQU0sQ0FBQyxNQUFNLGFBQWEsR0FBYTtJQUNuQyxPQUFPLEVBQUUsUUFBUTtJQUNqQixJQUFJLEVBQUUsQ0FBQyxDQUFDLElBQUksUUFBUSxFQUFFLEVBQUUsZ0JBQWdCLENBQUMsRUFBRSxVQUFVLENBQUM7SUFDdEQsVUFBVSxFQUFFLFdBQVc7Q0FDMUIsQ0FBQztBQUVGLE1BQU0sQ0FBQyxNQUFNLGNBQWMsR0FBRyxXQUFXLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0VsZW1lbnRSZWYsIE9wdGlvbmFsLCBQcm92aWRlcn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge1R1aU1vZGVEaXJlY3RpdmV9IGZyb20gJ0B0YWlnYS11aS9jb3JlL2RpcmVjdGl2ZXMvbW9kZSc7XG5pbXBvcnQge1RVSV9NT0RFfSBmcm9tICdAdGFpZ2EtdWkvY29yZS90b2tlbnMnO1xuaW1wb3J0IHtUdWlCcmlnaHRuZXNzfSBmcm9tICdAdGFpZ2EtdWkvY29yZS90eXBlcyc7XG5pbXBvcnQge09ic2VydmFibGUsIG9mfSBmcm9tICdyeGpzJztcbmltcG9ydCB7bWFwLCBzdGFydFdpdGh9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcblxuLyoqXG4gKiBAZGVwcmVjYXRlZDogdXNlIHtAbGluayB0dWlNb2RlRmFjdG9yeX0gaW5zdGVhZFxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uXG5leHBvcnQgZnVuY3Rpb24gbW9kZUZhY3RvcnkoXG4gICAgbW9kZTogVHVpTW9kZURpcmVjdGl2ZSB8IG51bGwsXG4gICAge25hdGl2ZUVsZW1lbnR9OiBFbGVtZW50UmVmLFxuKTogT2JzZXJ2YWJsZTxUdWlCcmlnaHRuZXNzIHwgbnVsbD4ge1xuICAgIGNvbnN0IG1vZGUkID0gbW9kZVxuICAgICAgICA/IG1vZGUuY2hhbmdlJC5waXBlKFxuICAgICAgICAgICAgICBzdGFydFdpdGgobnVsbCksXG4gICAgICAgICAgICAgIG1hcCgoKSA9PiBtb2RlLm1vZGUpLFxuICAgICAgICAgIClcbiAgICAgICAgOiBvZihudWxsKTtcblxuICAgIG5hdGl2ZUVsZW1lbnRbYCQuZGF0YS1tb2RlLmF0dHJgXSA9IG1vZGUkO1xuXG4gICAgcmV0dXJuIG1vZGUkO1xufVxuXG5leHBvcnQgY29uc3QgTU9ERV9QUk9WSURFUjogUHJvdmlkZXIgPSB7XG4gICAgcHJvdmlkZTogVFVJX01PREUsXG4gICAgZGVwczogW1tuZXcgT3B0aW9uYWwoKSwgVHVpTW9kZURpcmVjdGl2ZV0sIEVsZW1lbnRSZWZdLFxuICAgIHVzZUZhY3Rvcnk6IG1vZGVGYWN0b3J5LFxufTtcblxuZXhwb3J0IGNvbnN0IHR1aU1vZGVGYWN0b3J5ID0gbW9kZUZhY3Rvcnk7XG4iXX0=