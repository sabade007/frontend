!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@taiga-ui/cdk"),require("@taiga-ui/core/constants"),require("@taiga-ui/core/tokens"),require("rxjs"),require("@angular/common"),require("@taiga-ui/core/directives/color"),require("@taiga-ui/core/pipes")):"function"==typeof define&&define.amd?define("@taiga-ui/core/components/primitive-calendar",["exports","@angular/core","@taiga-ui/cdk","@taiga-ui/core/constants","@taiga-ui/core/tokens","rxjs","@angular/common","@taiga-ui/core/directives/color","@taiga-ui/core/pipes"],t):t(((e=e||self)["taiga-ui"]=e["taiga-ui"]||{},e["taiga-ui"].core=e["taiga-ui"].core||{},e["taiga-ui"].core.components=e["taiga-ui"].core.components||{},e["taiga-ui"].core.components["primitive-calendar"]={}),e.ng.core,e.cdk,e["taiga-ui"].core.constants,e["taiga-ui"].core.tokens,e.rxjs,e.ng.common,e["taiga-ui"].core.directives.color,e["taiga-ui"].core.pipes)}(this,(function(e,t,r,a,i,n,o,l,d){"use strict";function s(e,t,r,a){var i,n=arguments.length,o=n<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(o=(n<3?i(o):n>3?i(t,r,o):i(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o}Object.create;Object.create;var u=function(){function e(e){var i=this;this.weekDays$=e,this.pressedItem=null,this.today=r.TuiDay.currentLocal(),this.month=r.TuiMonth.currentLocal(),this.disabledItemHandler=r.ALWAYS_FALSE_HANDLER,this.markerHandler=a.TUI_DEFAULT_MARKER_HANDLER,this.value=null,this.hoveredItem=null,this.showAdjacent=!0,this.hoveredItemChange=new t.EventEmitter,this.dayClick=new t.EventEmitter,this.toMarkers=function(e,t,r){if(t||r)return null;var a=i.markerHandler(e);return 0===a.length?null:a}}var o,l;return Object.defineProperty(e.prototype,"isSingle",{get:function(){return null!==this.value&&(this.value instanceof r.TuiDay||this.value.isSingleDay)},enumerable:!0,configurable:!0}),e.prototype.getItemState=function(e){var t=this.disabledItemHandler,r=this.pressedItem,a=this.hoveredItem;return t(e)?"disabled":(null==r?void 0:r.daySame(e))?"pressed":(null==a?void 0:a.daySame(e))?"hovered":null},e.prototype.getItemRange=function(e){var t=this.value,a=this.hoveredItem;return t?t instanceof r.TuiDay?t.daySame(e)?"single":null:t.from.daySame(e)&&!t.isSingleDay||(null==a?void 0:a.dayAfter(t.from))&&t.from.daySame(e)&&t.isSingleDay||(null==a?void 0:a.daySame(e))&&a.dayBefore(t.from)&&t.isSingleDay?"start":t.to.daySame(e)&&!t.isSingleDay||(null==a?void 0:a.dayBefore(t.from))&&t.from.daySame(e)&&t.isSingleDay||(null==a?void 0:a.daySame(e))&&a.dayAfter(t.from)&&t.isSingleDay?"end":t.isSingleDay&&t.from.daySame(e)?"single":null:null},e.prototype.itemIsToday=function(e){return this.today.daySame(e)},e.prototype.itemIsUnavailable=function(e){return!this.month.monthSame(e)},e.prototype.itemIsInterval=function(e){var t=this.value,a=this.hoveredItem;if(null===t||t instanceof r.TuiDay)return!1;if(!t.isSingleDay)return t.from.daySameOrBefore(e)&&t.to.dayAfter(e);if(null===a)return!1;var i=r.TuiDayRange.sort(t.from,a);return i.from.daySameOrBefore(e)&&i.to.dayAfter(e)},e.prototype.onItemHovered=function(e){this.updateHoveredItem(e||null)},e.prototype.onItemPressed=function(e){this.pressedItem=e||null},e.prototype.onItemClick=function(e){this.dayClick.emit(e)},e.prototype.updateHoveredItem=function(e){r.nullableSame(this.hoveredItem,e,(function(e,t){return e.daySame(t)}))||(this.hoveredItem=e,this.hoveredItemChange.emit(e))},e.ctorParameters=function(){return[{type:n.Observable,decorators:[{type:t.Inject,args:[i.TUI_ORDERED_SHORT_WEEK_DAYS]}]}]},s([t.Input(),r.tuiDefaultProp()],e.prototype,"month",void 0),s([t.Input(),r.tuiDefaultProp()],e.prototype,"disabledItemHandler",void 0),s([t.Input(),r.tuiDefaultProp()],e.prototype,"markerHandler",void 0),s([t.Input(),r.tuiDefaultProp()],e.prototype,"value",void 0),s([t.Input(),r.tuiDefaultProp()],e.prototype,"hoveredItem",void 0),s([t.Input(),r.tuiDefaultProp()],e.prototype,"showAdjacent",void 0),s([t.Output()],e.prototype,"hoveredItemChange",void 0),s([t.Output()],e.prototype,"dayClick",void 0),s([t.HostBinding("class._single")],e.prototype,"isSingle",null),e=s([t.Component({selector:"tui-primitive-calendar",template:'<div class="t-row t-row_weekday">\n    <div\n        *ngFor="let day of weekDays$ | async"\n        class="t-cell"\n        [textContent]="day"\n    ></div>\n</div>\n<div *tuiLet="month | tuiCalendarSheet: true as sheet">\n    <div\n        *tuiRepeatTimes="let rowIndex of sheet.length"\n        automation-id="tui-primitive-calendar__row"\n        class="t-row"\n    >\n        <ng-container *tuiRepeatTimes="let colIndex of sheet[rowIndex].length">\n            <ng-container *tuiLet="sheet[rowIndex][colIndex] as item">\n                <div\n                    *ngIf="!itemIsUnavailable(item) || showAdjacent"\n                    automation-id="tui-primitive-calendar__cell"\n                    class="t-cell"\n                    [class.t-cell_weekend]="item.isWeekend"\n                    [class.t-cell_today]="itemIsToday(item)"\n                    [class.t-cell_interval]="itemIsInterval(item)"\n                    [attr.data-range]="getItemRange(item)"\n                    [attr.data-state]="getItemState(item)"\n                    (tuiHoveredChange)="onItemHovered($event && item)"\n                    (tuiPressedChange)="onItemPressed($event && item)"\n                    (click)="onItemClick(item)"\n                >\n                    <div\n                        automation-id="tui-primitive-calendar__item"\n                        class="t-item"\n                        [class.t-item_unavailable]="itemIsUnavailable(item)"\n                    >\n                        {{ item.day }}\n                        <div\n                            *ngIf="item | tuiMapper: toMarkers:itemIsToday(item):!!getItemRange(item) as markers"\n                            class="t-dots"\n                        >\n                            <div\n                                class="t-dot"\n                                [tuiBackground]="markers[0]"\n                            ></div>\n                            <div\n                                *ngIf="markers.length > 1"\n                                class="t-dot"\n                                [tuiBackground]="markers[1] || \'\'"\n                            ></div>\n                        </div>\n                    </div>\n                </div>\n            </ng-container>\n        </ng-container>\n    </div>\n</div>\n',changeDetection:t.ChangeDetectionStrategy.OnPush,styles:[":host{display:block;font:var(--tui-font-text-m)}.t-row{position:relative;z-index:0;display:flex;justify-content:space-between;height:2.25rem}.t-item{position:relative;flex:1;line-height:2rem;border-radius:var(--tui-radius-m)}.t-item:after,.t-item:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell{position:relative;display:flex;align-items:center;justify-content:center;width:2.25rem;text-align:center;outline:0;cursor:pointer;background-clip:content-box;box-sizing:border-box;border:2px solid transparent}.t-cell:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell_today:after{position:absolute;left:50%;transform:translate(-50%,0);content:'';bottom:.3125rem;height:.125rem;width:.75rem;border-radius:.375rem;background-color:var(--tui-text-02)}.t-cell_interval:before{background:var(--tui-base-02)}:host._single .t-cell_interval:before{background:var(--tui-secondary-hover)}.t-cell_interval:not(:last-child):before{right:-2.25rem}.t-cell_interval:last-child:first-child:before{right:0}.t-cell_interval:first-child>.t-item{border-top-left-radius:var(--tui-radius-m);border-bottom-left-radius:var(--tui-radius-m)}.t-cell_interval:last-child>.t-item{border-top-right-radius:var(--tui-radius-m);border-bottom-right-radius:var(--tui-radius-m)}.t-cell_interval>.t-item{border-radius:0}.t-cell[data-range]:after{background-color:var(--tui-primary-text)}.t-cell[data-range]>.t-item{color:var(--tui-primary-text)}.t-cell[data-range]>.t-item:after,.t-cell[data-range]>.t-item:before{background-color:var(--tui-primary)}.t-cell[data-range][data-state=hovered]>.t-item:after,.t-cell[data-range][data-state=hovered]>.t-item:before{background-color:var(--tui-primary-hover)}.t-cell[data-range][data-state=pressed]>.t-item:after,.t-cell[data-range][data-state=pressed]>.t-item:before{background-color:var(--tui-primary-active)}.t-cell[data-range=end]>.t-item:before{left:.25rem}.t-cell[data-range=end]>.t-item:after{left:-2rem;right:100%;transform:translateX(1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-range=start]>.t-item:before{right:.25rem}.t-cell[data-range=start]>.t-item:after{left:100%;right:-2rem;transform:translateX(-1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-state=disabled]{pointer-events:none}.t-cell[data-state=disabled]>.t-item{opacity:.36}.t-cell[data-state=hovered]:hover:not([data-range])>.t-item{background-color:var(--tui-secondary-hover)}.t-cell[data-state=pressed]:hover:not([data-range])>.t-item{background-color:var(--tui-secondary-active)}:host{width:15.75rem}.t-row{justify-content:flex-start}.t-row:first-child{justify-content:flex-end}.t-row_weekday{font:var(--tui-font-text-s);color:var(--tui-text-02);pointer-events:none}.t-item{display:flex;flex-direction:column}.t-cell_weekend{color:var(--tui-negative)}.t-item_unavailable{opacity:var(--tui-disabled-opacity)}.t-dots{display:flex;justify-content:center;margin-top:-.5rem;padding-bottom:.25rem}.t-dot{display:inline-block;width:.25rem;height:.25rem;border-radius:100%;margin:0 .0625rem}"]}),(o=0,l=t.Inject(i.TUI_ORDERED_SHORT_WEEK_DAYS),function(e,t){l(e,t,o)})],e)}(),c=function(){function e(){}return e=s([t.NgModule({imports:[o.CommonModule,r.TuiLetModule,r.TuiMapperPipeModule,r.TuiRepeatTimesModule,r.TuiHoveredModule,r.TuiPressedModule,l.TuiColorModule,d.TuiCalendarSheetPipeModule],declarations:[u],exports:[u]})],e)}();e.TuiPrimitiveCalendarComponent=u,e.TuiPrimitiveCalendarModule=c,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=taiga-ui-core-components-primitive-calendar.umd.min.js.map