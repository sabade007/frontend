!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/core"),require("@angular/platform-browser"),require("@ng-web-apis/common"),require("@taiga-ui/cdk"),require("@taiga-ui/core/constants"),require("@taiga-ui/core/services"),require("@taiga-ui/core/tokens"),require("@taiga-ui/core/utils/miscellaneous"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@taiga-ui/core/components/svg",["exports","@angular/common","@angular/core","@angular/platform-browser","@ng-web-apis/common","@taiga-ui/cdk","@taiga-ui/core/constants","@taiga-ui/core/services","@taiga-ui/core/tokens","@taiga-ui/core/utils/miscellaneous","rxjs","rxjs/operators"],t):t(((e=e||self)["taiga-ui"]=e["taiga-ui"]||{},e["taiga-ui"].core=e["taiga-ui"].core||{},e["taiga-ui"].core.components=e["taiga-ui"].core.components||{},e["taiga-ui"].core.components.svg={}),e.ng.common,e.ng.core,e.ng.platformBrowser,e.common$1,e.cdk,e["taiga-ui"].core.constants,e["taiga-ui"].core.services,e["taiga-ui"].core.tokens,e["taiga-ui"].core.utils.miscellaneous,e.rxjs,e.rxjs.operators)}(this,(function(e,t,i,r,n,o,s,c,a,u,l,p){"use strict";function g(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s}function h(e,t){return function(i,r){t(i,r,e)}}Object.create;Object.create;var f=function(){function e(e,t,i,r,n,s,c,a,u,g,h){var f=this;this.documentRef=e,this.windowRef=t,this.iconsPath=i,this.tuiSanitizer=r,this.svgService=n,this.staticRequestService=s,this.sanitizer=c,this.elementRef=a,this.userAgent=u,this.srcProcessor=g,this.contentProcessor=h,this.src$=new l.ReplaySubject(1),this.isIE=o.isIE(this.userAgent),this.icon="",this.innerHTML$=this.src$.pipe(p.switchMap((function(){return f.isExternal?f.getExternalIcon(f.icon):l.of(f.getSafeHtml(f.icon))})),p.startWith(""))}return Object.defineProperty(e.prototype,"src",{get:function(){return this.icon},set:function(e){this.icon=this.srcProcessor(e),this.src$.next()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"use",{get:function(){return this.icon.includes(".svg#")?this.icon:this.resolveName(this.icon,this.iconsPath)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInnerHTML",{get:function(){return this.isSrc||this.isExternal||this.isName&&this.isShadowDOM},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isShadowDOM",{get:function(){return o.getDocumentOrShadowRoot(this.elementRef.nativeElement)!==this.documentRef},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isUse",{get:function(){return this.use.includes(".svg#")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isExternal",{get:function(){return this.isUrl||this.isIE&&this.isUse||this.isCrossDomain},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isUrl",{get:function(){return this.icon.endsWith(".svg")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSrc",{get:function(){return u.isPresumedHTMLString(this.icon)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isName",{get:function(){return!this.isUrl&&!this.isUse&&!this.isSrc},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCrossDomain",{get:function(){var e=this.use,t=this.isUse,i=this.windowRef;return t&&e.startsWith("http")&&!!i.origin&&!e.startsWith(i.origin)},enumerable:!0,configurable:!0}),e.prototype.onError=function(e){void 0===e&&(e="External icon is missing on the given URL");var t=this.icon,i=o.tuiCustomEvent(s.TUI_ICON_ERROR,{bubbles:!0,detail:{message:e,icon:t}},this.documentRef);o.tuiAssert.assert(!1,e,t),this.elementRef.nativeElement.dispatchEvent(i)},e.prototype.resolveName=function(e,t){return t(e)},e.prototype.getSafeHtml=function(e){return this.isSrc?this.sanitize(e):this.process(e)},e.prototype.process=function(e){var t=this.svgService.getOriginal(e);return this.isName&&!t&&e&&this.onError("Attempted to use undefined named icon"),this.isShadowDOM&&this.isName?this.sanitize(t||""):""},e.prototype.sanitize=function(e){return e=this.contentProcessor(e),this.tuiSanitizer?this.sanitizer.bypassSecurityTrustHtml(this.tuiSanitizer.sanitize(i.SecurityContext.HTML,e)||""):e},e.prototype.getExternalIcon=function(e){var t=this,i=e.includes(".svg")?e:this.use;return this.staticRequestService.request(i).pipe(p.catchError((function(){return t.onError("Failed to load external SVG"),l.of("")})),p.map((function(e){return t.sanitize(e.replace("<svg",'<svg focusable="false"'))})))},e.ctorParameters=function(){return[{type:Document,decorators:[{type:i.Inject,args:[t.DOCUMENT]}]},{type:Window,decorators:[{type:i.Inject,args:[n.WINDOW]}]},{type:void 0,decorators:[{type:i.Inject,args:[a.TUI_ICONS_PATH]}]},{type:i.Sanitizer,decorators:[{type:i.Optional},{type:i.Inject,args:[a.TUI_SANITIZER]}]},{type:c.TuiSvgService,decorators:[{type:i.Inject,args:[c.TuiSvgService]}]},{type:o.TuiStaticRequestService,decorators:[{type:i.Inject,args:[o.TuiStaticRequestService]}]},{type:r.DomSanitizer,decorators:[{type:i.Inject,args:[r.DomSanitizer]}]},{type:i.ElementRef,decorators:[{type:i.Inject,args:[i.ElementRef]}]},{type:String,decorators:[{type:i.Inject,args:[n.USER_AGENT]}]},{type:void 0,decorators:[{type:i.Inject,args:[a.TUI_SVG_SRC_PROCESSOR]}]},{type:void 0,decorators:[{type:i.Inject,args:[a.TUI_SVG_CONTENT_PROCESSOR]}]}]},g([i.Input(),o.tuiRequiredSetter()],e.prototype,"src",null),g([o.tuiPure],e.prototype,"resolveName",null),e=g([i.Component({selector:"tui-svg",template:'<ng-container *tuiLet="innerHTML$ | async as innerHTML">\n    <div\n        *ngIf="isInnerHTML; else useTemplate"\n        class="t-src"\n        [innerHTML]="innerHTML"\n    ></div>\n    <ng-template #useTemplate>\n        <svg\n            version="1.1"\n            xmlns="http://www.w3.org/2000/svg"\n            xmlns:xlink="http://www.w3.org/1999/xlink"\n            focusable="false"\n            width="100%"\n            height="100%"\n            (error)="onError()"\n        >\n            <use [attr.xlink:href]="use"></use>\n        </svg>\n    </ng-template>\n</ng-container>\n',changeDetection:i.ChangeDetectionStrategy.OnPush,styles:[":host{display:inline-block;vertical-align:middle;flex-shrink:0;line-height:0;height:1.5rem;width:1.5rem;fill:currentColor;font-size:1rem}.t-src{display:flex;height:100%;align-items:center;justify-content:center}"]}),h(0,i.Inject(t.DOCUMENT)),h(1,i.Inject(n.WINDOW)),h(2,i.Inject(a.TUI_ICONS_PATH)),h(3,i.Optional()),h(3,i.Inject(a.TUI_SANITIZER)),h(4,i.Inject(c.TuiSvgService)),h(5,i.Inject(o.TuiStaticRequestService)),h(6,i.Inject(r.DomSanitizer)),h(7,i.Inject(i.ElementRef)),h(8,i.Inject(n.USER_AGENT)),h(9,i.Inject(a.TUI_SVG_SRC_PROCESSOR)),h(10,i.Inject(a.TUI_SVG_CONTENT_PROCESSOR))],e)}(),m=function(){function e(){}return e=g([i.NgModule({imports:[t.CommonModule,o.TuiLetModule],declarations:[f],exports:[f]})],e)}();e.TuiSvgComponent=f,e.TuiSvgModule=m,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=taiga-ui-core-components-svg.umd.min.js.map