!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@ng-web-apis/common"),require("@taiga-ui/cdk"),require("@taiga-ui/core/animations"),require("@taiga-ui/core/providers"),require("@taiga-ui/core/tokens"),require("rxjs"),require("rxjs/operators"),require("@angular/common")):"function"==typeof define&&define.amd?define("@taiga-ui/core/components/scroll-controls",["exports","@angular/core","@ng-web-apis/common","@taiga-ui/cdk","@taiga-ui/core/animations","@taiga-ui/core/providers","@taiga-ui/core/tokens","rxjs","rxjs/operators","@angular/common"],e):e(((t=t||self)["taiga-ui"]=t["taiga-ui"]||{},t["taiga-ui"].core=t["taiga-ui"].core||{},t["taiga-ui"].core.components=t["taiga-ui"].core.components||{},t["taiga-ui"].core.components["scroll-controls"]={}),t.ng.core,t.common,t.cdk,t["taiga-ui"].core.animations,t["taiga-ui"].core.providers,t["taiga-ui"].core.tokens,t.rxjs,t.rxjs.operators,t.ng.common)}(this,(function(t,e,r,i,n,o,a,c,l,s){"use strict";var u=function(){return(u=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};function p(t,e,r,i){var n,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(a=(o<3?n(a):o>3?n(e,r,a):n(e,r))||a);return o>3&&a&&Object.defineProperty(e,r,a),a}function h(t,e){return function(r,i){e(r,i,t)}}Object.create;function m(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var i,n,o=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(t){n={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return a}Object.create;var d=function(){function t(t,e,r,n,o){var a=this;this.options=t,this.ngZone=e,this.scrollRef=r,this.animationFrame$=n,this.mode$=o,this.refresh$=this.animationFrame$.pipe(l.throttleTime(300),l.map((function(){return a.scrollbars})),l.startWith([!1,!1]),l.distinctUntilChanged((function(t,e){return t[0]===e[0]&&t[1]===e[1]})),i.tuiZoneOptimized(this.ngZone)),this.animation=u({value:""},this.options)}return Object.defineProperty(t.prototype,"scrollbars",{get:function(){var t=this.scrollRef.nativeElement,e=t.clientHeight,r=t.scrollHeight,i=t.clientWidth,n=t.scrollWidth;return[Math.ceil(e/r*100)<100,Math.ceil(i/n*100)<100]},enumerable:!0,configurable:!0}),t.ctorParameters=function(){return[{type:void 0,decorators:[{type:e.Inject,args:[a.TUI_ANIMATION_OPTIONS]}]},{type:e.NgZone,decorators:[{type:e.Inject,args:[e.NgZone]}]},{type:e.ElementRef,decorators:[{type:e.Inject,args:[a.TUI_SCROLL_REF]}]},{type:c.Observable,decorators:[{type:e.Inject,args:[r.ANIMATION_FRAME]}]},{type:c.Observable,decorators:[{type:e.Inject,args:[a.TUI_MODE]}]}]},t=p([e.Component({selector:"tui-scroll-controls",template:'<ng-container *tuiLet="refresh$ | async as bars">\n    <div\n        *ngIf="bars[0]"\n        tuiScrollbarWrapper\n        class="t-bar t-bar_vertical"\n        [@tuiFadeIn]="animation"\n        [class.t-bar_has-horizontal]="bars[1]"\n    >\n        <div\n            tuiScrollbar="vertical"\n            class="t-thumb"\n        ></div>\n    </div>\n    <div\n        *ngIf="bars[1]"\n        tuiScrollbarWrapper\n        class="t-bar t-bar_horizontal"\n        [@tuiFadeIn]="animation"\n        [class.t-bar_has-vertical]="bars[0]"\n    >\n        <div\n            tuiScrollbar="horizontal"\n            class="t-thumb"\n        ></div>\n    </div>\n</ng-container>\n',changeDetection:e.ChangeDetectionStrategy.OnPush,animations:[n.tuiFadeIn],providers:[o.MODE_PROVIDER],host:{"($.data-mode.attr)":"mode$"},styles:[":host{position:-webkit-sticky;position:sticky;top:0;left:0;z-index:1;min-width:calc(100% - 1px);min-height:calc(100% - 1px);max-width:calc(100% - 1px);max-height:calc(100% - 1px);float:left;margin-right:calc(-100% + 1px);-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:calc(-100% + 1px);margin-inline-end:calc(-100% + 1px);pointer-events:none}.t-bar{position:absolute;right:0;bottom:0;pointer-events:auto}.t-bar_vertical{top:0;width:.875rem}.t-bar_horizontal{left:0;height:.875rem}.t-bar_has-horizontal{bottom:.5rem}.t-bar_has-vertical{right:.5rem}.t-thumb{transition-duration:.15s;transition-timing-function:ease-in-out;position:absolute;border-radius:6.25rem;border:.25rem solid transparent;cursor:pointer;pointer-events:auto;background:var(--tui-text-01);background-clip:content-box;box-sizing:border-box;transition-property:width,height;opacity:.2}.t-thumb:hover{opacity:.24}.t-thumb:active{opacity:.48}:host[data-mode=onDark] .t-thumb{background-color:var(--tui-text-01-night)}.t-bar_vertical .t-thumb{right:0;width:.75rem;min-height:1.25rem}.t-bar_vertical .t-thumb:active,.t-bar_vertical:hover .t-thumb{width:.875rem}.t-bar_horizontal .t-thumb{bottom:0;height:.75rem;min-width:1.25rem}.t-bar_horizontal .t-thumb:active,.t-bar_horizontal:hover .t-thumb{height:.875rem}"]}),h(0,e.Inject(a.TUI_ANIMATION_OPTIONS)),h(1,e.Inject(e.NgZone)),h(2,e.Inject(a.TUI_SCROLL_REF)),h(3,e.Inject(r.ANIMATION_FRAME)),h(4,e.Inject(a.TUI_MODE))],t)}(),g=function(){function t(t,e,r,n,o,a,s,u){var p=this;this.wrapper=o,this.container=a,this.doc=s,this.el=u,this.tuiScrollbar="vertical";var h=this.el.nativeElement,d=i.tuiTypedFromEvent(h,"mousedown"),g=i.tuiTypedFromEvent(this.doc,"mousemove"),b=i.tuiTypedFromEvent(this.doc,"mouseup"),f=i.tuiTypedFromEvent(this.wrapper.nativeElement,"mousedown");c.merge(f.pipe(i.tuiPreventDefault(),l.map((function(t){return p.getScrolled(t,.5,.5)}))),d.pipe(i.tuiPreventDefault(),i.tuiStopPropagation(),l.switchMap((function(t){var e,r,i,n,o=h.getBoundingClientRect(),a=(e=o,r=t.clientY,i=e.top,n=e.height,(r-i)/n),c=function(t,e){var r=t.clientX,i=e.left,n=e.width;return(r-i)/n}(t,o);return g.pipe(l.map((function(t){return p.getScrolled(t,a,c)})),l.takeUntil(b))})))).pipe(i.tuiZonefree(t),l.takeUntil(r)).subscribe((function(t){var r=m(t,2),i=r[0],n=r[1];"vertical"===p.tuiScrollbar?e.setProperty(p.element,"scrollTop",i):e.setProperty(p.element,"scrollLeft",n)})),c.merge(n.pipe(l.throttleTime(i.POLLING_TIME)),i.tuiScrollFrom(this.element)).pipe(i.tuiZonefree(t),l.takeUntil(r)).subscribe((function(){"vertical"===p.tuiScrollbar?(e.setStyle(h,"top",100*p.thumb+"%"),e.setStyle(h,"height",100*p.view+"%")):(e.setStyle(h,"left",100*p.thumb+"%"),e.setStyle(h,"width",100*p.view+"%"))}))}return Object.defineProperty(t.prototype,"scrolled",{get:function(){var t=this.element,e=t.scrollTop,r=t.scrollHeight,i=t.clientHeight,n=t.scrollLeft,o=t.scrollWidth,a=t.clientWidth;return"vertical"===this.tuiScrollbar?e/(r-i):n/(o-a)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"compensation",{get:function(){var t=this.element,e=t.clientHeight,r=t.scrollHeight,i=t.clientWidth,n=t.scrollWidth;return e*e/r>24&&"vertical"===this.tuiScrollbar||i*i/n>24&&"horizontal"===this.tuiScrollbar?0:"vertical"===this.tuiScrollbar?24/e:24/i},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"thumb",{get:function(){var t=this.compensation||this.view;return this.scrolled*(1-t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"view",{get:function(){var t=this.element,e=t.clientHeight,r=t.scrollHeight,i=t.clientWidth,n=t.scrollWidth;return"vertical"===this.tuiScrollbar?Math.ceil(e/r*100)/100:Math.ceil(i/n*100)/100},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this.container.nativeElement},enumerable:!0,configurable:!0}),t.prototype.getScrolled=function(t,e,r){var i=t.clientY,n=t.clientX,o=this.el.nativeElement,a=o.offsetHeight,c=o.offsetWidth,l=this.wrapper.nativeElement.getBoundingClientRect(),s=l.top,u=l.left,p=l.width,h=l.height;return[(this.element.scrollHeight-h)*((i-s-a*e)/(h-a)),(this.element.scrollWidth-p)*((n-u-c*r)/(p-c))]},t.ctorParameters=function(){return[{type:e.NgZone,decorators:[{type:e.Inject,args:[e.NgZone]}]},{type:e.Renderer2,decorators:[{type:e.Inject,args:[e.Renderer2]}]},{type:c.Observable,decorators:[{type:e.Self},{type:e.Inject,args:[i.TuiDestroyService]}]},{type:c.Observable,decorators:[{type:e.Inject,args:[r.ANIMATION_FRAME]}]},{type:e.ElementRef,decorators:[{type:e.Inject,args:[a.TUI_ELEMENT_REF]}]},{type:e.ElementRef,decorators:[{type:e.Inject,args:[a.TUI_SCROLL_REF]}]},{type:Document,decorators:[{type:e.Inject,args:[s.DOCUMENT]}]},{type:e.ElementRef,decorators:[{type:e.Inject,args:[e.ElementRef]}]}]},p([e.Input()],t.prototype,"tuiScrollbar",void 0),t=p([e.Directive({selector:"[tuiScrollbar]",providers:[i.TuiDestroyService]}),h(0,e.Inject(e.NgZone)),h(1,e.Inject(e.Renderer2)),h(2,e.Self()),h(2,e.Inject(i.TuiDestroyService)),h(3,e.Inject(r.ANIMATION_FRAME)),h(4,e.Inject(a.TUI_ELEMENT_REF)),h(5,e.Inject(a.TUI_SCROLL_REF)),h(6,e.Inject(s.DOCUMENT)),h(7,e.Inject(e.ElementRef))],t)}();var b=function(){function t(){}return t=p([e.Directive({selector:"[tuiScrollbarWrapper]",providers:[{provide:a.TUI_ELEMENT_REF,useExisting:e.ElementRef}]})],t)}(),f=function(){function t(){}return t=p([e.NgModule({imports:[s.CommonModule,i.TuiLetModule],declarations:[g,b,d],exports:[d]})],t)}();t.TuiScrollControlsComponent=d,t.TuiScrollControlsModule=f,t.TuiScrollbarDirective=g,t.Éµa=b,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=taiga-ui-core-components-scroll-controls.umd.min.js.map