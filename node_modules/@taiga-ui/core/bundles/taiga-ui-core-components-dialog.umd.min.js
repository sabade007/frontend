!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@taiga-ui/cdk"),require("@taiga-ui/core/animations"),require("@taiga-ui/core/tokens"),require("@tinkoff/ng-polymorpheus"),require("rxjs"),require("@angular/common"),require("@ng-web-apis/common"),require("@taiga-ui/core/utils/dom"),require("rxjs/operators"),require("@taiga-ui/cdk/services"),require("@taiga-ui/core/components/button")):"function"==typeof define&&define.amd?define("@taiga-ui/core/components/dialog",["exports","@angular/core","@taiga-ui/cdk","@taiga-ui/core/animations","@taiga-ui/core/tokens","@tinkoff/ng-polymorpheus","rxjs","@angular/common","@ng-web-apis/common","@taiga-ui/core/utils/dom","rxjs/operators","@taiga-ui/cdk/services","@taiga-ui/core/components/button"],e):e(((t=t||self)["taiga-ui"]=t["taiga-ui"]||{},t["taiga-ui"].core=t["taiga-ui"].core||{},t["taiga-ui"].core.components=t["taiga-ui"].core.components||{},t["taiga-ui"].core.components.dialog={}),t.ng.core,t.cdk,t["taiga-ui"].core.animations,t["taiga-ui"].core.tokens,t.ngPolymorpheus,t.rxjs,t.ng.common,t.common$1,t["taiga-ui"].core.utils.dom,t.rxjs.operators,t.services,t["taiga-ui"].core.components.button)}(this,(function(t,e,o,n,i,r,a,s,u,c,d,l,p){"use strict";var g=function(t,e){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)};function m(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}g(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}function h(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a}function f(t,e){return function(o,n){e(o,n,t)}}Object.create;Object.create;var b=new e.InjectionToken("A stream to close dialogs",{factory:function(){return a.EMPTY}});function v(t,e,n,i,r,s){var u=n.nativeElement;return s.dismissible?a.merge(o.typedFromEvent(u,"click").pipe(d.filter(o.isCurrentTarget)),o.typedFromEvent(t,"keydown").pipe(d.filter((function(t){var e=t.key,n=o.getActualTarget(t);return"Escape"===e&&o.tuiIsElement(n)&&(!o.tuiContainsOrAfter(u,n)||u.contains(n))}))),o.typedFromEvent(t,"mousedown").pipe(d.filter((function(t){var n=o.getActualTarget(t),i=t.clientX;return o.tuiIsElement(n)&&c.tuiGetViewportWidth(e)-i>17&&!o.tuiContainsOrAfter(u,n)})),d.switchMap((function(){return o.typedFromEvent(t,"mouseup").pipe(d.take(1),d.filter((function(t){var e=o.getActualTarget(t);return o.tuiIsElement(e)&&!o.tuiContainsOrAfter(u,e)})))}))),i).pipe(d.takeUntil(r)):i}var y=new e.InjectionToken("Dialogs closing stream"),I=[o.TuiDestroyService,{provide:y,deps:[s.DOCUMENT,u.WINDOW,e.ElementRef,b,o.TuiDestroyService,r.POLYMORPHEUS_CONTEXT],useFactory:v}],x=new Error("Required dialog was dismissed"),O=function(){function t(t,e,o,n,i){var r=this;this.duration=t,this.isMobile=e,this.context=o,this.closeWord$=i,this.animation={value:"",params:{start:"40px",duration:this.duration}},this.fullscreenAnimation={value:"",params:{start:"100vh",duration:this.duration}},n.subscribe((function(){r.close()}))}return Object.defineProperty(t.prototype,"size",{get:function(){return this.context.size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"header",{get:function(){return this.context.header},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"slideInTop",{get:function(){return"fullscreen"===this.size||"page"===this.size||this.isMobile?this.fullscreenAnimation:this.animation},enumerable:!0,configurable:!0}),t.prototype.close=function(){this.context.required?this.context.$implicit.error(x):this.context.$implicit.complete()},t.ctorParameters=function(){return[{type:Number,decorators:[{type:e.Inject,args:[i.TUI_ANIMATIONS_DURATION]}]},{type:Boolean,decorators:[{type:e.Inject,args:[o.TUI_IS_MOBILE]}]},{type:void 0,decorators:[{type:e.Inject,args:[r.POLYMORPHEUS_CONTEXT]}]},{type:a.Observable,decorators:[{type:e.Inject,args:[y]}]},{type:a.Observable,decorators:[{type:e.Inject,args:[i.TUI_CLOSE_WORD]}]}]},h([e.HostBinding("attr.data-size")],t.prototype,"size",null),h([e.HostBinding("class._centered")],t.prototype,"header",null),h([e.HostBinding("@tuiSlideInTop"),e.HostBinding("@tuiFadeIn")],t.prototype,"slideInTop",null),t=h([e.Component({selector:"tui-dialog",template:'<header\n    *ngIf="header"\n    polymorpheus-outlet\n    class="t-header"\n    [content]="header"\n    [context]="context"\n></header>\n<div class="t-content">\n    <h2\n        class="t-heading"\n        [id]="context.id"\n        [textContent]="context.label"\n    ></h2>\n    <section\n        polymorpheus-outlet\n        [context]="context"\n        [content]="context.content"\n    >\n        <ng-template let-text>\n            {{ text }}\n            <div class="t-buttons">\n                <button\n                    tuiButton\n                    size="m"\n                    (click)="context.$implicit.complete()"\n                >\n                    {{ $any(context.data)?.button || \'OK\' }}\n                </button>\n            </div>\n        </ng-template>\n    </section>\n</div>\n<div\n    *ngIf="context.closeable"\n    class="t-wrapper"\n>\n    <button\n        tuiIconButton\n        tuiPreventDefault="mousedown"\n        automation-id="tui-dialog__close"\n        size="s"\n        appearance=""\n        icon="tuiIconCloseLarge"\n        shape="rounded"\n        class="t-close"\n        [title]="closeWord$ | async"\n        (click)="close()"\n    ></button>\n</div>\n',changeDetection:e.ChangeDetectionStrategy.OnPush,providers:I,animations:[n.tuiSlideInTop,n.tuiFadeIn],styles:[":host{position:relative;display:flex;font:var(--tui-font-text-m);flex-direction:column;box-sizing:border-box;margin:auto;border-radius:1rem;border:2.5rem solid transparent}:host:after{position:absolute;top:0;left:0;width:100%;height:100%;box-shadow:0 1.125rem 1.875rem rgba(0,0,0,.48);content:'';border-radius:inherit;pointer-events:none}:host[data-size=auto]{width:auto}:host[data-size='s']{width:30rem}:host[data-size='s'] .t-content{padding:1.5rem}:host[data-size='s'] .t-heading{margin-bottom:.5rem;font:var(--tui-font-heading-5)}:host[data-size='m']{width:42.5rem}:host[data-size='m'] .t-heading{margin-bottom:.75rem;font:var(--tui-font-heading-4)}:host[data-size='l']{width:55rem}:host[data-size='l'] .t-heading{margin-bottom:1rem}:host[data-size=fullscreen],:host[data-size=page]{width:100%;min-height:100%;border-radius:0;border:none;background:var(--tui-elevation-01);box-shadow:0 4rem var(--tui-base-01)}:host[data-size=fullscreen] .t-content,:host[data-size=page] .t-content{padding:3rem calc(50vw - (45rem / 2))}:host[data-size=fullscreen] .t-heading,:host[data-size=page] .t-heading{margin-bottom:1rem}:host[data-size=page] .t-content{padding:0}:host._centered{text-align:center}:host :host-context(tui-root._mobile)[data-size]{min-width:100%;width:100%;max-width:100%;border-radius:0;border:none;margin:auto 0 0}:host :host-context(tui-root._mobile)[data-size] .t-content{padding:1.5rem}:host :host-context(tui-root._mobile)[data-size] .t-heading{margin-bottom:.5rem;font:var(--tui-font-heading-5)}.t-heading{margin:0;word-wrap:break-word;font:var(--tui-font-heading-3)}.t-heading:empty{display:none}.t-header{display:flex;border-top-left-radius:inherit;border-top-right-radius:inherit;overflow:hidden}:host[data-size=fullscreen] :host-context(tui-root._mobile) .t-header{flex:1}.t-content{border-radius:inherit;padding:2rem;background:var(--tui-base-01)}.t-content:not(:first-child){border-top-left-radius:0;border-top-right-radius:0}.t-wrapper{position:-webkit-sticky;position:sticky;top:0;order:-1}.t-close{transition-property:background;transition-duration:var(--tui-duration,300ms);transition-timing-function:ease-in-out;position:fixed;top:1.5rem;right:1.5rem;color:var(--tui-base-01);background:rgba(104,104,104,.96)}.t-close:hover{background:rgba(159,159,159,.86)}:host:not([data-size=fullscreen]) .t-close{animation:tuiFadeIn var(--tui-duration)}:host:not([data-size=fullscreen]).ng-animating .t-close{display:none}:host-context(tui-root._mobile) .t-close{position:absolute;top:0;right:0;background:0 0;color:var(--tui-base-06)}:host-context(tui-root._mobile) .t-close:hover{color:var(--tui-base-07)}.t-buttons{margin-top:1.25rem;text-align:right}"]}),f(0,e.Inject(i.TUI_ANIMATIONS_DURATION)),f(1,e.Inject(o.TUI_IS_MOBILE)),f(2,e.Inject(r.POLYMORPHEUS_CONTEXT)),f(3,e.Inject(y)),f(4,e.Inject(i.TUI_CLOSE_WORD))],t)}(),T=new r.PolymorpheusComponent(O),_={size:"m",required:!1,closeable:!0,dismissible:!0,label:"",header:""},w=function(t){function o(){var e=null!==t&&t.apply(this,arguments)||this;return e.component=T,e.defaultOptions=_,e}return m(o,t),o.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new o(e.ɵɵinject(l.TuiIdService))},token:o,providedIn:"root"}),o=h([e.Injectable({providedIn:"root"})],o)}(o.AbstractTuiDialogService),j=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return m(n,t),n=h([e.Directive({selector:"ng-template[tuiDialog]",providers:[{provide:o.AbstractTuiDialogService,useExisting:w}],inputs:["options: tuiDialogOptions","open: tuiDialog"],outputs:["openChange: tuiDialogChange"]})],n)}(o.AbstractTuiDialogDirective),D=function(){function t(){}return t=h([e.NgModule({imports:[r.PolymorpheusModule,p.TuiButtonModule,s.CommonModule,o.TuiPreventDefaultModule],declarations:[O,j],exports:[O,j],entryComponents:[O],providers:[{provide:o.TUI_DIALOGS,useExisting:w,multi:!0}]})],t)}();t.TUI_DIALOGS_CLOSE=b,t.TUI_DIALOG_CLOSE_STREAM=y,t.TUI_DIALOG_PROVIDERS=I,t.TuiDialogComponent=O,t.TuiDialogDirective=j,t.TuiDialogModule=D,t.TuiDialogService=w,t.dialogCloseStreamFactory=v,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=taiga-ui-core-components-dialog.umd.min.js.map