!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@taiga-ui/i18n/tokens"),require("@taiga-ui/i18n/tools"),require("@angular/core"),require("@ng-web-apis/common"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@taiga-ui/i18n/switch",["exports","@taiga-ui/i18n/tokens","@taiga-ui/i18n/tools","@angular/core","@ng-web-apis/common","rxjs","rxjs/operators"],e):e(((t=t||self)["taiga-ui"]=t["taiga-ui"]||{},t["taiga-ui"].i18n=t["taiga-ui"].i18n||{},t["taiga-ui"].i18n.switch={}),t["taiga-ui"].i18n.tokens,t["taiga-ui"].i18n.tools,t.ng.core,t.common,t.rxjs,t.rxjs.operators)}(this,(function(t,e,n,r,o,i,a){"use strict";var u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function c(t,e){return function(n,r){e(n,r,t)}}function s(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}c((r=r.apply(t,e||[])).next())}))}function f(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(t,a)}catch(t){u=[6,t],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}Object.create;Object.create;function l(t,e,n){return t&&e?p(t,e):i.of(n)}function p(t,e){return i.from(function(t){return s(this,void 0,void 0,(function(){return f(this,(function(e){return[2,t.then((function(t){return t.default||t}))]}))}))}(e(t))).pipe(a.map((function(e){return null==e?void 0:e["TUI_"+t.toUpperCase()+"_LANGUAGE"]})))}var y=function(t){function a(e,n,r,o){var i=t.call(this,l(r.getItem(n),o,e))||this;return i.fallback=e,i.key=n,i.storage=r,i.loader=o,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(a,t),Object.defineProperty(a.prototype,"language",{get:function(){return this.storage.getItem(this.key)||this.fallback.name},enumerable:!0,configurable:!0}),a.prototype.setLanguage=function(t){this.storage.setItem(this.key,t),this.next(l(t,this.loader,this.fallback))},a.prototype.clear=function(){this.storage.removeItem(this.key),this.next(i.of(this.fallback))},a.ctorParameters=function(){return[{type:void 0,decorators:[{type:r.Inject,args:[n.TUI_DEFAULT_LANGUAGE]}]},{type:String,decorators:[{type:r.Inject,args:[e.TUI_LANGUAGE_STORAGE_KEY]}]},{type:void 0,decorators:[{type:r.Inject,args:[o.LOCAL_STORAGE]}]},{type:void 0,decorators:[{type:r.Optional},{type:r.Inject,args:[e.TUI_LANGUAGE_LOADER]}]}]},a.ɵprov=r.ɵɵdefineInjectable({factory:function(){return new a(r.ɵɵinject(n.TUI_DEFAULT_LANGUAGE),r.ɵɵinject(e.TUI_LANGUAGE_STORAGE_KEY),r.ɵɵinject(o.LOCAL_STORAGE),r.ɵɵinject(e.TUI_LANGUAGE_LOADER,8))},token:a,providedIn:"root"}),a=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var u=t.length-1;u>=0;u--)(o=t[u])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}([r.Injectable({providedIn:"root"}),c(0,r.Inject(n.TUI_DEFAULT_LANGUAGE)),c(1,r.Inject(e.TUI_LANGUAGE_STORAGE_KEY)),c(2,r.Inject(o.LOCAL_STORAGE)),c(3,r.Optional()),c(3,r.Inject(e.TUI_LANGUAGE_LOADER))],a)}(i.BehaviorSubject);t.TuiLanguageSwitcher=y,t.tuiAsyncLoadLanguage=l,t.tuiLanguageSwitcher=function(t){return[{provide:e.TUI_LANGUAGE_LOADER,useFactory:function(){return t}},{provide:n.TUI_LANGUAGE,useExisting:y}]},t.tuiLoadLanguage=p,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=taiga-ui-i18n-switch.umd.min.js.map