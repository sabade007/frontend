import { __decorate } from 'tslib';
import { Input, Directive, forwardRef, NgModule } from '@angular/core';
import { Validators, NG_VALIDATORS } from '@angular/forms';
import { EMPTY_FUNCTION } from '@taiga-ui/cdk/constants';
import { tuiDefaultProp } from '@taiga-ui/cdk/decorators';

var TuiValidatorDirective = /** @class */ (function () {
    function TuiValidatorDirective() {
        this.onChange = EMPTY_FUNCTION;
        this.tuiValidator = Validators.nullValidator;
    }
    TuiValidatorDirective_1 = TuiValidatorDirective;
    TuiValidatorDirective.prototype.validate = function (control) {
        return this.tuiValidator(control);
    };
    TuiValidatorDirective.prototype.registerOnValidatorChange = function (onChange) {
        this.onChange = onChange;
    };
    TuiValidatorDirective.prototype.ngOnChanges = function () {
        this.onChange();
    };
    TuiValidatorDirective.prototype.ngOnDestroy = function () {
        this.tuiValidator = Validators.nullValidator;
        this.onChange();
    };
    var TuiValidatorDirective_1;
    __decorate([
        Input(),
        tuiDefaultProp()
    ], TuiValidatorDirective.prototype, "tuiValidator", void 0);
    TuiValidatorDirective = TuiValidatorDirective_1 = __decorate([
        Directive({
            selector: '[tuiValidator]',
            providers: [
                {
                    provide: NG_VALIDATORS,
                    useExisting: forwardRef(function () { return TuiValidatorDirective_1; }),
                    multi: true,
                },
            ],
        })
    ], TuiValidatorDirective);
    return TuiValidatorDirective;
}());

var TuiValidatorModule = /** @class */ (function () {
    function TuiValidatorModule() {
    }
    TuiValidatorModule = __decorate([
        NgModule({
            declarations: [TuiValidatorDirective],
            exports: [TuiValidatorDirective],
        })
    ], TuiValidatorModule);
    return TuiValidatorModule;
}());

/**
 * Generated bundle index. Do not edit.
 */

export { TuiValidatorDirective, TuiValidatorModule };
//# sourceMappingURL=taiga-ui-cdk-directives-validator.js.map
