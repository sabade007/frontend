import { __decorate } from "tslib";
import { Directive, EventEmitter, HostBinding, Input, Output } from '@angular/core';
import { tuiDefaultProp } from '@taiga-ui/cdk/decorators';
var TUI = "tui_interactive_";
/**
 * The most basic class for interactive components
 */
var AbstractTuiInteractive = /** @class */ (function () {
    function AbstractTuiInteractive() {
        this.pseudoHovered = null;
        this.pseudoPressed = null;
        this.pseudoFocused = null;
        /**
         * Determines if component is focusable with keyboard.
         */
        this.focusable = true;
        this.nativeId = "";
        /**
         * Emits 'true' on focus and 'false' on blur.
         */
        this.focusedChange = new EventEmitter();
        /** @deprecated use `tuiPressedChange` directive */
        this.pressedChange = new EventEmitter();
        /** @deprecated use `tuiHoveredChange` directive */
        this.hoveredChange = new EventEmitter();
        this.focusVisibleChange = new EventEmitter();
        /** @deprecated use `tuiHoveredChange` directive */
        this.hovered = false;
        /** @deprecated use `tuiPressedChange` directive */
        this.pressed = false;
        this.focusVisible = false;
        this.autoIdString = "" + TUI + AbstractTuiInteractive_1.autoId++ + Date.now();
    }
    AbstractTuiInteractive_1 = AbstractTuiInteractive;
    Object.defineProperty(AbstractTuiInteractive.prototype, "computedDisabled", {
        get: function () {
            return this.disabled;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AbstractTuiInteractive.prototype, "computedHovered", {
        /** @deprecated */
        get: function () {
            var _a;
            return !this.computedDisabled && ((_a = this.pseudoHovered) !== null && _a !== void 0 ? _a : this.hovered);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AbstractTuiInteractive.prototype, "computedPressed", {
        /** @deprecated */
        get: function () {
            var _a;
            return !this.computedDisabled && ((_a = this.pseudoPressed) !== null && _a !== void 0 ? _a : this.pressed);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AbstractTuiInteractive.prototype, "computedFocusable", {
        get: function () {
            return !this.computedDisabled && (this.focusable || this.focused);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AbstractTuiInteractive.prototype, "computedFocused", {
        get: function () {
            var _a;
            return !this.computedDisabled && ((_a = this.pseudoFocused) !== null && _a !== void 0 ? _a : this.focused);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AbstractTuiInteractive.prototype, "computedFocusVisible", {
        get: function () {
            var _a;
            return !this.computedDisabled && ((_a = this.pseudoFocused) !== null && _a !== void 0 ? _a : this.focusVisible);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AbstractTuiInteractive.prototype, "id", {
        // TODO: 3.0 Consider removing since native input is exposed
        get: function () {
            return this.nativeId ? this.nativeId : this.autoIdString;
        },
        enumerable: true,
        configurable: true
    });
    /** @deprecated */
    AbstractTuiInteractive.prototype.updateHovered = function (hovered) {
        if (this.hovered === hovered) {
            return;
        }
        this.hovered = hovered;
        this.hoveredChange.emit(hovered);
    };
    /** @deprecated */
    AbstractTuiInteractive.prototype.updatePressed = function (pressed) {
        if (this.pressed === pressed) {
            return;
        }
        this.pressed = pressed;
        this.pressedChange.emit(pressed);
    };
    AbstractTuiInteractive.prototype.updateFocused = function (focused) {
        this.focusedChange.emit(focused);
    };
    AbstractTuiInteractive.prototype.updateFocusVisible = function (focusVisible) {
        if (this.focusVisible === focusVisible) {
            return;
        }
        this.focusVisible = focusVisible;
        this.focusVisibleChange.emit(focusVisible);
    };
    var AbstractTuiInteractive_1;
    AbstractTuiInteractive.autoId = 0;
    __decorate([
        Input(),
        tuiDefaultProp()
    ], AbstractTuiInteractive.prototype, "pseudoHovered", void 0);
    __decorate([
        Input(),
        tuiDefaultProp()
    ], AbstractTuiInteractive.prototype, "pseudoPressed", void 0);
    __decorate([
        Input(),
        tuiDefaultProp()
    ], AbstractTuiInteractive.prototype, "pseudoFocused", void 0);
    __decorate([
        Input(),
        tuiDefaultProp()
    ], AbstractTuiInteractive.prototype, "focusable", void 0);
    __decorate([
        Input(),
        tuiDefaultProp()
    ], AbstractTuiInteractive.prototype, "nativeId", void 0);
    __decorate([
        Output()
    ], AbstractTuiInteractive.prototype, "focusedChange", void 0);
    __decorate([
        Output()
    ], AbstractTuiInteractive.prototype, "pressedChange", void 0);
    __decorate([
        Output()
    ], AbstractTuiInteractive.prototype, "hoveredChange", void 0);
    __decorate([
        Output()
    ], AbstractTuiInteractive.prototype, "focusVisibleChange", void 0);
    __decorate([
        HostBinding("class._disabled")
    ], AbstractTuiInteractive.prototype, "computedDisabled", null);
    __decorate([
        HostBinding("class._hovered")
    ], AbstractTuiInteractive.prototype, "computedHovered", null);
    __decorate([
        HostBinding("class._pressed")
    ], AbstractTuiInteractive.prototype, "computedPressed", null);
    __decorate([
        HostBinding("class._focused")
    ], AbstractTuiInteractive.prototype, "computedFocused", null);
    __decorate([
        HostBinding("class._focus-visible")
    ], AbstractTuiInteractive.prototype, "computedFocusVisible", null);
    AbstractTuiInteractive = AbstractTuiInteractive_1 = __decorate([
        Directive()
    ], AbstractTuiInteractive);
    return AbstractTuiInteractive;
}());
export { AbstractTuiInteractive };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW50ZXJhY3RpdmUuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AdGFpZ2EtdWkvY2RrL2Fic3RyYWN0LyIsInNvdXJjZXMiOlsiaW50ZXJhY3RpdmUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBQyxTQUFTLEVBQUUsWUFBWSxFQUFFLFdBQVcsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFDLE1BQU0sZUFBZSxDQUFDO0FBQ2xGLE9BQU8sRUFBQyxjQUFjLEVBQUMsTUFBTSwwQkFBMEIsQ0FBQztBQUV4RCxJQUFNLEdBQUcsR0FBRyxrQkFBa0IsQ0FBQztBQUUvQjs7R0FFRztBQUVIO0lBeURJO1FBOUNBLGtCQUFhLEdBQW1CLElBQUksQ0FBQztRQUlyQyxrQkFBYSxHQUFtQixJQUFJLENBQUM7UUFJckMsa0JBQWEsR0FBbUIsSUFBSSxDQUFDO1FBRXJDOztXQUVHO1FBR0gsY0FBUyxHQUFHLElBQUksQ0FBQztRQUlqQixhQUFRLEdBQUcsRUFBRSxDQUFDO1FBRWQ7O1dBRUc7UUFFTSxrQkFBYSxHQUFHLElBQUksWUFBWSxFQUFXLENBQUM7UUFFckQsbURBQW1EO1FBRTFDLGtCQUFhLEdBQUcsSUFBSSxZQUFZLEVBQVcsQ0FBQztRQUVyRCxtREFBbUQ7UUFFMUMsa0JBQWEsR0FBRyxJQUFJLFlBQVksRUFBVyxDQUFDO1FBRzVDLHVCQUFrQixHQUFHLElBQUksWUFBWSxFQUFXLENBQUM7UUFFMUQsbURBQW1EO1FBQ25ELFlBQU8sR0FBRyxLQUFLLENBQUM7UUFFaEIsbURBQW1EO1FBQ25ELFlBQU8sR0FBRyxLQUFLLENBQUM7UUFFaEIsaUJBQVksR0FBRyxLQUFLLENBQUM7UUFHakIsSUFBSSxDQUFDLFlBQVksR0FBRyxLQUFHLEdBQUcsR0FBRyx3QkFBc0IsQ0FBQyxNQUFNLEVBQUUsR0FBRyxJQUFJLENBQUMsR0FBRyxFQUFJLENBQUM7SUFDaEYsQ0FBQzsrQkEzRGlCLHNCQUFzQjtJQThEeEMsc0JBQUksb0RBQWdCO2FBQXBCO1lBQ0ks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ckQ7UUFEQyxNQUFNLEVBQUU7aUVBQzRDO0lBSXJEO1FBREMsTUFBTSxFQUFFO2lFQUM0QztJQUdyRDtRQURDLE1BQU0sRUFBRTtzRUFDaUQ7SUFlMUQ7UUFEQyxXQUFXLENBQUMsaUJBQWlCLENBQUM7a0VBRzlCO0lBSUQ7UUFEQyxXQUFXLENBQUMsZ0JBQWdCLENBQUM7aUVBRzdCO0lBSUQ7UUFEQyxXQUFXLENBQUMsZ0JBQWdCLENBQUM7aUVBRzdCO0lBT0Q7UUFEQyxXQUFXLENBQUMsZ0JBQWdCLENBQUM7aUVBRzdCO0lBR0Q7UUFEQyxXQUFXLENBQUMsc0JBQXNCLENBQUM7c0VBR25DO0lBMUZpQixzQkFBc0I7UUFEM0MsU0FBUyxFQUFFO09BQ1Usc0JBQXNCLENBaUkzQztJQUFELDZCQUFDO0NBQUEsQUFqSUQsSUFpSUM7U0FqSXFCLHNCQUFzQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7RGlyZWN0aXZlLCBFdmVudEVtaXR0ZXIsIEhvc3RCaW5kaW5nLCBJbnB1dCwgT3V0cHV0fSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7dHVpRGVmYXVsdFByb3B9IGZyb20gJ0B0YWlnYS11aS9jZGsvZGVjb3JhdG9ycyc7XG5cbmNvbnN0IFRVSSA9IGB0dWlfaW50ZXJhY3RpdmVfYDtcblxuLyoqXG4gKiBUaGUgbW9zdCBiYXNpYyBjbGFzcyBmb3IgaW50ZXJhY3RpdmUgY29tcG9uZW50c1xuICovXG5ARGlyZWN0aXZlKClcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBBYnN0cmFjdFR1aUludGVyYWN0aXZlIHtcbiAgICBwcml2YXRlIHN0YXRpYyBhdXRvSWQgPSAwO1xuXG4gICAgYWJzdHJhY3QgZGlzYWJsZWQ6IGJvb2xlYW47XG5cbiAgICBhYnN0cmFjdCBmb2N1c2VkOiBib29sZWFuO1xuXG4gICAgcHJpdmF0ZSByZWFkb25seSBhdXRvSWRTdHJpbmc6IHN0cmluZztcblxuICAgIEBJbnB1dCgpXG4gICAgQHR1aURlZmF1bHRQcm9wKClcbiAgICBwc2V1ZG9Ib3ZlcmVkOiBib29sZWFuIHwgbnVsbCA9IG51bGw7XG5cbiAgICBASW5wdXQoKVxuICAgIEB0dWlEZWZhdWx0UHJvcCgpXG4gICAgcHNldWRvUHJlc3NlZDogYm9vbGVhbiB8IG51bGwgPSBudWxsO1xuXG4gICAgQElucHV0KClcbiAgICBAdHVpRGVmYXVsdFByb3AoKVxuICAgIHBzZXVkb0ZvY3VzZWQ6IGJvb2xlYW4gfCBudWxsID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgaWYgY29tcG9uZW50IGlzIGZvY3VzYWJsZSB3aXRoIGtleWJvYXJkLlxuICAgICAqL1xuICAgIEBJbnB1dCgpXG4gICAgQHR1aURlZmF1bHRQcm9wKClcbiAgICBmb2N1c2FibGUgPSB0cnVlO1xuXG4gICAgQElucHV0KClcbiAgICBAdHVpRGVmYXVsdFByb3AoKVxuICAgIG5hdGl2ZUlkID0gYGA7XG5cbiAgICAvKipcbiAgICAgKiBFbWl0cyAndHJ1ZScgb24gZm9jdXMgYW5kICdmYWxzZScgb24gYmx1ci5cbiAgICAgKi9cbiAgICBAT3V0cHV0KClcbiAgICByZWFkb25seSBmb2N1c2VkQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxib29sZWFuPigpO1xuXG4gICAgLyoqIEBkZXByZWNhdGVkIHVzZSBgdHVpUHJlc3NlZENoYW5nZWAgZGlyZWN0aXZlICovXG4gICAgQE91dHB1dCgpXG4gICAgcmVhZG9ubHkgcHJlc3NlZENoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8Ym9vbGVhbj4oKTtcblxuICAgIC8qKiBAZGVwcmVjYXRlZCB1c2UgYHR1aUhvdmVyZWRDaGFuZ2VgIGRpcmVjdGl2ZSAqL1xuICAgIEBPdXRwdXQoKVxuICAgIHJlYWRvbmx5IGhvdmVyZWRDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPGJvb2xlYW4+KCk7XG5cbiAgICBAT3V0cHV0KClcbiAgICByZWFkb25seSBmb2N1c1Zpc2libGVDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPGJvb2xlYW4+KCk7XG5cbiAgICAvKiogQGRlcHJlY2F0ZWQgdXNlIGB0dWlIb3ZlcmVkQ2hhbmdlYCBkaXJlY3RpdmUgKi9cbiAgICBob3ZlcmVkID0gZmFsc2U7XG5cbiAgICAvKiogQGRlcHJlY2F0ZWQgdXNlIGB0dWlQcmVzc2VkQ2hhbmdlYCBkaXJlY3RpdmUgKi9cbiAgICBwcmVzc2VkID0gZmFsc2U7XG5cbiAgICBmb2N1c1Zpc2libGUgPSBmYWxzZTtcblxuICAgIHByb3RlY3RlZCBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5hdXRvSWRTdHJpbmcgPSBgJHtUVUl9JHtBYnN0cmFjdFR1aUludGVyYWN0aXZlLmF1dG9JZCsrfSR7RGF0ZS5ub3coKX1gO1xuICAgIH1cblxuICAgIEBIb3N0QmluZGluZyhgY2xhc3MuX2Rpc2FibGVkYClcbiAgICBnZXQgY29tcHV0ZWREaXNhYmxlZCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlzYWJsZWQ7XG4gICAgfVxuXG4gICAgLyoqIEBkZXByZWNhdGVkICovXG4gICAgQEhvc3RCaW5kaW5nKGBjbGFzcy5faG92ZXJlZGApXG4gICAgZ2V0IGNvbXB1dGVkSG92ZXJlZCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmNvbXB1dGVkRGlzYWJsZWQgJiYgKHRoaXMucHNldWRvSG92ZXJlZCA/PyB0aGlzLmhvdmVyZWQpO1xuICAgIH1cblxuICAgIC8qKiBAZGVwcmVjYXRlZCAqL1xuICAgIEBIb3N0QmluZGluZyhgY2xhc3MuX3ByZXNzZWRgKVxuICAgIGdldCBjb21wdXRlZFByZXNzZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAhdGhpcy5jb21wdXRlZERpc2FibGVkICYmICh0aGlzLnBzZXVkb1ByZXNzZWQgPz8gdGhpcy5wcmVzc2VkKTtcbiAgICB9XG5cbiAgICBnZXQgY29tcHV0ZWRGb2N1c2FibGUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAhdGhpcy5jb21wdXRlZERpc2FibGVkICYmICh0aGlzLmZvY3VzYWJsZSB8fCB0aGlzLmZvY3VzZWQpO1xuICAgIH1cblxuICAgIEBIb3N0QmluZGluZyhgY2xhc3MuX2ZvY3VzZWRgKVxuICAgIGdldCBjb21wdXRlZEZvY3VzZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAhdGhpcy5jb21wdXRlZERpc2FibGVkICYmICh0aGlzLnBzZXVkb0ZvY3VzZWQgPz8gdGhpcy5mb2N1c2VkKTtcbiAgICB9XG5cbiAgICBASG9zdEJpbmRpbmcoYGNsYXNzLl9mb2N1cy12aXNpYmxlYClcbiAgICBnZXQgY29tcHV0ZWRGb2N1c1Zpc2libGUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAhdGhpcy5jb21wdXRlZERpc2FibGVkICYmICh0aGlzLnBzZXVkb0ZvY3VzZWQgPz8gdGhpcy5mb2N1c1Zpc2libGUpO1xuICAgIH1cblxuICAgIC8vIFRPRE86IDMuMCBDb25zaWRlciByZW1vdmluZyBzaW5jZSBuYXRpdmUgaW5wdXQgaXMgZXhwb3NlZFxuICAgIGdldCBpZCgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5uYXRpdmVJZCA/IHRoaXMubmF0aXZlSWQgOiB0aGlzLmF1dG9JZFN0cmluZztcbiAgICB9XG5cbiAgICAvKiogQGRlcHJlY2F0ZWQgKi9cbiAgICBwcm90ZWN0ZWQgdXBkYXRlSG92ZXJlZChob3ZlcmVkOiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLmhvdmVyZWQgPT09IGhvdmVyZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaG92ZXJlZCA9IGhvdmVyZWQ7XG4gICAgICAgIHRoaXMuaG92ZXJlZENoYW5nZS5lbWl0KGhvdmVyZWQpO1xuICAgIH1cblxuICAgIC8qKiBAZGVwcmVjYXRlZCAqL1xuICAgIHByb3RlY3RlZCB1cGRhdGVQcmVzc2VkKHByZXNzZWQ6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMucHJlc3NlZCA9PT0gcHJlc3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5wcmVzc2VkID0gcHJlc3NlZDtcbiAgICAgICAgdGhpcy5wcmVzc2VkQ2hhbmdlLmVtaXQocHJlc3NlZCk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIHVwZGF0ZUZvY3VzZWQoZm9jdXNlZDogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICB0aGlzLmZvY3VzZWRDaGFuZ2UuZW1pdChmb2N1c2VkKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgdXBkYXRlRm9jdXNWaXNpYmxlKGZvY3VzVmlzaWJsZTogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5mb2N1c1Zpc2libGUgPT09IGZvY3VzVmlzaWJsZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5mb2N1c1Zpc2libGUgPSBmb2N1c1Zpc2libGU7XG4gICAgICAgIHRoaXMuZm9jdXNWaXNpYmxlQ2hhbmdlLmVtaXQoZm9jdXNWaXNpYmxlKTtcbiAgICB9XG59XG4iXX0=