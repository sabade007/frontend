"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const workspace_1 = require("@schematics/angular/utility/workspace");
const get_project_1 = require("../../utils/get-project");
const get_project_target_options_1 = require("../../utils/get-project-target-options");
const ICON_ASSETS = {
    glob: `**/*`,
    input: `node_modules/@taiga-ui/icons/src`,
    output: `assets/taiga-ui/icons`,
};
function addTaigaIcons(options) {
    return (_) => tslib_1.__awaiter(this, void 0, void 0, function* () {
        return addTaigaStylesToAngularJson(options);
    });
}
exports.addTaigaIcons = addTaigaIcons;
function addTaigaStylesToAngularJson(options) {
    return workspace_1.updateWorkspace(workspace => {
        const project = get_project_1.getProject(options, workspace);
        const targetOptions = get_project_target_options_1.getProjectTargetOptions(project, `build`);
        const assets = targetOptions.assets;
        targetOptions.assets = assets ? [...assets, ICON_ASSETS] : [ICON_ASSETS];
    });
}
exports.addTaigaStylesToAngularJson = addTaigaStylesToAngularJson;
