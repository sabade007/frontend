!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@taiga-ui/cdk/exceptions"),require("@taiga-ui/cdk/utils/miscellaneous"),require("rxjs"),require("rxjs/operators"),require("@taiga-ui/cdk/utils/focus")):"function"==typeof define&&define.amd?define("@taiga-ui/cdk/observables",["exports","@taiga-ui/cdk/exceptions","@taiga-ui/cdk/utils/miscellaneous","rxjs","rxjs/operators","@taiga-ui/cdk/utils/focus"],t):t(((e=e||self)["taiga-ui"]=e["taiga-ui"]||{},e["taiga-ui"].cdk=e["taiga-ui"].cdk||{},e["taiga-ui"].cdk.observables={}),e["taiga-ui"].cdk.exceptions,e["taiga-ui"].cdk.utils.miscellaneous,e.rxjs,e.rxjs.operators,e["taiga-ui"].cdk.utils.focus)}(this,(function(e,t,r,n,i,u){"use strict";function o(e,t,r){return void 0===r&&(r={}),n.fromEvent(e,t,r)}var a=o;function s(e){return n.merge(o(e,"mouseup"),o(e,"dragend"))}var c,p=s;(c=e.TuiDragStage||(e.TuiDragStage={}))[c.Start=0]="Start",c[c.Continues=1]="Continues",c[c.End=2]="End";var f=function(e,t){this.stage=e,this.event=t};function l(e){var u=e.ownerDocument;if(!u)throw new t.TuiOwnerDocumentException;return n.concat(o(e,"mousedown").pipe(i.take(1),i.map((function(e){return new f(0,e)}))),n.merge(o(u,"mousemove").pipe(i.map((function(e){return new f(1,e)}))),s(u).pipe(i.take(1),i.map((function(e){return new f(2,e)})),i.endWith(null))).pipe(i.takeWhile(r.isPresent))).pipe(i.repeat())}var d,m,v=l;function g(e){return void 0===e&&(e=0),n.pipe(i.switchMapTo(n.timer(e).pipe(i.mapTo(!1),i.startWith(!0))),i.distinctUntilChanged())}function b(e){var r=o(e,"blur"),a=e.ownerDocument;if(!a)throw new t.TuiOwnerDocumentException;return m&&d||(d=o(a,"mouseup",{capture:!0}).pipe(g(),i.startWith(!1),i.shareReplay({bufferSize:1,refCount:!0})),m=o(a,"mousedown",{capture:!0}).pipe(g(),i.startWith(!1),i.shareReplay({bufferSize:1,refCount:!0}))),n.merge(n.concat(o(e,"focus").pipe(i.take(1)),r.pipe(i.filter((function(){return!u.isNativeFocused(e)})),i.take(1),i.ignoreElements())).pipe(i.repeat(),i.withLatestFrom(m,d,(function(e,t,r){return t||r})),i.filter((function(e){return!e})))).pipe(i.switchMapTo(r.pipe(i.mapTo(!1),i.take(1),i.startWith(!0))),i.distinctUntilChanged())}var h=b;function w(e){return e.changes.pipe(i.map((function(){return r.getOriginalArrayFromQueryList(e)})),i.startWith(r.getOriginalArrayFromQueryList(e)))}var k=w;function x(){return i.map((function(e){if(!r.isPresent(e))throw new t.TuiValuePresentException;return e}))}var D=x;function O(e,r){var n=(void 0===r?{onlyTrusted:!0}:r).onlyTrusted,u=e.ownerDocument;if(!u)throw new t.TuiOwnerDocumentException;return o(e,"mousedown").pipe(i.filter((function(e){return e.isTrusted||!n})),i.switchMapTo(s(u).pipe(i.mapTo(!1),i.take(1),i.startWith(!0))))}var T=O;function y(){return i.tap((function(e){return e.preventDefault()}))}var F=y;function E(){return i.tap((function(e){e.stopPropagation()}))}var C=E;function P(e){return i.tap((function(){e.markForCheck()}))}var W=P;function S(e){return function(t){return new n.Observable((function(r){return t.subscribe({next:function(t){return e.run((function(){return r.next(t)}))},error:function(t){return e.run((function(){return r.error(t)}))},complete:function(){return e.run((function(){return r.complete()}))}})}))}}function j(e){return function(t){return new n.Observable((function(r){return e.runOutsideAngular((function(){return t.subscribe(r)}))}))}}e.TuiDragState=f,e.dragAndDropFrom=l,e.focusVisibleObservable=b,e.itemsQueryListObservable=w,e.mouseDragFinishFrom=s,e.mustBePresent=x,e.pressedObservable=O,e.preventDefault=y,e.stopPropagation=E,e.tuiDragAndDropFrom=v,e.tuiFocusVisibleObservable=h,e.tuiIsAlive=g,e.tuiIsObserved=function(e){return e.observed||!!e.observers.length},e.tuiItemsQueryListObservable=k,e.tuiMouseDragFinishFrom=p,e.tuiMustBePresent=D,e.tuiPressedObservable=T,e.tuiPreventDefault=F,e.tuiReplayedValueChangesFrom=function(e){return new n.Observable((function(r){if(!e.valueChanges)throw new t.TuiValueChangesException;e.valueChanges.pipe(i.startWith(e.value)).subscribe(r)}))},e.tuiScrollFrom=function(e){var t;return a(e===(null===(t=e.ownerDocument)||void 0===t?void 0:t.documentElement)?e.ownerDocument:e,"scroll")},e.tuiStopPropagation=C,e.tuiTypedFromEvent=a,e.tuiWatch=W,e.tuiZoneOptimized=function(e){return n.pipe(j(e),S(e))},e.tuiZonefree=j,e.tuiZonefull=S,e.typedFromEvent=o,e.watch=P,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=taiga-ui-cdk-observables.umd.min.js.map