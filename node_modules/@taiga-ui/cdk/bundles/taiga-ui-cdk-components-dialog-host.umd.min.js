!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/platform-browser"),require("@ng-web-apis/common"),require("@taiga-ui/cdk/constants"),require("@taiga-ui/cdk/tokens"),require("rxjs"),require("rxjs/operators"),require("@angular/common"),require("@taiga-ui/cdk/directives"),require("@taiga-ui/cdk/directives/focus-trap"),require("@taiga-ui/cdk/directives/overscroll"),require("@tinkoff/ng-polymorpheus")):"function"==typeof define&&define.amd?define("@taiga-ui/cdk/components/dialog-host",["exports","@angular/core","@angular/platform-browser","@ng-web-apis/common","@taiga-ui/cdk/constants","@taiga-ui/cdk/tokens","rxjs","rxjs/operators","@angular/common","@taiga-ui/cdk/directives","@taiga-ui/cdk/directives/focus-trap","@taiga-ui/cdk/directives/overscroll","@tinkoff/ng-polymorpheus"],e):e(((t=t||self)["taiga-ui"]=t["taiga-ui"]||{},t["taiga-ui"].cdk=t["taiga-ui"].cdk||{},t["taiga-ui"].cdk.components=t["taiga-ui"].cdk.components||{},t["taiga-ui"].cdk.components["dialog-host"]={}),t.ng.core,t.ng.platformBrowser,t.common,t["taiga-ui"].cdk.constants,t["taiga-ui"].cdk.tokens,t.rxjs,t.rxjs.operators,t.ng.common,t["taiga-ui"].cdk.directives,t["taiga-ui"].cdk.directives["focus-trap"],t["taiga-ui"].cdk.directives.overscroll,t.ngPolymorpheus)}(this,(function(t,e,o,i,r,n,a,s,c,l,u,g,d){"use strict";function p(t,e,o,i){var r,n=arguments.length,a=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(n<3?r(a):n>3?r(e,o,a):r(e,o))||a);return n>3&&a&&Object.defineProperty(e,o,a),a}function f(t,e){return function(o,i){e(o,i,t)}}Object.create;function y(t,e){var o="function"==typeof Symbol&&t[Symbol.iterator];if(!o)return t;var i,r,n=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(o=n.return)&&o.call(n)}finally{if(r)throw r.error}}return a}Object.create;var m=new e.InjectionToken("Is closing dialog on browser backward navigation enabled",{factory:function(){return a.of(!1)}}),h={label:"ignoreMe"},v=function(t){return(null==t?void 0:t.label)===h.label},k=function(){function t(t,e,o,i){this.isDialogClosesOnBack$=t,this.dialogsByType=e,this.historyRef=o,this.titleService=i,this.dialogs$=a.combineLatest(this.dialogsByType).pipe(s.map((function(t){var e;return(e=new Array).concat.apply(e,function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(y(arguments[e]));return t}(t)).sort((function(t,e){return t.createdAt-e.createdAt}))})))}return t.prototype.closeLast=function(t,e){if(e){var o=y(t.slice(-1),1)[0];o&&(t.length>1&&this.historyRef.pushState(h,this.titleService.getTitle()),o.$implicit.complete())}},t.prototype.onDialog=function(t,e,o){var i=t.propertyName;o&&"letter-spacing"===i&&(e?this.historyRef.pushState(h,this.titleService.getTitle()):v(this.historyRef.state)&&this.historyRef.back())},t.ctorParameters=function(){return[{type:a.Observable,decorators:[{type:e.Inject,args:[m]}]},{type:Array,decorators:[{type:e.Inject,args:[n.TUI_DIALOGS]}]},{type:History,decorators:[{type:e.Inject,args:[i.HISTORY]}]},{type:o.Title,decorators:[{type:e.Inject,args:[o.Title]}]}]},t=p([e.Component({selector:"tui-dialog-host",template:'<ng-container *ngIf="dialogs$ | async as dialogs">\n    <section\n        *ngFor="let item of dialogs"\n        polymorpheus-outlet\n        tuiFocusTrap\n        tuiScrollRef\n        tuiOverscroll="all"\n        role="dialog"\n        aria-modal="true"\n        class="t-dialog"\n        @tuiParentAnimation\n        [attr.aria-labelledby]="item.id"\n        [content]="item.component"\n        [context]="item"\n    ></section>\n    <div\n        *tuiLet="isDialogClosesOnBack$ | async as isDialogClosesOnBack"\n        class="t-overlay"\n        [class.t-overlay_visible]="dialogs.length"\n        (window:popstate)="closeLast(dialogs, isDialogClosesOnBack)"\n        (transitionend)="onDialog($event, !!dialogs.length, isDialogClosesOnBack)"\n    ></div>\n</ng-container>\n',changeDetection:e.ChangeDetectionStrategy.OnPush,animations:[r.TUI_PARENT_ANIMATION],styles:[":host{position:fixed;left:0;bottom:0;width:100%;height:0}.t-dialog,.t-overlay{position:fixed;top:0;left:0;right:0;bottom:0;display:flex;align-items:flex-start;outline:0;overflow:auto;overflow:overlay}.t-dialog{bottom:auto;height:100%}.t-overlay{height:100%;pointer-events:none;touch-action:none;opacity:0;letter-spacing:normal;transition:opacity var(--tui-duration),letter-spacing 10ms;background:rgba(0,0,0,.75)}.t-overlay_visible{opacity:1;letter-spacing:1px}.t-dialog:last-of-type{z-index:1}"]}),f(0,e.Inject(m)),f(1,e.Inject(n.TUI_DIALOGS)),f(2,e.Inject(i.HISTORY)),f(3,e.Inject(o.Title))],t)}(),b=function(){function t(){}return t=p([e.NgModule({imports:[c.CommonModule,d.PolymorpheusModule,g.TuiOverscrollModule,u.TuiFocusTrapModule,l.TuiLetModule],declarations:[k],exports:[k]})],t)}();t.FAKE_HISTORY_STATE=h,t.TUI_DIALOG_CLOSES_ON_BACK=m,t.TuiDialogHostComponent=k,t.TuiDialogHostModule=b,t.isFakeHistoryState=v,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=taiga-ui-cdk-components-dialog-host.umd.min.js.map