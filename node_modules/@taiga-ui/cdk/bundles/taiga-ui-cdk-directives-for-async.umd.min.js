!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@taiga-ui/cdk/directives/for-async",["exports","@angular/core","rxjs","rxjs/operators"],t):t(((e=e||self)["taiga-ui"]=e["taiga-ui"]||{},e["taiga-ui"].cdk=e["taiga-ui"].cdk||{},e["taiga-ui"].cdk.directives=e["taiga-ui"].cdk.directives||{},e["taiga-ui"].cdk.directives["for-async"]={}),e.ng.core,e.rxjs,e.rxjs.operators)}(this,(function(e,t,r,i){"use strict";function o(e,t,r,i){var o,n=arguments.length,c=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(c=(n<3?o(c):n>3?o(t,r,c):o(t,r))||c);return n>3&&c&&Object.defineProperty(t,r,c),c}function n(e,t){return function(r,i){t(r,i,e)}}Object.create;function c(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,o,n=r.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(i=n.next()).done;)c.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return c}Object.create;var a=function(){function e(e,t){this.view=e,this.template=t,this.destroy$=new r.Subject,this.tuiForAsyncTimeout=10}return e.prototype.ngOnChanges=function(){this.clearViewForOldNodes(),this.createAsyncViewForNewNodes()},e.prototype.ngOnDestroy=function(){this.clearViewForOldNodes(),this.destroy$.complete()},e.prototype.createAsyncViewForNewNodes=function(){var e=this;r.from((this.tuiForAsyncOf||[]).entries()).pipe(i.concatMap((function(t){return r.of(t).pipe(i.delay(e.tuiForAsyncTimeout))})),i.takeUntil(this.destroy$)).subscribe((function(t){var r=c(t,2),i=r[0],o=r[1];return e.view.createEmbeddedView(e.template,{$implicit:o,index:i},i).detectChanges()}))},e.prototype.clearViewForOldNodes=function(){this.destroy$.next(),this.view.clear()},e.ctorParameters=function(){return[{type:t.ViewContainerRef,decorators:[{type:t.Inject,args:[t.ViewContainerRef]}]},{type:t.TemplateRef,decorators:[{type:t.Inject,args:[t.TemplateRef]}]}]},o([t.Input()],e.prototype,"tuiForAsyncOf",void 0),o([t.Input()],e.prototype,"tuiForAsyncTimeout",void 0),e=o([t.Directive({selector:"[tuiForAsync][tuiForAsyncOf]"}),n(0,t.Inject(t.ViewContainerRef)),n(1,t.Inject(t.TemplateRef))],e)}(),s=function(){function e(){}return e=o([t.NgModule({declarations:[a],exports:[a]})],e)}();e.TuiForAsyncDirective=a,e.TuiForAsyncModule=s,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=taiga-ui-cdk-directives-for-async.umd.min.js.map