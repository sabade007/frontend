!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms"),require("@taiga-ui/cdk/classes"),require("@taiga-ui/cdk/constants"),require("@taiga-ui/cdk/decorators"),require("@taiga-ui/cdk/utils"),require("rxjs"),require("rxjs/operators"),require("@tinkoff/ng-polymorpheus"),require("@taiga-ui/cdk/services"),require("@taiga-ui/cdk/exceptions"),require("@angular/common")):"function"==typeof define&&define.amd?define("@taiga-ui/cdk/abstract",["exports","@angular/core","@angular/forms","@taiga-ui/cdk/classes","@taiga-ui/cdk/constants","@taiga-ui/cdk/decorators","@taiga-ui/cdk/utils","rxjs","rxjs/operators","@tinkoff/ng-polymorpheus","@taiga-ui/cdk/services","@taiga-ui/cdk/exceptions","@angular/common"],t):t(((e=e||self)["taiga-ui"]=e["taiga-ui"]||{},e["taiga-ui"].cdk=e["taiga-ui"].cdk||{},e["taiga-ui"].cdk.abstract={}),e.ng.core,e.ng.forms,e["taiga-ui"].cdk.classes,e["taiga-ui"].cdk.constants,e["taiga-ui"].cdk.decorators,e["taiga-ui"].cdk.utils,e.rxjs,e.rxjs.operators,e.ngPolymorpheus,e["taiga-ui"].cdk.services,e["taiga-ui"].cdk.exceptions,e.ng.common)}(this,(function(e,t,o,n,r,i,u,a,s,c,l,p,d){"use strict";var f=function(e,t){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)};function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}f(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}var g=function(){return(g=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function y(e,t,o,n){var r,i=arguments.length,u=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(u=(i<3?r(u):i>3?r(t,o,u):r(t,o))||u);return i>3&&u&&Object.defineProperty(t,o,u),u}function v(e,t){return function(o,n){t(o,n,e)}}Object.create;function b(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var n,r,i=o.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)u.push(n.value)}catch(e){r={error:e}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return u}Object.create;var m=function(){function e(){this.pseudoHovered=null,this.pseudoPressed=null,this.pseudoFocused=null,this.focusable=!0,this.nativeId="",this.focusedChange=new t.EventEmitter,this.pressedChange=new t.EventEmitter,this.hoveredChange=new t.EventEmitter,this.focusVisibleChange=new t.EventEmitter,this.hovered=!1,this.pressed=!1,this.focusVisible=!1,this.autoIdString="tui_interactive_"+o.autoId+++Date.now()}var o;return o=e,Object.defineProperty(e.prototype,"computedDisabled",{get:function(){return this.disabled},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"computedHovered",{get:function(){var e;return!this.computedDisabled&&(null!==(e=this.pseudoHovered)&&void 0!==e?e:this.hovered)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"computedPressed",{get:function(){var e;return!this.computedDisabled&&(null!==(e=this.pseudoPressed)&&void 0!==e?e:this.pressed)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"computedFocusable",{get:function(){return!this.computedDisabled&&(this.focusable||this.focused)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"computedFocused",{get:function(){var e;return!this.computedDisabled&&(null!==(e=this.pseudoFocused)&&void 0!==e?e:this.focused)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"computedFocusVisible",{get:function(){var e;return!this.computedDisabled&&(null!==(e=this.pseudoFocused)&&void 0!==e?e:this.focusVisible)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.nativeId?this.nativeId:this.autoIdString},enumerable:!0,configurable:!0}),e.prototype.updateHovered=function(e){this.hovered!==e&&(this.hovered=e,this.hoveredChange.emit(e))},e.prototype.updatePressed=function(e){this.pressed!==e&&(this.pressed=e,this.pressedChange.emit(e))},e.prototype.updateFocused=function(e){this.focusedChange.emit(e)},e.prototype.updateFocusVisible=function(e){this.focusVisible!==e&&(this.focusVisible=e,this.focusVisibleChange.emit(e))},e.autoId=0,y([t.Input(),i.tuiDefaultProp()],e.prototype,"pseudoHovered",void 0),y([t.Input(),i.tuiDefaultProp()],e.prototype,"pseudoPressed",void 0),y([t.Input(),i.tuiDefaultProp()],e.prototype,"pseudoFocused",void 0),y([t.Input(),i.tuiDefaultProp()],e.prototype,"focusable",void 0),y([t.Input(),i.tuiDefaultProp()],e.prototype,"nativeId",void 0),y([t.Output()],e.prototype,"focusedChange",void 0),y([t.Output()],e.prototype,"pressedChange",void 0),y([t.Output()],e.prototype,"hoveredChange",void 0),y([t.Output()],e.prototype,"focusVisibleChange",void 0),y([t.HostBinding("class._disabled")],e.prototype,"computedDisabled",null),y([t.HostBinding("class._hovered")],e.prototype,"computedHovered",null),y([t.HostBinding("class._pressed")],e.prototype,"computedPressed",null),y([t.HostBinding("class._focused")],e.prototype,"computedFocused",null),y([t.HostBinding("class._focus-visible")],e.prototype,"computedFocusVisible",null),e=o=y([t.Directive()],e)}(),C=function(e){function c(t,o,i){var u=e.call(this)||this;return u.ngControl=t,u.changeDetectorRef=o,u.valueTransformer=i,u.refresh$=new a.Subject,u.onTouched=r.EMPTY_FUNCTION,u.onChange=r.EMPTY_FUNCTION,u.fallbackValue=u.getFallbackValue(),u.destroy$=new a.Subject,u.readOnly=!1,u.pseudoInvalid=null,null===u.ngControl?n.tuiAssert.assert(!1,"NgControl not injected in "+u.constructor.name+"!\n","Use [(ngModel)] or [formControl] or formControlName for correct work."):u.ngControl.valueAccessor=u,u}return h(c,e),Object.defineProperty(c.prototype,"computedInvalid",{get:function(){return this.interactive&&(null!==this.pseudoInvalid?this.pseudoInvalid:this.touched&&this.invalid)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"value",{get:function(){var e;return null!==(e=this.previousInternalValue)&&void 0!==e?e:this.fallbackValue},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"safeCurrentValue",{get:function(){var e;return null!==(e=this.rawValue)&&void 0!==e?e:this.fallbackValue},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"invalid",{get:function(){return this.safeNgControlData((function(e){return e.invalid}),!1)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"valid",{get:function(){return this.safeNgControlData((function(e){return e.valid}),!1)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"touched",{get:function(){return this.safeNgControlData((function(e){return e.touched}),!1)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"disabled",{get:function(){return this.safeNgControlData((function(e){return e.disabled}),!1)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"interactive",{get:function(){return!this.readOnly&&!this.computedDisabled},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"control",{get:function(){return this.safeNgControlData((function(e){return e.control}),null)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"computedName",{get:function(){var e,t;return null!==(t=null===(e=this.controlName)||void 0===e?void 0:e.toString())&&void 0!==t?t:null},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"controlName",{get:function(){var e,t,o;return null!==(o=null===(t=null===(e=this.ngControl)||void 0===e?void 0:e.name)||void 0===t?void 0:t.toString())&&void 0!==o?o:null},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"rawValue",{get:function(){var e=this.ngControl;if(null!==e){var t=e instanceof o.NgModel&&void 0===this.previousInternalValue?e.viewModel:e.value;return this.fromControlValue(t)}},enumerable:!0,configurable:!0}),c.prototype.ngOnInit=function(){var e=this;this.refresh$.pipe(s.delay(0),s.startWith(null),s.map((function(){var t;return null===(t=e.ngControl)||void 0===t?void 0:t.control})),s.filter(u.tuiIsPresent),s.distinctUntilChanged(),s.switchMap((function(e){return a.merge(e.valueChanges,e.statusChanges)})),s.takeUntil(this.destroy$)).subscribe((function(){e.refreshLocalValue(e.safeCurrentValue)}))},c.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},c.prototype.checkControlUpdate=function(){this.changeDetectorRef.markForCheck()},c.prototype.registerOnChange=function(e){var t=this;this.onChange=function(o){e(t.toControlValue(o))},this.refresh$.next()},c.prototype.registerOnTouched=function(e){this.onTouched=e},c.prototype.setDisabledState=function(){this.checkControlUpdate()},c.prototype.writeValue=function(e){var t=this.ngControl instanceof o.NgModel&&void 0===this.previousInternalValue?this.ngControl.model:e;this.refreshLocalValue(this.fromControlValue(t))},c.prototype.updateFocused=function(t){t||this.controlMarkAsTouched(),e.prototype.updateFocused.call(this,t)},c.prototype.updateValue=function(e){this.disabled||this.valueIdenticalComparator(this.value,e)||(this.previousInternalValue=e,this.controlSetValue(e))},c.prototype.valueIdenticalComparator=function(e,t){return e===t},c.prototype.safeNgControlData=function(e,t){var o;return null!==(o=this.ngControl&&e(this.ngControl))&&void 0!==o?o:t},c.prototype.controlMarkAsTouched=function(){this.onTouched(),this.checkControlUpdate()},c.prototype.controlSetValue=function(e){this.onChange(e),this.checkControlUpdate()},c.prototype.refreshLocalValue=function(e){this.previousInternalValue=e,this.checkControlUpdate()},c.prototype.fromControlValue=function(e){return this.valueTransformer?this.valueTransformer.fromControlValue(e):e},c.prototype.toControlValue=function(e){return this.valueTransformer?this.valueTransformer.toControlValue(e):e},c.ctorParameters=function(){return[{type:o.NgControl},{type:t.ChangeDetectorRef},{type:void 0}]},y([t.Input(),t.HostBinding("class._readonly"),i.tuiDefaultProp()],c.prototype,"readOnly",void 0),y([t.Input(),i.tuiDefaultProp()],c.prototype,"pseudoInvalid",void 0),y([t.HostBinding("class._invalid")],c.prototype,"computedInvalid",null),c=y([t.Directive()],c)}(m),j=function(){function e(){this.change$=new a.Subject}return e.prototype.ngOnChanges=function(){this.change$.next()},e}(),O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return h(t,e),t}(j),P=function(e){function o(t){var o=e.call(this,(function(e){return o.dialogs$.subscribe(e)}))||this;return o.idService=t,o.dialogs$=new a.BehaviorSubject([]),o}return h(o,e),o.prototype.open=function(e,t){var o=this;return void 0===t&&(t={}),new a.Observable((function(n){var r=g(g(g({},o.defaultOptions),t),{content:e,completeWith:function(e){n.next(e),n.complete()},$implicit:n,component:o.component,createdAt:Date.now(),id:o.idService.generate()});return o.dialogs$.next(function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(b(arguments[t]));return e}(o.dialogs$.value,[r])),function(){o.dialogs$.next(o.dialogs$.value.filter((function(e){return e!==r})))}}))},o.ctorParameters=function(){return[{type:l.TuiIdService,decorators:[{type:t.Inject,args:[l.TuiIdService]}]}]},o=y([t.Injectable(),v(0,t.Inject(l.TuiIdService))],o)}(a.Observable),I=function(e){function o(t,o,n){var r=e.call(this,t,o)||this;return r.service=n,r.open$=new a.Subject,r.options={},r.openChange=r.open$.pipe(s.switchMap((function(e){return e?r.service.open(r,r.options).pipe(s.ignoreElements(),s.endWith(!1)):a.EMPTY}))),r}return h(o,e),Object.defineProperty(o.prototype,"open",{set:function(e){this.open$.next(e)},enumerable:!0,configurable:!0}),o.ctorParameters=function(){return[{type:t.TemplateRef,decorators:[{type:t.Inject,args:[t.TemplateRef]}]},{type:t.ChangeDetectorRef,decorators:[{type:t.Inject,args:[t.ChangeDetectorRef]}]},{type:P,decorators:[{type:t.Inject,args:[P]}]}]},o=y([t.Directive(),v(0,t.Inject(t.TemplateRef)),v(1,t.Inject(t.ChangeDetectorRef)),v(2,t.Inject(P))],o)}(c.PolymorpheusTemplate),T=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return h(o,e),o.prototype.clear=function(){this.updateValue([])},o.prototype.getFallbackValue=function(){return[]},o=y([t.Directive()],o)}(C),D=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return h(o,e),o.prototype.getFallbackValue=function(){return null},o=y([t.Directive()],o)}(C),V=function(){function e(){}return Object.defineProperty(e.prototype,"safeHost",{get:function(){if(!this.host)throw new p.TuiNoHostException;return this.host},enumerable:!0,configurable:!0}),e.prototype.attach=function(e){this.host=e},e.prototype.add=function(e,t){return this.safeHost.addComponentChild(e,t)},e.prototype.remove=function(e){e.hostView.destroy()},e.prototype.addTemplate=function(e,t){return this.safeHost.addTemplateChild(e,t)},e.prototype.removeTemplate=function(e){e.destroy()},e=y([t.Injectable()],e)}(),k=function(){function e(e,t){this.elementRef=e,t.attach(this)}var o;return o=e,Object.defineProperty(e.prototype,"clientRect",{get:function(){return this.elementRef.nativeElement.getBoundingClientRect()},enumerable:!0,configurable:!0}),e.prototype.addComponentChild=function(e,n){return this.viewContainerRef.createComponent(e,void 0,t.Injector.create({parent:n,providers:[{provide:o,useValue:this}]}))},e.prototype.addTemplateChild=function(e,t){return this.viewContainerRef.createEmbeddedView(e,t)},e.ctorParameters=function(){return[{type:t.ElementRef,decorators:[{type:t.Inject,args:[t.ElementRef]}]},{type:V,decorators:[{type:t.Inject,args:[V]}]}]},y([t.ViewChild("viewContainer",{read:t.ViewContainerRef})],e.prototype,"viewContainerRef",void 0),e=o=y([t.Directive(),v(0,t.Inject(t.ElementRef)),v(1,t.Inject(V))],e)}(),w=function(){function e(e){if(this.documentRef=e,null===this.style){var t=this.documentRef.head.querySelectorAll("style");this.constructor.style=t[t.length-1]}else this.addTheme()}return e,Object.defineProperty(e.prototype,"style",{get:function(){return this.constructor.style},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){this.removeTheme()},e.prototype.addTheme=function(){this.style&&this.documentRef.head.appendChild(this.style)},e.prototype.removeTheme=function(){this.style&&this.documentRef.head.contains(this.style)&&this.documentRef.head.removeChild(this.style)},e.style=null,e.ctorParameters=function(){return[{type:Document,decorators:[{type:t.Inject,args:[d.DOCUMENT]}]}]},e=y([t.Directive(),v(0,t.Inject(d.DOCUMENT))],e)}();e.AbstractTuiControl=C,e.AbstractTuiController=O,e.AbstractTuiDialogDirective=I,e.AbstractTuiDialogService=P,e.AbstractTuiInteractive=m,e.AbstractTuiMultipleControl=T,e.AbstractTuiNullableControl=D,e.AbstractTuiPortalHostComponent=k,e.AbstractTuiPortalService=V,e.AbstractTuiThemeSwitcher=w,e.TuiController=j,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=taiga-ui-cdk-abstract.umd.min.js.map