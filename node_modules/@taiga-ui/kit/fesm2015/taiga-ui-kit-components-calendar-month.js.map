{"version":3,"file":"taiga-ui-kit-components-calendar-month.js","sources":["ng://@taiga-ui/kit/components/calendar-month/calendar-month.component.ts","ng://@taiga-ui/kit/components/calendar-month/calendar-month.module.ts","ng://@taiga-ui/kit/components/calendar-month/taiga-ui-kit-components-calendar-month.ts"],"sourcesContent":["import {\n    ChangeDetectionStrategy,\n    Component,\n    EventEmitter,\n    HostBinding,\n    Inject,\n    Input,\n    Output,\n} from '@angular/core';\nimport {\n    ALWAYS_FALSE_HANDLER,\n    nullableSame,\n    TUI_FIRST_DAY,\n    TUI_LAST_DAY,\n    TuiBooleanHandler,\n    TuiDay,\n    tuiDefaultProp,\n    TuiMonth,\n    TuiMonthRange,\n    tuiPure,\n    TuiYear,\n} from '@taiga-ui/cdk';\nimport {TuiInteractiveState, TuiRangeState, TuiWithOptionalMinMax} from '@taiga-ui/core';\nimport {TuiMonthContext} from '@taiga-ui/kit/interfaces';\nimport {TUI_CALENDAR_MONTHS} from '@taiga-ui/kit/tokens';\nimport {TuiBooleanHandlerWithContext} from '@taiga-ui/kit/types';\nimport {Observable} from 'rxjs';\n\nconst TODAY = TuiDay.currentLocal();\n\n// @dynamic\n@Component({\n    selector: 'tui-calendar-month',\n    templateUrl: './calendar-month.template.html',\n    styleUrls: ['./calendar-month.style.less'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TuiCalendarMonthComponent implements TuiWithOptionalMinMax<TuiMonth> {\n    @Input()\n    @tuiDefaultProp()\n    value: TuiMonth | TuiMonthRange | null = null;\n\n    @Input()\n    @tuiDefaultProp()\n    year: TuiYear = TODAY;\n\n    @Input()\n    @tuiDefaultProp()\n    disabledItemHandler: TuiBooleanHandlerWithContext<TuiMonth, TuiMonthContext> =\n        ALWAYS_FALSE_HANDLER;\n\n    @Input()\n    @tuiDefaultProp()\n    min: TuiMonth = TUI_FIRST_DAY;\n\n    @Input()\n    @tuiDefaultProp()\n    max: TuiMonth = TUI_LAST_DAY;\n\n    @Output()\n    readonly monthClick = new EventEmitter<TuiMonth>();\n\n    @Output()\n    readonly hoveredItemChange = new EventEmitter<TuiMonth | null>();\n\n    @Output()\n    readonly yearChange = new EventEmitter<TuiYear>();\n\n    isYearPickerShown = false;\n\n    hoveredItem: TuiMonth | null = null;\n    pressedItem: TuiMonth | null = null;\n\n    constructor(\n        @Inject(TUI_CALENDAR_MONTHS) readonly months$: Observable<readonly string[]>,\n    ) {}\n\n    @HostBinding('class._single')\n    get isSingle(): boolean {\n        return (\n            this.value !== null &&\n            (this.value instanceof TuiMonth || this.value.isSingleMonth)\n        );\n    }\n\n    get previousYearDisabled(): boolean {\n        return this.year.yearSameOrBefore(this.min);\n    }\n\n    get nextYearDisabled(): boolean {\n        return this.year.yearSameOrAfter(this.max);\n    }\n\n    getItemState(item: TuiMonth): TuiInteractiveState | null {\n        const {disabledItemHandlerWithMinMax, pressedItem, hoveredItem} = this;\n\n        if (disabledItemHandlerWithMinMax(item)) {\n            return TuiInteractiveState.Disabled;\n        }\n\n        if (pressedItem?.monthSame(item)) {\n            return TuiInteractiveState.Pressed;\n        }\n\n        if (hoveredItem?.monthSame(item)) {\n            return TuiInteractiveState.Hovered;\n        }\n\n        return null;\n    }\n\n    getItemRange(item: TuiMonth): TuiRangeState | null {\n        const {value, hoveredItem} = this;\n\n        if (value === null) {\n            return null;\n        }\n\n        if (value instanceof TuiMonth) {\n            return value.monthSame(item) ? TuiRangeState.Single : null;\n        }\n\n        const theFirstOfRange = value.from.monthSame(item) && !value.isSingleMonth;\n        const hoveredItemAfterFrom =\n            hoveredItem?.monthAfter(value.from) &&\n            value.from.monthSame(item) &&\n            value.isSingleMonth;\n        const hoveredItemIsCandidateToBeFrom =\n            hoveredItem?.monthSame(item) &&\n            hoveredItem?.monthBefore(value.from) &&\n            value.isSingleMonth;\n\n        if (theFirstOfRange || hoveredItemAfterFrom || hoveredItemIsCandidateToBeFrom) {\n            return TuiRangeState.Start;\n        }\n\n        const theLastOfRange = value.to.monthSame(item) && !value.isSingleMonth;\n        const hoveredItemBeforeTo =\n            value.to.monthSame(item) &&\n            hoveredItem?.monthBefore(value.to) &&\n            value.isSingleMonth;\n        const hoveredItemIsCandidateToBeTo =\n            hoveredItem?.monthSame(item) &&\n            hoveredItem?.monthAfter(value.from) &&\n            value.isSingleMonth;\n\n        if (theLastOfRange || hoveredItemBeforeTo || hoveredItemIsCandidateToBeTo) {\n            return TuiRangeState.End;\n        }\n\n        return value.isSingleMonth && value.from.monthSame(item)\n            ? TuiRangeState.Single\n            : null;\n    }\n\n    getTuiMonth(monthNumber: number, yearNumber: number): TuiMonth {\n        return new TuiMonth(yearNumber, monthNumber);\n    }\n\n    isItemToday(item: TuiMonth): boolean {\n        return TODAY.monthSame(item);\n    }\n\n    isItemInsideRange(month: TuiMonth): boolean {\n        const {value, hoveredItem} = this;\n\n        if (value === null || value instanceof TuiMonth) {\n            return false;\n        }\n\n        if (!value.isSingleMonth) {\n            return value.from.monthSameOrBefore(month) && value.to.monthAfter(month);\n        }\n\n        if (hoveredItem === null) {\n            return false;\n        }\n\n        const range = TuiMonthRange.sort(value.from, hoveredItem);\n\n        return range.from.monthSameOrBefore(month) && range.to.monthAfter(month);\n    }\n\n    onPickerYearClick(year: TuiYear): void {\n        this.isYearPickerShown = false;\n\n        if (this.year.yearSame(year)) {\n            return;\n        }\n\n        this.updateActiveYear(year);\n    }\n\n    onItemClick(month: TuiMonth): void {\n        if (this.disabledItemHandlerWithMinMax(month)) {\n            return;\n        }\n\n        this.monthClick.emit(month);\n    }\n\n    onYearClick(): void {\n        this.isYearPickerShown = true;\n    }\n\n    onNextYear(): void {\n        this.updateActiveYear(this.year.append({year: 1}));\n    }\n\n    onPreviousYear(): void {\n        this.updateActiveYear(this.year.append({year: -1}));\n    }\n\n    onItemHovered(hovered: boolean, item: TuiMonth): void {\n        this.updateHoveredItem(hovered ? item : null);\n    }\n\n    onItemPressed(pressed: boolean, item: TuiMonth): void {\n        this.updatePressedItem(pressed ? item : null);\n    }\n\n    @tuiPure\n    private calculateDisabledItemHandlerWithMinMax(\n        disabledItemHandler: TuiBooleanHandlerWithContext<TuiMonth, TuiMonthContext>,\n        value: TuiMonth | TuiMonthRange | null,\n        min: TuiMonth,\n        max: TuiMonth,\n    ): TuiBooleanHandler<TuiMonth> {\n        return item =>\n            item.monthBefore(min) ||\n            item.monthAfter(max) ||\n            disabledItemHandler(item, {value});\n    }\n\n    private get disabledItemHandlerWithMinMax(): TuiBooleanHandler<TuiMonth> {\n        return this.calculateDisabledItemHandlerWithMinMax(\n            this.disabledItemHandler,\n            this.value,\n            this.min,\n            this.max,\n        );\n    }\n\n    private updateHoveredItem(month: TuiMonth | null): void {\n        if (nullableSame(this.hoveredItem, month, (a, b) => a.monthSame(b))) {\n            return;\n        }\n\n        this.hoveredItem = month;\n        this.hoveredItemChange.emit(month);\n    }\n\n    private updatePressedItem(item: TuiMonth | null): void {\n        this.pressedItem = item;\n    }\n\n    private updateActiveYear(year: TuiYear): void {\n        this.year = year;\n        this.yearChange.emit(year);\n    }\n}\n","import {CommonModule} from '@angular/common';\nimport {NgModule} from '@angular/core';\nimport {\n    TuiFocusableModule,\n    TuiHoveredModule,\n    TuiLetModule,\n    TuiPressedModule,\n} from '@taiga-ui/cdk';\nimport {\n    TuiLinkModule,\n    TuiPrimitiveSpinButtonModule,\n    TuiPrimitiveYearPickerModule,\n    TuiScrollbarModule,\n} from '@taiga-ui/core';\n\nimport {TuiCalendarMonthComponent} from './calendar-month.component';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        TuiPrimitiveYearPickerModule,\n        TuiPrimitiveSpinButtonModule,\n        TuiScrollbarModule,\n        TuiLinkModule,\n        TuiLetModule,\n        TuiHoveredModule,\n        TuiPressedModule,\n        TuiFocusableModule,\n    ],\n    declarations: [TuiCalendarMonthComponent],\n    exports: [TuiCalendarMonthComponent],\n})\nexport class TuiCalendarMonthModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}