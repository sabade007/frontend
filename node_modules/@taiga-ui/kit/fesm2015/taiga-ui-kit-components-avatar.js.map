{"version":3,"file":"taiga-ui-kit-components-avatar.js","sources":["ng://@taiga-ui/kit/components/avatar/avatar-options.ts","ng://@taiga-ui/kit/components/avatar/avatar.component.ts","ng://@taiga-ui/kit/components/avatar/avatar.module.ts","ng://@taiga-ui/kit/components/avatar/taiga-ui-kit-components-avatar.ts"],"sourcesContent":["import {InjectionToken, ValueProvider} from '@angular/core';\nimport {TuiSizeXS, TuiSizeXXL} from '@taiga-ui/core';\n\nexport interface TuiAvatarOptions {\n    readonly size: TuiSizeXS | TuiSizeXXL;\n    readonly autoColor: boolean;\n    readonly rounded: boolean;\n}\n\n/** Default values for the avatar options. */\nexport const TUI_AVATAR_DEFAULT_OPTIONS: TuiAvatarOptions = {\n    size: `m`,\n    autoColor: false,\n    rounded: false,\n};\n\nexport const TUI_AVATAR_OPTIONS = new InjectionToken<TuiAvatarOptions>(\n    `Default parameters for avatar component`,\n    {\n        factory: () => TUI_AVATAR_DEFAULT_OPTIONS,\n    },\n);\n\nexport const tuiAvatarOptionsProvider: (\n    options: Partial<TuiAvatarOptions>,\n) => ValueProvider = (options: Partial<TuiAvatarOptions>) => ({\n    provide: TUI_AVATAR_OPTIONS,\n    useValue: {...TUI_AVATAR_DEFAULT_OPTIONS, ...options},\n});\n","import {\n    ChangeDetectionStrategy,\n    Component,\n    HostBinding,\n    Inject,\n    Input,\n} from '@angular/core';\nimport {SafeResourceUrl} from '@angular/platform-browser';\nimport {tuiDefaultProp, tuiRequiredSetter} from '@taiga-ui/cdk';\nimport {sizeBigger} from '@taiga-ui/core';\nimport {stringHashToHsl} from '@taiga-ui/kit/utils/format';\n\nimport {TUI_AVATAR_OPTIONS, TuiAvatarOptions} from './avatar-options';\n\n@Component({\n    selector: 'tui-avatar',\n    templateUrl: './avatar.template.html',\n    styleUrls: ['./avatar.style.less'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TuiAvatarComponent {\n    @Input()\n    @HostBinding('attr.data-size')\n    @tuiDefaultProp()\n    size = this.options.size;\n\n    @Input('avatarUrl')\n    @tuiRequiredSetter()\n    set avatarUrlSetter(avatarUrl: SafeResourceUrl | string | null) {\n        this.avatarUrl = avatarUrl;\n        this.isUrlValid = !!avatarUrl && !this.iconAvatar;\n    }\n\n    @Input()\n    @tuiDefaultProp()\n    text = '';\n\n    @Input()\n    @tuiDefaultProp()\n    autoColor: boolean = this.options.autoColor;\n\n    @Input()\n    @HostBinding('class._rounded')\n    @tuiDefaultProp()\n    rounded: boolean = this.options.rounded;\n\n    avatarUrl: SafeResourceUrl | string | null = null;\n\n    isUrlValid = false;\n\n    constructor(@Inject(TUI_AVATAR_OPTIONS) private readonly options: TuiAvatarOptions) {}\n\n    @HostBinding('style.background')\n    get bgColor(): string {\n        return this.autoColor ? stringHashToHsl(this.text) : '';\n    }\n\n    @HostBinding('class._has-avatar')\n    get hasAvatar(): boolean {\n        return this.avatarUrl !== null && this.isUrlValid;\n    }\n\n    get iconAvatar(): boolean {\n        return (\n            typeof this.avatarUrl === 'string' && !!this.avatarUrl?.startsWith('tuiIcon')\n        );\n    }\n\n    get computedText(): string {\n        if (this.hasAvatar || this.iconAvatar || this.text === '') {\n            return '';\n        }\n\n        const words = this.text.split(' ');\n\n        return words.length > 1 && sizeBigger(this.size)\n            ? words[0].slice(0, 1) + words[1].slice(0, 1)\n            : words[0].slice(0, 1);\n    }\n\n    get stringAvatar(): string {\n        return this.iconAvatar ? String(this.avatarUrl) : '';\n    }\n\n    onError(): void {\n        this.isUrlValid = false;\n    }\n}\n","import {CommonModule} from '@angular/common';\nimport {NgModule} from '@angular/core';\nimport {TuiSvgModule} from '@taiga-ui/core';\nimport {TuiLazyLoadingModule} from '@taiga-ui/kit/directives';\n\nimport {TuiAvatarComponent} from './avatar.component';\n\n@NgModule({\n    imports: [CommonModule, TuiLazyLoadingModule, TuiSvgModule],\n    declarations: [TuiAvatarComponent],\n    exports: [TuiAvatarComponent],\n})\nexport class TuiAvatarModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}