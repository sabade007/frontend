{"version":3,"file":"taiga-ui-kit-components-stepper.js","sources":["ng://@taiga-ui/kit/components/stepper/stepper.component.ts","ng://@taiga-ui/kit/components/stepper/step/step.component.ts","ng://@taiga-ui/kit/components/stepper/stepper.module.ts","ng://@taiga-ui/kit/components/stepper/taiga-ui-kit-components-stepper.ts"],"sourcesContent":["import {\n    ChangeDetectionStrategy,\n    ChangeDetectorRef,\n    Component,\n    ContentChildren,\n    ElementRef,\n    EventEmitter,\n    forwardRef,\n    HostBinding,\n    HostListener,\n    Inject,\n    Input,\n    Output,\n    QueryList,\n} from '@angular/core';\nimport {\n    EMPTY_QUERY,\n    tuiAssertIsHTMLElement,\n    tuiDefaultProp,\n    TuiDestroyService,\n    tuiGetOriginalArrayFromQueryList,\n    tuiItemsQueryListObservable,\n    tuiMoveFocus,\n    tuiPure,\n    TuiResizeService,\n    TuiScrollService,\n} from '@taiga-ui/cdk';\nimport {TUI_ANIMATIONS_DURATION, TuiOrientationT} from '@taiga-ui/core';\nimport {Observable} from 'rxjs';\nimport {delay} from 'rxjs/operators';\n\nimport {TuiStepComponent} from './step/step.component';\n\n@Component({\n    selector: 'tui-stepper, nav[tuiStepper]',\n    templateUrl: './stepper.template.html',\n    styleUrls: ['./stepper.style.less'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    providers: [TuiResizeService, TuiDestroyService],\n})\nexport class TuiStepperComponent {\n    @ContentChildren(forwardRef(() => TuiStepComponent), {read: ElementRef})\n    private readonly steps: QueryList<ElementRef<HTMLElement>> = EMPTY_QUERY;\n\n    @Input()\n    @HostBinding('attr.data-orientation')\n    @tuiDefaultProp()\n    orientation: TuiOrientationT = 'horizontal';\n\n    @Input('activeItemIndex')\n    set activeIndex(index: number) {\n        this.activeItemIndex = index;\n        this.scrollIntoView(index);\n    }\n\n    @Output()\n    readonly activeItemIndexChange = new EventEmitter<number>();\n\n    activeItemIndex = 0;\n\n    constructor(\n        @Inject(ChangeDetectorRef) private readonly changeDetectorRef: ChangeDetectorRef,\n        @Inject(ElementRef) private readonly elementRef: ElementRef<HTMLElement>,\n        @Inject(TuiScrollService) private readonly scrollService: TuiScrollService,\n        @Inject(TuiResizeService) resize$: Observable<void>,\n        @Inject(TUI_ANIMATIONS_DURATION) private readonly duration: number,\n    ) {\n        resize$.subscribe(() => this.scrollIntoView(this.activeItemIndex));\n    }\n\n    @tuiPure\n    get changes$(): Observable<unknown> {\n        // Delay is required to trigger change detection after steps are rendered,\n        // so they can update their \"active\" status\n        return tuiItemsQueryListObservable(this.steps).pipe(delay(0));\n    }\n\n    @HostListener('keydown.arrowRight', ['$event', '1'])\n    @HostListener('keydown.arrowLeft', ['$event', '-1'])\n    onHorizontal(event: Event, step: number): void {\n        if (this.orientation !== 'horizontal' || !event.target) {\n            return;\n        }\n\n        event.preventDefault();\n        this.moveFocus(event.target, step);\n    }\n\n    @HostListener('keydown.arrowDown', ['$event', '1'])\n    @HostListener('keydown.arrowUp', ['$event', '-1'])\n    onVertical(event: Event, step: number): void {\n        if (this.orientation !== 'vertical' || !event.target) {\n            return;\n        }\n\n        event.preventDefault();\n        this.moveFocus(event.target, step);\n    }\n\n    indexOf(step: HTMLElement): number {\n        return tuiGetOriginalArrayFromQueryList(this.steps).findIndex(\n            ({nativeElement}) => nativeElement === step,\n        );\n    }\n\n    isActive(index: number): boolean {\n        return index === this.activeItemIndex;\n    }\n\n    activate(index: number): void {\n        if (this.activeItemIndex === index) {\n            return;\n        }\n\n        this.activeItemIndex = index;\n        this.activeItemIndexChange.emit(index);\n        this.changeDetectorRef.markForCheck();\n        this.scrollIntoView(index);\n    }\n\n    @tuiPure\n    private getNativeElements(\n        queryList: QueryList<ElementRef<HTMLElement>>,\n    ): HTMLElement[] {\n        return queryList.map(({nativeElement}) => nativeElement);\n    }\n\n    private moveFocus(current: EventTarget, step: number): void {\n        tuiAssertIsHTMLElement(current);\n\n        const stepElements = this.getNativeElements(this.steps);\n\n        tuiMoveFocus(stepElements.indexOf(current), stepElements, step);\n    }\n\n    private scrollIntoView(index: number): void {\n        const step = this.getNativeElements(this.steps)[index];\n\n        if (!step) {\n            return;\n        }\n\n        const {nativeElement} = this.elementRef;\n        const {clientHeight, clientWidth, offsetTop, offsetLeft} = nativeElement;\n        const {\n            offsetHeight,\n            offsetWidth,\n            offsetTop: stepOffsetTop,\n            offsetLeft: stepOffsetLeft,\n        } = step;\n        const top = stepOffsetTop - offsetTop - clientHeight / 2 + offsetHeight / 2;\n        const left = stepOffsetLeft - offsetLeft - clientWidth / 2 + offsetWidth / 2;\n\n        this.scrollService\n            .scroll$(\n                nativeElement,\n                Math.max(0, top),\n                Math.max(0, left),\n                this.duration / 3,\n            )\n            .subscribe();\n    }\n}\n","import {\n    ChangeDetectionStrategy,\n    Component,\n    ElementRef,\n    HostBinding,\n    HostListener,\n    Inject,\n    Input,\n} from '@angular/core';\nimport {tuiDefaultProp, TuiDestroyService, TuiFocusVisibleService} from '@taiga-ui/cdk';\nimport {TuiRouterLinkActiveService} from '@taiga-ui/core';\nimport {identity, Observable} from 'rxjs';\nimport {filter} from 'rxjs/operators';\n\nimport {TuiStepperComponent} from '../stepper.component';\n\n@Component({\n    selector:\n        'button[tuiStep], a[tuiStep]:not([routerLink]), a[tuiStep][routerLink][routerLinkActive]',\n    templateUrl: './step.template.html',\n    styleUrls: ['./step.style.less'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    providers: [TuiDestroyService, TuiRouterLinkActiveService, TuiFocusVisibleService],\n    host: {\n        type: 'button',\n    },\n})\nexport class TuiStepComponent {\n    @Input()\n    @HostBinding('attr.data-state')\n    @tuiDefaultProp()\n    state: 'error' | 'normal' | 'pass' = 'normal';\n\n    @Input()\n    @tuiDefaultProp()\n    icon = '';\n\n    @HostBinding('class._focus-visible')\n    focusVisible = false;\n\n    constructor(\n        @Inject(TuiFocusVisibleService) focusVisible$: TuiFocusVisibleService,\n        @Inject(TuiRouterLinkActiveService) routerLinkActive$: Observable<boolean>,\n        @Inject(TuiStepperComponent) private readonly stepper: TuiStepperComponent,\n        @Inject(ElementRef) private readonly elementRef: ElementRef<HTMLElement>,\n    ) {\n        routerLinkActive$.pipe(filter(identity)).subscribe(() => {\n            this.activate();\n        });\n\n        focusVisible$.subscribe(visible => {\n            this.focusVisible = visible;\n        });\n    }\n\n    @HostBinding('class._active')\n    get isActive(): boolean {\n        return this.stepper.isActive(this.index);\n    }\n\n    @HostBinding('class._vertical')\n    get isVertical(): boolean {\n        return this.stepper.orientation === 'vertical';\n    }\n\n    @HostBinding('tabIndex')\n    get tabIndex(): number {\n        return this.isActive ? 0 : -1;\n    }\n\n    get index(): number {\n        return this.stepper.indexOf(this.elementRef.nativeElement);\n    }\n\n    @HostListener('click')\n    activate(): void {\n        this.stepper.activate(this.index);\n    }\n}\n","import {CommonModule} from '@angular/common';\nimport {NgModule} from '@angular/core';\nimport {TuiSvgModule} from '@taiga-ui/core';\n\nimport {TuiStepComponent} from './step/step.component';\nimport {TuiStepperComponent} from './stepper.component';\n\n@NgModule({\n    imports: [CommonModule, TuiSvgModule],\n    declarations: [TuiStepperComponent, TuiStepComponent],\n    exports: [TuiStepperComponent, TuiStepComponent],\n})\nexport class TuiStepperModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}