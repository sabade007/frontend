{"version":3,"file":"taiga-ui-kit-components-pagination.js","sources":["ng://@taiga-ui/kit/components/pagination/pagination.component.ts","ng://@taiga-ui/kit/components/pagination/pagination.module.ts","ng://@taiga-ui/kit/components/pagination/taiga-ui-kit-components-pagination.ts"],"sourcesContent":["import {\n    ChangeDetectionStrategy,\n    Component,\n    ElementRef,\n    EventEmitter,\n    forwardRef,\n    Inject,\n    Input,\n    Optional,\n    Output,\n    QueryList,\n    ViewChildren,\n} from '@angular/core';\nimport {\n    AbstractTuiInteractive,\n    clamp,\n    EMPTY_QUERY,\n    isNativeFocusedIn,\n    setNativeFocused,\n    TUI_FOCUSABLE_ITEM_ACCESSOR,\n    TuiContextWithImplicit,\n    tuiDefaultProp,\n    TuiFocusableElementAccessor,\n    TuiNativeFocusableElement,\n} from '@taiga-ui/cdk';\nimport {\n    TuiAppearance,\n    TuiBrightness,\n    TuiButtonComponent,\n    TuiHorizontalDirection,\n    TuiModeDirective,\n    TuiSizeS,\n} from '@taiga-ui/core';\nimport {TUI_PAGINATION_TEXTS} from '@taiga-ui/kit/tokens';\nimport {tuiHorizontalDirectionToNumber} from '@taiga-ui/kit/utils/math';\nimport {PolymorpheusContent} from '@tinkoff/ng-polymorpheus';\nimport {Observable} from 'rxjs';\n\nconst DOTS_LENGTH = 1;\nconst ACTIVE_ITEM_LENGTH = 1;\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport function nonNegativeInteger(length: number): boolean {\n    return Number.isInteger(length) && length >= 0;\n}\n\n// @dynamic\n@Component({\n    selector: 'tui-pagination',\n    templateUrl: './pagination.template.html',\n    styleUrls: ['./pagination.style.less'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    providers: [\n        {\n            provide: TUI_FOCUSABLE_ITEM_ACCESSOR,\n            useExisting: forwardRef(() => TuiPaginationComponent),\n        },\n    ],\n})\nexport class TuiPaginationComponent\n    extends AbstractTuiInteractive\n    implements TuiFocusableElementAccessor\n{\n    @ViewChildren('element', {read: TUI_FOCUSABLE_ITEM_ACCESSOR})\n    private readonly elements: QueryList<TuiFocusableElementAccessor> = EMPTY_QUERY;\n\n    @Input()\n    @tuiDefaultProp(nonNegativeInteger, 'Must be non-negative integer')\n    length = 1;\n\n    @Input()\n    @tuiDefaultProp()\n    size: TuiSizeS = 'm';\n\n    @Input()\n    @tuiDefaultProp()\n    readonly disabled = false;\n\n    /**\n     * Amount of visible pages around active page\n     */\n    @Input()\n    @tuiDefaultProp()\n    activePadding = 1;\n\n    /**\n     * Amount of visible pages at the edges\n     */\n    @Input()\n    @tuiDefaultProp()\n    sidePadding = 1;\n\n    /**\n     * Customization for page number display.\n     */\n    @Input()\n    @tuiDefaultProp()\n    content: PolymorpheusContent<TuiContextWithImplicit<number>> | null = null;\n\n    /**\n     * Active page index\n     */\n    @Input()\n    @tuiDefaultProp(nonNegativeInteger, 'Must be non-negative integer')\n    index = 0;\n\n    @Output()\n    readonly indexChange = new EventEmitter<number>();\n\n    constructor(\n        @Inject(ElementRef) private readonly elementRef: ElementRef<HTMLElement>,\n        @Optional()\n        @Inject(TuiModeDirective)\n        private readonly modeDirective: TuiModeDirective | null,\n        @Inject(TUI_PAGINATION_TEXTS) readonly texts$: Observable<[string, string]>,\n    ) {\n        super();\n    }\n\n    get nativeFocusableElement(): TuiNativeFocusableElement | null {\n        if (this.disabled) {\n            return null;\n        }\n\n        let activeElementIndex = 0;\n        const {elementsLength} = this;\n\n        for (let i = 0; i < elementsLength; i++) {\n            const itemIndex = this.getItemIndexByElementIndex(i);\n\n            if (itemIndex) {\n                activeElementIndex++;\n            }\n\n            if (itemIndex === this.index) {\n                break;\n            }\n        }\n\n        const activeElement = this.elements.find(\n            (_, index) => index === activeElementIndex,\n        );\n\n        return activeElement ? activeElement.nativeFocusableElement : null;\n    }\n\n    get focused(): boolean {\n        return isNativeFocusedIn(this.elementRef.nativeElement);\n    }\n\n    /**\n     * Number of items in a container.\n     */\n    get elementsLength(): number {\n        return this.itemsFit ? this.length : this.maxElementsLength;\n    }\n\n    get sizeM(): boolean {\n        return this.size === 'm';\n    }\n\n    get mode(): TuiBrightness | null {\n        return this.modeDirective ? this.modeDirective.mode : null;\n    }\n\n    get arrowIsDisabledLeft(): boolean {\n        return this.index === 0;\n    }\n\n    get arrowIsDisabledRight(): boolean {\n        return this.reverseIndex === 0;\n    }\n\n    elementIsFocusable(index: number): boolean {\n        return this.index === index && !this.focused;\n    }\n\n    getItemContext(index: number): TuiContextWithImplicit<number> {\n        return {$implicit: index};\n    }\n\n    /**\n     * Get index by element index\n     * @param elementIndex\n     * @returns index or null (for 'â€¦')\n     */\n    getItemIndexByElementIndex(elementIndex: number): number | null {\n        if (!this.sizeM) {\n            return elementIndex;\n        }\n\n        if (elementIndex < this.sidePadding) {\n            return elementIndex;\n        }\n\n        if (elementIndex === this.sidePadding && this.hasCollapsedItems(this.index)) {\n            return null;\n        }\n\n        const reverseElementIndex = this.lastElementIndex - elementIndex;\n\n        if (\n            reverseElementIndex === this.sidePadding &&\n            this.hasCollapsedItems(this.reverseIndex)\n        ) {\n            return null;\n        }\n\n        if (reverseElementIndex < this.sidePadding) {\n            return this.lastIndex - reverseElementIndex;\n        }\n\n        const computedIndex = this.index - this.maxHalfLength + elementIndex;\n\n        return clamp(computedIndex, elementIndex, this.lastIndex - reverseElementIndex);\n    }\n\n    getElementMode(index: number): TuiAppearance {\n        return this.index === index ? TuiAppearance.Primary : TuiAppearance.Flat;\n    }\n\n    getSmallElementMode(index: number, mode: TuiBrightness | null): TuiAppearance {\n        return this.index === index && mode !== 'onLight'\n            ? TuiAppearance.Primary\n            : TuiAppearance.Secondary;\n    }\n\n    onElementClick(index: number): void {\n        this.updateIndex(index);\n    }\n\n    onElementKeyDownArrowLeft(element: TuiButtonComponent): void {\n        if (element === this.elements.first) {\n            return;\n        }\n\n        const previous = this.elements.find(\n            (_, index, array) => array[index + 1] === element,\n        );\n\n        if (previous?.nativeFocusableElement) {\n            setNativeFocused(previous.nativeFocusableElement);\n        }\n    }\n\n    onElementKeyDownArrowRight(element: TuiButtonComponent): void {\n        if (element === this.elements.last) {\n            return;\n        }\n\n        const next = this.elements.find(\n            (_, index, array) => array[index - 1] === element,\n        );\n\n        if (next?.nativeFocusableElement) {\n            setNativeFocused(next.nativeFocusableElement);\n        }\n    }\n\n    onArrowClick(direction: TuiHorizontalDirection): void {\n        this.tryChangeTo(direction);\n        this.focusActive();\n    }\n\n    onActiveZone(focused: boolean): void {\n        this.updateFocused(focused);\n    }\n\n    /**\n     * Active index from the end\n     */\n    private get reverseIndex(): number {\n        return this.lastIndex - this.index;\n    }\n\n    /**\n     * Max number of elements in half (not counting the middle one).\n     */\n    private get maxHalfLength(): number {\n        return this.sidePadding + DOTS_LENGTH + this.activePadding;\n    }\n\n    /**\n     * Is there '...' anywhere\n     */\n    private get itemsFit(): boolean {\n        return this.length <= this.maxElementsLength;\n    }\n\n    /**\n     * Max number of elements\n     */\n    private get maxElementsLength(): number {\n        return this.maxHalfLength * 2 + ACTIVE_ITEM_LENGTH;\n    }\n\n    private get lastIndex(): number {\n        return this.length - 1;\n    }\n\n    private get lastElementIndex(): number {\n        return this.elementsLength - 1;\n    }\n\n    /**\n     * Are there collapsed items at that index\n     * @param index\n     * @returns there are collapsed items\n     */\n    private hasCollapsedItems(index: number): boolean {\n        return !this.itemsFit && index > this.maxHalfLength;\n    }\n\n    private tryChangeTo(direction: TuiHorizontalDirection): void {\n        this.updateIndex(\n            clamp(\n                this.index + tuiHorizontalDirectionToNumber(direction),\n                0,\n                this.lastIndex,\n            ),\n        );\n    }\n\n    private focusActive(): void {\n        const {nativeFocusableElement} = this;\n\n        if (nativeFocusableElement) {\n            setNativeFocused(nativeFocusableElement);\n        }\n    }\n\n    private updateIndex(index: number): void {\n        if (this.index === index) {\n            return;\n        }\n\n        this.index = index;\n        this.indexChange.emit(index);\n    }\n}\n","import {CommonModule} from '@angular/common';\nimport {NgModule} from '@angular/core';\nimport {\n    TuiActiveZoneModule,\n    TuiLetModule,\n    TuiPreventDefaultModule,\n    TuiRepeatTimesModule,\n} from '@taiga-ui/cdk';\nimport {TuiButtonModule} from '@taiga-ui/core';\nimport {PolymorpheusModule} from '@tinkoff/ng-polymorpheus';\n\nimport {TuiPaginationComponent} from './pagination.component';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        TuiRepeatTimesModule,\n        TuiLetModule,\n        PolymorpheusModule,\n        TuiPreventDefaultModule,\n        TuiActiveZoneModule,\n        TuiButtonModule,\n    ],\n    declarations: [TuiPaginationComponent],\n    exports: [TuiPaginationComponent],\n})\nexport class TuiPaginationModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}