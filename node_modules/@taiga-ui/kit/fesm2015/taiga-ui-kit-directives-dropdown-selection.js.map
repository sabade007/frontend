{"version":3,"file":"taiga-ui-kit-directives-dropdown-selection.js","sources":["ng://@taiga-ui/kit/directives/dropdown-selection/dropdown-selection.directive.ts","ng://@taiga-ui/kit/directives/dropdown-selection/dropdown-selection.module.ts","ng://@taiga-ui/kit/directives/dropdown-selection/taiga-ui-kit-directives-dropdown-selection.ts"],"sourcesContent":["import {DOCUMENT} from '@angular/common';\nimport {\n    ChangeDetectorRef,\n    ComponentFactoryResolver,\n    Directive,\n    ElementRef,\n    forwardRef,\n    Host,\n    Inject,\n    Injector,\n    Input,\n    NgZone,\n    OnDestroy,\n    Optional,\n    Renderer2,\n    ViewContainerRef,\n} from '@angular/core';\nimport {\n    ALWAYS_TRUE_HANDLER,\n    CHAR_NO_BREAK_SPACE,\n    CHAR_ZERO_WIDTH_SPACE,\n    EMPTY_CLIENT_RECT,\n    getNativeFocused,\n    px,\n    TuiActiveZoneDirective,\n    TuiBooleanHandler,\n    TuiDestroyService,\n    TuiParentsScrollService,\n    TuiPortalService,\n    typedFromEvent,\n} from '@taiga-ui/cdk';\nimport {\n    AbstractTuiDropdown,\n    TUI_DOCUMENT_OR_SHADOW_ROOT,\n    TUI_DROPDOWN_DIRECTIVE,\n    TUI_ELEMENT_REF,\n    TuiDropdown,\n} from '@taiga-ui/core';\nimport {getWordRange} from '@taiga-ui/kit/utils/dom';\nimport {merge} from 'rxjs';\nimport {distinctUntilChanged, map, switchMapTo, takeUntil} from 'rxjs/operators';\n\n// @dynamic\n@Directive({\n    selector: '[tuiDropdownSelection]:not(ng-container)',\n    providers: [\n        {\n            provide: TUI_DROPDOWN_DIRECTIVE,\n            useExisting: forwardRef(() => TuiDropdownSelectionDirective),\n        },\n        TuiParentsScrollService,\n        TuiDestroyService,\n    ],\n})\nexport class TuiDropdownSelectionDirective\n    extends AbstractTuiDropdown\n    implements TuiDropdown, OnDestroy\n{\n    private visibilityHandler: TuiBooleanHandler<Range> = ALWAYS_TRUE_HANDLER;\n    private readonly documentRef: Document;\n    private ghost?: HTMLElement;\n    private range?: Range;\n\n    @Input()\n    set tuiDropdownSelection(handler: TuiBooleanHandler<Range> | '') {\n        if (!handler || !this.range) {\n            return;\n        }\n\n        const inHostAndValid =\n            this.elementRef.nativeElement.contains(this.range.commonAncestorContainer) &&\n            handler(this.range);\n\n        this.visibilityHandler = handler;\n        this.toggleDropdownBox(inHostAndValid);\n    }\n\n    @Input('tuiDropdownSelectionPosition')\n    position: 'selection' | 'tag' | 'word' = 'selection';\n\n    constructor(\n        @Inject(DOCUMENT) documentRef: Document,\n        @Inject(ComponentFactoryResolver)\n        componentFactoryResolver: ComponentFactoryResolver,\n        @Inject(Injector) injector: Injector,\n        @Inject(TuiPortalService) portalService: TuiPortalService,\n        @Host() @Inject(ElementRef) elementRef: ElementRef<HTMLElement>,\n        @Inject(TuiActiveZoneDirective)\n        @Optional()\n        activeZone: TuiActiveZoneDirective | null,\n        @Inject(TUI_DOCUMENT_OR_SHADOW_ROOT)\n        @Optional()\n        shadowRootRef: Document | null,\n        @Inject(TUI_ELEMENT_REF)\n        @Optional()\n        customElementRef: ElementRef<HTMLElement> | null,\n        @Inject(TuiDestroyService)\n        destroy$: TuiDestroyService,\n        @Inject(TuiParentsScrollService) readonly refresh$: TuiParentsScrollService,\n        @Inject(ChangeDetectorRef) private readonly changeDetectorRef: ChangeDetectorRef,\n        @Inject(NgZone) private readonly ngZone: NgZone,\n        @Inject(Renderer2) private readonly renderer: Renderer2,\n        @Inject(ViewContainerRef) private readonly viewContainerRef: ViewContainerRef,\n    ) {\n        super(\n            componentFactoryResolver,\n            injector,\n            portalService,\n            customElementRef || elementRef,\n            activeZone,\n        );\n        this.documentRef = shadowRootRef || documentRef;\n\n        // TODO: make better SSR protection\n        if (!this.documentRef.createRange) {\n            return;\n        }\n\n        this.range = this.documentRef.createRange();\n\n        const {nativeElement} = this.elementRef;\n\n        merge(\n            typedFromEvent(this.documentRef, 'selectionchange'),\n            typedFromEvent(this.documentRef, 'mouseup'),\n            typedFromEvent(nativeElement, 'mousedown').pipe(\n                switchMapTo(\n                    typedFromEvent(nativeElement, 'mousemove').pipe(\n                        takeUntil(typedFromEvent(this.documentRef, 'mouseup')),\n                    ),\n                ),\n            ),\n            typedFromEvent(nativeElement, 'keyup'),\n        )\n            .pipe(\n                map(() => {\n                    const active = getNativeFocused(this.documentRef);\n                    const selection = this.documentRef.getSelection();\n\n                    // TODO: iframe warning\n                    if (\n                        (active instanceof HTMLInputElement ||\n                            active instanceof HTMLTextAreaElement) &&\n                        nativeElement.contains(active)\n                    ) {\n                        return this.veryVerySadInputFix(active);\n                    }\n\n                    return selection?.rangeCount ? selection.getRangeAt(0) : this.range;\n                }),\n                distinctUntilChanged(),\n                takeUntil(destroy$),\n            )\n            .subscribe(range => {\n                const contained =\n                    !!range && nativeElement.contains(range.commonAncestorContainer);\n\n                this.range =\n                    contained &&\n                    range?.commonAncestorContainer.nodeType === Node.TEXT_NODE\n                        ? range\n                        : this.range;\n\n                const valid =\n                    contained &&\n                    (!this.visibilityHandler ||\n                        !this.range ||\n                        this.visibilityHandler(this.range));\n\n                this.toggleDropdownBox(!!range && (valid || this.inDropdown(range)));\n            });\n    }\n\n    get clientRect(): ClientRect {\n        const {defaultView} = this.documentRef;\n        const {rangeRect} = this;\n        const frameElement = defaultView ? defaultView.frameElement : null;\n\n        if (!frameElement) {\n            return rangeRect;\n        }\n\n        const documentRect = frameElement.getBoundingClientRect();\n\n        return {\n            top: rangeRect.top + documentRect.top,\n            left: rangeRect.left + documentRect.left,\n            right: rangeRect.left + documentRect.left + rangeRect.width,\n            bottom: rangeRect.top + documentRect.top + rangeRect.height,\n            width: rangeRect.width,\n            height: rangeRect.height,\n        };\n    }\n\n    ngOnDestroy(): void {\n        this.closeDropdownBox();\n\n        if (this.ghost) {\n            this.renderer.removeChild(\n                this.viewContainerRef.element.nativeElement,\n                this.ghost,\n            );\n        }\n    }\n\n    /**\n     * get ClientRect of current Range according to provided position\n     */\n    private get rangeRect(): ClientRect {\n        if (!this.range) {\n            return EMPTY_CLIENT_RECT;\n        }\n\n        switch (this.position) {\n            case 'tag': {\n                const {commonAncestorContainer} = this.range;\n                const element =\n                    commonAncestorContainer.nodeType === Node.ELEMENT_NODE\n                        ? commonAncestorContainer\n                        : commonAncestorContainer.parentNode;\n\n                return (element as Element).getBoundingClientRect();\n            }\n            case 'word':\n                return getWordRange(this.range).getBoundingClientRect();\n            default:\n                return this.range.getBoundingClientRect();\n        }\n    }\n\n    /**\n     * Toggle dropdown visibility (has to be in ngZone.run because it could be initiated inside iframe in Editor)\n     */\n    private toggleDropdownBox(visible: boolean): void {\n        this.ngZone.run(() => {\n            if (visible) {\n                this.openDropdownBox();\n            } else {\n                this.closeDropdownBox();\n            }\n\n            this.changeDetectorRef.markForCheck();\n        });\n    }\n\n    /**\n     * Check if Node is inside dropdown\n     */\n    private boxContains(node: Node): boolean {\n        return (\n            !!this.dropdownBoxRef &&\n            this.dropdownBoxRef.location.nativeElement.contains(node)\n        );\n    }\n\n    /**\n     * Check if given range is at least partially inside dropdown\n     */\n    private inDropdown(range: Range): boolean {\n        const {startContainer, endContainer} = range;\n        const inDropdown = this.boxContains(range.commonAncestorContainer);\n        const hostToDropdown =\n            this.boxContains(endContainer) &&\n            this.elementRef.nativeElement.contains(startContainer);\n        const dropdownToHost =\n            this.boxContains(startContainer) &&\n            this.elementRef.nativeElement.contains(endContainer);\n\n        return inDropdown || hostToDropdown || dropdownToHost;\n    }\n\n    /**\n     * Position invisible DIV and create Range similar to selected range inside input/textarea\n     */\n    private veryVerySadInputFix(element: HTMLInputElement | HTMLTextAreaElement): Range {\n        const {ghost = this.initGhost(element)} = this;\n        const {top, left, width, height} = element.getBoundingClientRect();\n        const {selectionStart, selectionEnd} = element;\n        const range = this.documentRef.createRange();\n        const hostRect = this.elementRef.nativeElement.getBoundingClientRect();\n\n        ghost.style.top = px(top - hostRect.top);\n        ghost.style.left = px(left - hostRect.left);\n        ghost.style.width = px(width);\n        ghost.style.height = px(height);\n        ghost.textContent = CHAR_ZERO_WIDTH_SPACE + element.value + CHAR_NO_BREAK_SPACE;\n\n        range.setStart(ghost.firstChild as Node, selectionStart || 0);\n        range.setEnd(ghost.firstChild as Node, selectionEnd || 0);\n\n        return range;\n    }\n\n    /**\n     * Create an invisible DIV styled exactly like input/textarea element inside directive\n     */\n    private initGhost(element: HTMLInputElement | HTMLTextAreaElement): HTMLElement {\n        const ghost = this.renderer.createElement('div');\n        const {nativeElement} = this.viewContainerRef.element;\n        const {font, letterSpacing, textTransform, padding} = getComputedStyle(element);\n\n        ghost.style.position = 'absolute';\n        ghost.style.pointerEvents = 'none';\n        ghost.style.opacity = '0';\n        ghost.style.whiteSpace = 'pre-wrap';\n        ghost.style.font = font;\n        ghost.style.letterSpacing = letterSpacing;\n        ghost.style.textTransform = textTransform;\n        ghost.style.padding = padding;\n\n        this.renderer.appendChild(nativeElement, ghost);\n        this.ghost = ghost;\n\n        return ghost;\n    }\n}\n","import {NgModule} from '@angular/core';\nimport {TuiDropdownBoxModule} from '@taiga-ui/core';\n\nimport {TuiDropdownSelectionDirective} from './dropdown-selection.directive';\n\n@NgModule({\n    imports: [TuiDropdownBoxModule],\n    declarations: [TuiDropdownSelectionDirective],\n    exports: [TuiDropdownSelectionDirective],\n})\nexport class TuiDropdownSelectionModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}