import { __decorate, __param } from "tslib";
import { ElementRef, Inject, Injectable, PipeTransform } from '@angular/core';
import { USER_AGENT } from '@ng-web-apis/common';
import { CHROMIUM_EDGE_START_VERSION, isEdgeOlderThan, isIE } from '@taiga-ui/cdk';
import { calculateColorSegments } from './calculate-color-segments';
// TODO: 3.0 delete
let AbstractTuiColorSegments = class AbstractTuiColorSegments {
    constructor(userAgent, elementRef) {
        this.userAgent = userAgent;
        this.elementRef = elementRef;
        this.isOldBrowsers = isEdgeOlderThan(CHROMIUM_EDGE_START_VERSION, this.userAgent) ||
            isIE(this.userAgent);
    }
    calculate(colors) {
        if (this.isOldBrowsers) {
            return colors[0];
        }
        const elementWidth = this.elementRef.nativeElement.offsetWidth;
        return calculateColorSegments(colors, elementWidth);
    }
};
AbstractTuiColorSegments.ctorParameters = () => [
    { type: String, decorators: [{ type: Inject, args: [USER_AGENT,] }] },
    { type: ElementRef, decorators: [{ type: Inject, args: [ElementRef,] }] }
];
AbstractTuiColorSegments = __decorate([
    Injectable(),
    __param(0, Inject(USER_AGENT)),
    __param(1, Inject(ElementRef))
], AbstractTuiColorSegments);
export { AbstractTuiColorSegments };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWJzdHJhY3QtY29sb3Itc2VnbWVudHMuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AdGFpZ2EtdWkva2l0L2NvbXBvbmVudHMvcHJvZ3Jlc3MvIiwic291cmNlcyI6WyJ1dGlscy9hYnN0cmFjdC1jb2xvci1zZWdtZW50cy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUFDLFVBQVUsRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLGFBQWEsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUM1RSxPQUFPLEVBQUMsVUFBVSxFQUFDLE1BQU0scUJBQXFCLENBQUM7QUFDL0MsT0FBTyxFQUFDLDJCQUEyQixFQUFFLGVBQWUsRUFBRSxJQUFJLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFFakYsT0FBTyxFQUFDLHNCQUFzQixFQUFDLE1BQU0sNEJBQTRCLENBQUM7QUFFbEUsbUJBQW1CO0FBRW5CLElBQXNCLHdCQUF3QixHQUE5QyxNQUFzQix3QkFBd0I7SUFLMUMsWUFDeUMsU0FBaUIsRUFDakIsVUFBbUM7UUFEbkMsY0FBUyxHQUFULFNBQVMsQ0FBUTtRQUNqQixlQUFVLEdBQVYsVUFBVSxDQUF5QjtRQU4zRCxrQkFBYSxHQUMxQixlQUFlLENBQUMsMkJBQTJCLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQztZQUM1RCxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO0lBS3RCLENBQUM7SUFJTSxTQUFTLENBQUMsTUFBZ0I7UUFDaEMsSUFBSSxJQUFJLENBQUMsYUFBYSxFQUFFO1lBQ3BCLE9BQU8sTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ3BCO1FBRUQsTUFBTSxZQUFZLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxhQUFhLENBQUMsV0FBVyxDQUFDO1FBRS9ELE9BQU8sc0JBQXNCLENBQUMsTUFBTSxFQUFFLFlBQVksQ0FBQyxDQUFDO0lBQ3hELENBQUM7Q0FDSixDQUFBOzt5Q0FmUSxNQUFNLFNBQUMsVUFBVTtZQUMrQixVQUFVLHVCQUExRCxNQUFNLFNBQUMsVUFBVTs7QUFQSix3QkFBd0I7SUFEN0MsVUFBVSxFQUFFO0lBT0osV0FBQSxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUE7SUFDbEIsV0FBQSxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUE7R0FQTCx3QkFBd0IsQ0FxQjdDO1NBckJxQix3QkFBd0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0VsZW1lbnRSZWYsIEluamVjdCwgSW5qZWN0YWJsZSwgUGlwZVRyYW5zZm9ybX0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge1VTRVJfQUdFTlR9IGZyb20gJ0BuZy13ZWItYXBpcy9jb21tb24nO1xuaW1wb3J0IHtDSFJPTUlVTV9FREdFX1NUQVJUX1ZFUlNJT04sIGlzRWRnZU9sZGVyVGhhbiwgaXNJRX0gZnJvbSAnQHRhaWdhLXVpL2Nkayc7XG5cbmltcG9ydCB7Y2FsY3VsYXRlQ29sb3JTZWdtZW50c30gZnJvbSAnLi9jYWxjdWxhdGUtY29sb3Itc2VnbWVudHMnO1xuXG4vLyBUT0RPOiAzLjAgZGVsZXRlXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQWJzdHJhY3RUdWlDb2xvclNlZ21lbnRzPFQ+IGltcGxlbWVudHMgUGlwZVRyYW5zZm9ybSB7XG4gICAgcHJpdmF0ZSByZWFkb25seSBpc09sZEJyb3dzZXJzID1cbiAgICAgICAgaXNFZGdlT2xkZXJUaGFuKENIUk9NSVVNX0VER0VfU1RBUlRfVkVSU0lPTiwgdGhpcy51c2VyQWdlbnQpIHx8XG4gICAgICAgIGlzSUUodGhpcy51c2VyQWdlbnQpO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIEBJbmplY3QoVVNFUl9BR0VOVCkgcHJpdmF0ZSByZWFkb25seSB1c2VyQWdlbnQ6IHN0cmluZyxcbiAgICAgICAgQEluamVjdChFbGVtZW50UmVmKSBwcml2YXRlIHJlYWRvbmx5IGVsZW1lbnRSZWY6IEVsZW1lbnRSZWY8SFRNTEVsZW1lbnQ+LFxuICAgICkge31cblxuICAgIGFic3RyYWN0IHRyYW5zZm9ybShjb2xvcnM6IHN0cmluZ1tdKTogVDtcblxuICAgIHByb3RlY3RlZCBjYWxjdWxhdGUoY29sb3JzOiBzdHJpbmdbXSk6IHN0cmluZyB7XG4gICAgICAgIGlmICh0aGlzLmlzT2xkQnJvd3NlcnMpIHtcbiAgICAgICAgICAgIHJldHVybiBjb2xvcnNbMF07XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBlbGVtZW50V2lkdGggPSB0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudC5vZmZzZXRXaWR0aDtcblxuICAgICAgICByZXR1cm4gY2FsY3VsYXRlQ29sb3JTZWdtZW50cyhjb2xvcnMsIGVsZW1lbnRXaWR0aCk7XG4gICAgfVxufVxuIl19