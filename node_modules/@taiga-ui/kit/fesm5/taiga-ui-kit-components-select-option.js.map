{"version":3,"file":"taiga-ui-kit-components-select-option.js","sources":["ng://@taiga-ui/kit/components/select-option/select-option.component.ts","ng://@taiga-ui/kit/components/select-option/select-option.module.ts","ng://@taiga-ui/kit/components/select-option/taiga-ui-kit-components-select-option.ts"],"sourcesContent":["import {\n    ChangeDetectionStrategy,\n    Component,\n    ElementRef,\n    Inject,\n    OnInit,\n    TemplateRef,\n} from '@angular/core';\nimport {NgControl} from '@angular/forms';\nimport {\n    isPresent,\n    TUI_DEFAULT_IDENTITY_MATCHER,\n    TuiContextWithImplicit,\n    TuiIdentityMatcher,\n    typedFromEvent,\n} from '@taiga-ui/cdk';\nimport {TUI_DATA_LIST_HOST, TuiDataListHost, TuiOptionComponent} from '@taiga-ui/core';\nimport {POLYMORPHEUS_CONTEXT, PolymorpheusComponent} from '@tinkoff/ng-polymorpheus';\nimport {EMPTY, merge} from 'rxjs';\nimport {distinctUntilChanged, map, startWith} from 'rxjs/operators';\n\n@Component({\n    selector: 'tui-select-option',\n    templateUrl: './select-option.template.html',\n    styleUrls: ['./select-option.style.less'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TuiSelectOptionComponent<T> implements OnInit {\n    readonly selected$ = merge(\n        this.control.valueChanges ?? EMPTY,\n        typedFromEvent(this.elementRef.nativeElement, 'animationstart'),\n    ).pipe(\n        startWith(null),\n        map(() => this.selected),\n        distinctUntilChanged(),\n    );\n\n    constructor(\n        @Inject(POLYMORPHEUS_CONTEXT)\n        readonly context: TuiContextWithImplicit<TemplateRef<Record<string, unknown>>>,\n        @Inject(TUI_DATA_LIST_HOST)\n        private readonly host: TuiDataListHost<T>,\n        @Inject(ElementRef) private readonly elementRef: ElementRef<HTMLElement>,\n        @Inject(TuiOptionComponent) protected readonly option: TuiOptionComponent<T>,\n        @Inject(NgControl) protected readonly control: NgControl,\n    ) {}\n\n    get matcher(): TuiIdentityMatcher<T> {\n        return this.host.identityMatcher || TUI_DEFAULT_IDENTITY_MATCHER;\n    }\n\n    ngOnInit(): void {\n        /**\n         * This would cause changes inside already checked parent component (during the same change detection cycle),\n         * and it might cause ExpressionChanged error due to potential HostBinding\n         * (for example, inside {@link https://github.com/angular/angular/blob/main/packages/forms/src/directives/ng_control_status.ts#L99 NgControlStatus}).\n         * Microtask keeps it in the same frame but allows change detection to run.\n         */\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\n        Promise.resolve().then(() => {\n            if (isPresent(this.option.value) && this.host.checkOption) {\n                this.host.checkOption(this.option.value);\n            }\n        });\n    }\n\n    protected get selected(): boolean {\n        return (\n            isPresent(this.option.value) &&\n            isPresent(this.control.value) &&\n            this.matcher(this.control.value, this.option.value)\n        );\n    }\n}\n\nexport const TUI_SELECT_OPTION = new PolymorpheusComponent(TuiSelectOptionComponent);\n","import {CommonModule} from '@angular/common';\nimport {NgModule} from '@angular/core';\nimport {TuiScrollIntoViewModule, TuiSvgModule} from '@taiga-ui/core';\n\nimport {TuiSelectOptionComponent} from './select-option.component';\n\n@NgModule({\n    imports: [CommonModule, TuiSvgModule, TuiScrollIntoViewModule],\n    declarations: [TuiSelectOptionComponent],\n    exports: [TuiSelectOptionComponent],\n    entryComponents: [TuiSelectOptionComponent],\n})\nexport class TuiSelectOptionModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":";;;;;;;;;;;IAqCI,kCAEa,OAAqE,EAE7D,IAAwB,EACJ,UAAmC,EACzB,MAA6B,EACtC,OAAkB;QAP5D,iBAQI;;QANS,YAAO,GAAP,OAAO,CAA8D;QAE7D,SAAI,GAAJ,IAAI,CAAoB;QACJ,eAAU,GAAV,UAAU,CAAyB;QACzB,WAAM,GAAN,MAAM,CAAuB;QACtC,YAAO,GAAP,OAAO,CAAW;QAhBnD,cAAS,GAAG,KAAK,OACtB,IAAI,CAAC,OAAO,CAAC,YAAY,mCAAI,KAAK,EAClC,cAAc,CAAC,IAAI,CAAC,UAAU,CAAC,aAAa,EAAE,gBAAgB,CAAC,CAClE,CAAC,IAAI,CACF,SAAS,CAAC,IAAI,CAAC,EACf,GAAG,CAAC,cAAM,OAAA,KAAI,CAAC,QAAQ,GAAA,CAAC,EACxB,oBAAoB,EAAE,CACzB,CAAC;KAUE;IAEJ,sBAAI,6CAAO;aAAX;YACI,OAAO,IAAI,CAAC,IAAI,CAAC,eAAe,IAAI,4BAA4B,CAAC;SACpE;;;OAAA;IAED,2CAAQ,GAAR;QAAA,iBAaC;;;;;;;;QALG,OAAO,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC;YACnB,IAAI,SAAS,CAAC,KAAI,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,KAAI,CAAC,IAAI,CAAC,WAAW,EAAE;gBACvD,KAAI,CAAC,IAAI,CAAC,WAAW,CAAC,KAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;aAC5C;SACJ,CAAC,CAAC;KACN;IAED,sBAAc,8CAAQ;aAAtB;YACI,QACI,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;gBAC5B,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC;gBAC7B,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,EACrD;SACL;;;OAAA;;gDAlCI,MAAM,SAAC,oBAAoB;gDAE3B,MAAM,SAAC,kBAAkB;gBAEuB,UAAU,uBAA1D,MAAM,SAAC,UAAU;gBACqC,kBAAkB,uBAAxE,MAAM,SAAC,kBAAkB;gBACqB,SAAS,uBAAvD,MAAM,SAAC,SAAS;;IAjBZ,wBAAwB;QANpC,SAAS,CAAC;YACP,QAAQ,EAAE,mBAAmB;YAC7B,mXAA4C;YAE5C,eAAe,EAAE,uBAAuB,CAAC,MAAM;;SAClD,CAAC;QAYO,WAAA,MAAM,CAAC,oBAAoB,CAAC,CAAA;QAE5B,WAAA,MAAM,CAAC,kBAAkB,CAAC,CAAA;QAE1B,WAAA,MAAM,CAAC,UAAU,CAAC,CAAA;QAClB,WAAA,MAAM,CAAC,kBAAkB,CAAC,CAAA;QAC1B,WAAA,MAAM,CAAC,SAAS,CAAC,CAAA;OAjBb,wBAAwB,CA8CpC;IAAD,+BAAC;CA9CD,IA8CC;IAEY,iBAAiB,GAAG,IAAI,qBAAqB,CAAC,wBAAwB;;;IC/DnF;KAAqC;IAAxB,qBAAqB;QANjC,QAAQ,CAAC;YACN,OAAO,EAAE,CAAC,YAAY,EAAE,YAAY,EAAE,uBAAuB,CAAC;YAC9D,YAAY,EAAE,CAAC,wBAAwB,CAAC;YACxC,OAAO,EAAE,CAAC,wBAAwB,CAAC;YACnC,eAAe,EAAE,CAAC,wBAAwB,CAAC;SAC9C,CAAC;OACW,qBAAqB,CAAG;IAAD,4BAAC;CAArC;;ACZA;;;;;;"}