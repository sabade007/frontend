{"version":3,"file":"taiga-ui-kit-components-stepper.js","sources":["ng://@taiga-ui/kit/components/stepper/stepper.component.ts","ng://@taiga-ui/kit/components/stepper/step/step.component.ts","ng://@taiga-ui/kit/components/stepper/stepper.module.ts","ng://@taiga-ui/kit/components/stepper/taiga-ui-kit-components-stepper.ts"],"sourcesContent":["import {\n    ChangeDetectionStrategy,\n    ChangeDetectorRef,\n    Component,\n    ContentChildren,\n    ElementRef,\n    EventEmitter,\n    forwardRef,\n    HostBinding,\n    HostListener,\n    Inject,\n    Input,\n    Output,\n    QueryList,\n} from '@angular/core';\nimport {\n    EMPTY_QUERY,\n    tuiAssertIsHTMLElement,\n    tuiDefaultProp,\n    TuiDestroyService,\n    tuiGetOriginalArrayFromQueryList,\n    tuiItemsQueryListObservable,\n    tuiMoveFocus,\n    tuiPure,\n    TuiResizeService,\n    TuiScrollService,\n} from '@taiga-ui/cdk';\nimport {TUI_ANIMATIONS_DURATION, TuiOrientationT} from '@taiga-ui/core';\nimport {Observable} from 'rxjs';\nimport {delay} from 'rxjs/operators';\n\nimport {TuiStepComponent} from './step/step.component';\n\n@Component({\n    selector: 'tui-stepper, nav[tuiStepper]',\n    templateUrl: './stepper.template.html',\n    styleUrls: ['./stepper.style.less'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    providers: [TuiResizeService, TuiDestroyService],\n})\nexport class TuiStepperComponent {\n    @ContentChildren(forwardRef(() => TuiStepComponent), {read: ElementRef})\n    private readonly steps: QueryList<ElementRef<HTMLElement>> = EMPTY_QUERY;\n\n    @Input()\n    @HostBinding('attr.data-orientation')\n    @tuiDefaultProp()\n    orientation: TuiOrientationT = 'horizontal';\n\n    @Input('activeItemIndex')\n    set activeIndex(index: number) {\n        this.activeItemIndex = index;\n        this.scrollIntoView(index);\n    }\n\n    @Output()\n    readonly activeItemIndexChange = new EventEmitter<number>();\n\n    activeItemIndex = 0;\n\n    constructor(\n        @Inject(ChangeDetectorRef) private readonly changeDetectorRef: ChangeDetectorRef,\n        @Inject(ElementRef) private readonly elementRef: ElementRef<HTMLElement>,\n        @Inject(TuiScrollService) private readonly scrollService: TuiScrollService,\n        @Inject(TuiResizeService) resize$: Observable<void>,\n        @Inject(TUI_ANIMATIONS_DURATION) private readonly duration: number,\n    ) {\n        resize$.subscribe(() => this.scrollIntoView(this.activeItemIndex));\n    }\n\n    @tuiPure\n    get changes$(): Observable<unknown> {\n        // Delay is required to trigger change detection after steps are rendered,\n        // so they can update their \"active\" status\n        return tuiItemsQueryListObservable(this.steps).pipe(delay(0));\n    }\n\n    @HostListener('keydown.arrowRight', ['$event', '1'])\n    @HostListener('keydown.arrowLeft', ['$event', '-1'])\n    onHorizontal(event: Event, step: number): void {\n        if (this.orientation !== 'horizontal' || !event.target) {\n            return;\n        }\n\n        event.preventDefault();\n        this.moveFocus(event.target, step);\n    }\n\n    @HostListener('keydown.arrowDown', ['$event', '1'])\n    @HostListener('keydown.arrowUp', ['$event', '-1'])\n    onVertical(event: Event, step: number): void {\n        if (this.orientation !== 'vertical' || !event.target) {\n            return;\n        }\n\n        event.preventDefault();\n        this.moveFocus(event.target, step);\n    }\n\n    indexOf(step: HTMLElement): number {\n        return tuiGetOriginalArrayFromQueryList(this.steps).findIndex(\n            ({nativeElement}) => nativeElement === step,\n        );\n    }\n\n    isActive(index: number): boolean {\n        return index === this.activeItemIndex;\n    }\n\n    activate(index: number): void {\n        if (this.activeItemIndex === index) {\n            return;\n        }\n\n        this.activeItemIndex = index;\n        this.activeItemIndexChange.emit(index);\n        this.changeDetectorRef.markForCheck();\n        this.scrollIntoView(index);\n    }\n\n    @tuiPure\n    private getNativeElements(\n        queryList: QueryList<ElementRef<HTMLElement>>,\n    ): HTMLElement[] {\n        return queryList.map(({nativeElement}) => nativeElement);\n    }\n\n    private moveFocus(current: EventTarget, step: number): void {\n        tuiAssertIsHTMLElement(current);\n\n        const stepElements = this.getNativeElements(this.steps);\n\n        tuiMoveFocus(stepElements.indexOf(current), stepElements, step);\n    }\n\n    private scrollIntoView(index: number): void {\n        const step = this.getNativeElements(this.steps)[index];\n\n        if (!step) {\n            return;\n        }\n\n        const {nativeElement} = this.elementRef;\n        const {clientHeight, clientWidth, offsetTop, offsetLeft} = nativeElement;\n        const {\n            offsetHeight,\n            offsetWidth,\n            offsetTop: stepOffsetTop,\n            offsetLeft: stepOffsetLeft,\n        } = step;\n        const top = stepOffsetTop - offsetTop - clientHeight / 2 + offsetHeight / 2;\n        const left = stepOffsetLeft - offsetLeft - clientWidth / 2 + offsetWidth / 2;\n\n        this.scrollService\n            .scroll$(\n                nativeElement,\n                Math.max(0, top),\n                Math.max(0, left),\n                this.duration / 3,\n            )\n            .subscribe();\n    }\n}\n","import {\n    ChangeDetectionStrategy,\n    Component,\n    ElementRef,\n    HostBinding,\n    HostListener,\n    Inject,\n    Input,\n} from '@angular/core';\nimport {tuiDefaultProp, TuiDestroyService, TuiFocusVisibleService} from '@taiga-ui/cdk';\nimport {TuiRouterLinkActiveService} from '@taiga-ui/core';\nimport {identity, Observable} from 'rxjs';\nimport {filter} from 'rxjs/operators';\n\nimport {TuiStepperComponent} from '../stepper.component';\n\n@Component({\n    selector:\n        'button[tuiStep], a[tuiStep]:not([routerLink]), a[tuiStep][routerLink][routerLinkActive]',\n    templateUrl: './step.template.html',\n    styleUrls: ['./step.style.less'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    providers: [TuiDestroyService, TuiRouterLinkActiveService, TuiFocusVisibleService],\n    host: {\n        type: 'button',\n    },\n})\nexport class TuiStepComponent {\n    @Input()\n    @HostBinding('attr.data-state')\n    @tuiDefaultProp()\n    state: 'error' | 'normal' | 'pass' = 'normal';\n\n    @Input()\n    @tuiDefaultProp()\n    icon = '';\n\n    @HostBinding('class._focus-visible')\n    focusVisible = false;\n\n    constructor(\n        @Inject(TuiFocusVisibleService) focusVisible$: TuiFocusVisibleService,\n        @Inject(TuiRouterLinkActiveService) routerLinkActive$: Observable<boolean>,\n        @Inject(TuiStepperComponent) private readonly stepper: TuiStepperComponent,\n        @Inject(ElementRef) private readonly elementRef: ElementRef<HTMLElement>,\n    ) {\n        routerLinkActive$.pipe(filter(identity)).subscribe(() => {\n            this.activate();\n        });\n\n        focusVisible$.subscribe(visible => {\n            this.focusVisible = visible;\n        });\n    }\n\n    @HostBinding('class._active')\n    get isActive(): boolean {\n        return this.stepper.isActive(this.index);\n    }\n\n    @HostBinding('class._vertical')\n    get isVertical(): boolean {\n        return this.stepper.orientation === 'vertical';\n    }\n\n    @HostBinding('tabIndex')\n    get tabIndex(): number {\n        return this.isActive ? 0 : -1;\n    }\n\n    get index(): number {\n        return this.stepper.indexOf(this.elementRef.nativeElement);\n    }\n\n    @HostListener('click')\n    activate(): void {\n        this.stepper.activate(this.index);\n    }\n}\n","import {CommonModule} from '@angular/common';\nimport {NgModule} from '@angular/core';\nimport {TuiSvgModule} from '@taiga-ui/core';\n\nimport {TuiStepComponent} from './step/step.component';\nimport {TuiStepperComponent} from './stepper.component';\n\n@NgModule({\n    imports: [CommonModule, TuiSvgModule],\n    declarations: [TuiStepperComponent, TuiStepComponent],\n    exports: [TuiStepperComponent, TuiStepComponent],\n})\nexport class TuiStepperModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}