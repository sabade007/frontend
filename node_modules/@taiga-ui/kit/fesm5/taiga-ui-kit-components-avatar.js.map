{"version":3,"file":"taiga-ui-kit-components-avatar.js","sources":["ng://@taiga-ui/kit/components/avatar/avatar-options.ts","ng://@taiga-ui/kit/components/avatar/avatar.component.ts","ng://@taiga-ui/kit/components/avatar/avatar.module.ts","ng://@taiga-ui/kit/components/avatar/taiga-ui-kit-components-avatar.ts"],"sourcesContent":["import {InjectionToken, ValueProvider} from '@angular/core';\nimport {TuiSizeXS, TuiSizeXXL} from '@taiga-ui/core';\n\nexport interface TuiAvatarOptions {\n    readonly size: TuiSizeXS | TuiSizeXXL;\n    readonly autoColor: boolean;\n    readonly rounded: boolean;\n}\n\n/** Default values for the avatar options. */\nexport const TUI_AVATAR_DEFAULT_OPTIONS: TuiAvatarOptions = {\n    size: `m`,\n    autoColor: false,\n    rounded: false,\n};\n\nexport const TUI_AVATAR_OPTIONS = new InjectionToken<TuiAvatarOptions>(\n    `Default parameters for avatar component`,\n    {\n        factory: () => TUI_AVATAR_DEFAULT_OPTIONS,\n    },\n);\n\nexport const tuiAvatarOptionsProvider: (\n    options: Partial<TuiAvatarOptions>,\n) => ValueProvider = (options: Partial<TuiAvatarOptions>) => ({\n    provide: TUI_AVATAR_OPTIONS,\n    useValue: {...TUI_AVATAR_DEFAULT_OPTIONS, ...options},\n});\n","import {\n    ChangeDetectionStrategy,\n    Component,\n    HostBinding,\n    Inject,\n    Input,\n} from '@angular/core';\nimport {SafeResourceUrl} from '@angular/platform-browser';\nimport {tuiDefaultProp, tuiRequiredSetter} from '@taiga-ui/cdk';\nimport {sizeBigger} from '@taiga-ui/core';\nimport {stringHashToHsl} from '@taiga-ui/kit/utils/format';\n\nimport {TUI_AVATAR_OPTIONS, TuiAvatarOptions} from './avatar-options';\n\n@Component({\n    selector: 'tui-avatar',\n    templateUrl: './avatar.template.html',\n    styleUrls: ['./avatar.style.less'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TuiAvatarComponent {\n    @Input()\n    @HostBinding('attr.data-size')\n    @tuiDefaultProp()\n    size = this.options.size;\n\n    @Input('avatarUrl')\n    @tuiRequiredSetter()\n    set avatarUrlSetter(avatarUrl: SafeResourceUrl | string | null) {\n        this.avatarUrl = avatarUrl;\n        this.isUrlValid = !!avatarUrl && !this.iconAvatar;\n    }\n\n    @Input()\n    @tuiDefaultProp()\n    text = '';\n\n    @Input()\n    @tuiDefaultProp()\n    autoColor: boolean = this.options.autoColor;\n\n    @Input()\n    @HostBinding('class._rounded')\n    @tuiDefaultProp()\n    rounded: boolean = this.options.rounded;\n\n    avatarUrl: SafeResourceUrl | string | null = null;\n\n    isUrlValid = false;\n\n    constructor(@Inject(TUI_AVATAR_OPTIONS) private readonly options: TuiAvatarOptions) {}\n\n    @HostBinding('style.background')\n    get bgColor(): string {\n        return this.autoColor ? stringHashToHsl(this.text) : '';\n    }\n\n    @HostBinding('class._has-avatar')\n    get hasAvatar(): boolean {\n        return this.avatarUrl !== null && this.isUrlValid;\n    }\n\n    get iconAvatar(): boolean {\n        return (\n            typeof this.avatarUrl === 'string' && !!this.avatarUrl?.startsWith('tuiIcon')\n        );\n    }\n\n    get computedText(): string {\n        if (this.hasAvatar || this.iconAvatar || this.text === '') {\n            return '';\n        }\n\n        const words = this.text.split(' ');\n\n        return words.length > 1 && sizeBigger(this.size)\n            ? words[0].slice(0, 1) + words[1].slice(0, 1)\n            : words[0].slice(0, 1);\n    }\n\n    get stringAvatar(): string {\n        return this.iconAvatar ? String(this.avatarUrl) : '';\n    }\n\n    onError(): void {\n        this.isUrlValid = false;\n    }\n}\n","import {CommonModule} from '@angular/common';\nimport {NgModule} from '@angular/core';\nimport {TuiSvgModule} from '@taiga-ui/core';\nimport {TuiLazyLoadingModule} from '@taiga-ui/kit/directives';\n\nimport {TuiAvatarComponent} from './avatar.component';\n\n@NgModule({\n    imports: [CommonModule, TuiLazyLoadingModule, TuiSvgModule],\n    declarations: [TuiAvatarComponent],\n    exports: [TuiAvatarComponent],\n})\nexport class TuiAvatarModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}