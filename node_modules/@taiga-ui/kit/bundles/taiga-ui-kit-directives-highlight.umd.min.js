!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/core"),require("@taiga-ui/cdk"),require("rxjs")):"function"==typeof define&&define.amd?define("@taiga-ui/kit/directives/highlight",["exports","@angular/common","@angular/core","@taiga-ui/cdk","rxjs"],t):t(((e=e||self)["taiga-ui"]=e["taiga-ui"]||{},e["taiga-ui"].kit=e["taiga-ui"].kit||{},e["taiga-ui"].kit.directives=e["taiga-ui"].kit.directives||{},e["taiga-ui"].kit.directives.highlight={}),e.ng.common,e.ng.core,e.cdk,e.rxjs)}(this,(function(e,t,i,r,n){"use strict";function o(e,t,i,r){var n,o=arguments.length,l=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(l=(o<3?n(l):o>3?n(t,i,l):n(t,i))||l);return o>3&&l&&Object.defineProperty(t,i,l),l}function l(e,t){return function(i,r){t(i,r,e)}}Object.create;Object.create;var s=function(){function e(e,t,i,n){var o=this;this.documentRef=e,this.elementRef=t,this.renderer=i,this.highlight=this.setUpHighlight(),this.treeWalker=this.documentRef.createTreeWalker(this.elementRef.nativeElement,NodeFilter.SHOW_TEXT,r.svgNodeFilter,!1),this.tuiHighlight="",this.tuiHighlightColor="var(--tui-selection)",n.subscribe((function(){o.updateStyles()}))}return Object.defineProperty(e.prototype,"match",{get:function(){return-1!==this.indexOf(this.elementRef.nativeElement.textContent)},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(){this.updateStyles()},e.prototype.updateStyles=function(){if(this.highlight.style.display="none",this.match){this.treeWalker.currentNode=this.elementRef.nativeElement;do{var e=this.indexOf(this.treeWalker.currentNode.nodeValue);if(-1!==e){var t=this.documentRef.createRange();t.setStart(this.treeWalker.currentNode,e),t.setEnd(this.treeWalker.currentNode,e+this.tuiHighlight.length);var i=this.elementRef.nativeElement.getBoundingClientRect(),n=t.getBoundingClientRect(),o=n.left,l=n.top,s=n.width,u=n.height,h=this.highlight.style;return h.background=this.tuiHighlightColor,h.left=r.px(o-i.left),h.top=r.px(l-i.top),h.width=r.px(s),h.height=r.px(u),void(h.display="block")}}while(this.treeWalker.nextNode())}},e.prototype.indexOf=function(e){return e&&this.tuiHighlight?e.toLowerCase().indexOf(this.tuiHighlight.toLowerCase()):-1},e.prototype.setUpHighlight=function(){var e=this.renderer.createElement("div"),t=e.style;return t.background=this.tuiHighlightColor,t.zIndex="-1",t.position="absolute",this.renderer.appendChild(this.elementRef.nativeElement,e),e},e.ctorParameters=function(){return[{type:Document,decorators:[{type:i.Inject,args:[t.DOCUMENT]}]},{type:i.ElementRef,decorators:[{type:i.Inject,args:[i.ElementRef]}]},{type:i.Renderer2,decorators:[{type:i.Inject,args:[i.Renderer2]}]},{type:n.Observable,decorators:[{type:i.Inject,args:[r.TuiResizeService]}]}]},o([i.Input(),r.tuiDefaultProp()],e.prototype,"tuiHighlight",void 0),o([i.Input()],e.prototype,"tuiHighlightColor",void 0),e=o([i.Directive({selector:"[tuiHighlight]",host:{"[style.position]":'"relative"',"[style.zIndex]":"0"},providers:[r.TuiDestroyService,r.TuiResizeService]}),l(0,i.Inject(t.DOCUMENT)),l(1,i.Inject(i.ElementRef)),l(2,i.Inject(i.Renderer2)),l(3,i.Inject(r.TuiResizeService))],e)}(),u=function(){function e(){}return e=o([i.NgModule({declarations:[s],exports:[s]})],e)}();e.TuiHighlightDirective=s,e.TuiHighlightModule=u,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=taiga-ui-kit-directives-highlight.umd.min.js.map