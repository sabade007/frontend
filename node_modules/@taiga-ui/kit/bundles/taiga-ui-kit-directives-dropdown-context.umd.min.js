!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/core"),require("@taiga-ui/cdk"),require("@taiga-ui/core"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@taiga-ui/kit/directives/dropdown-context",["exports","@angular/common","@angular/core","@taiga-ui/cdk","@taiga-ui/core","rxjs","rxjs/operators"],t):t(((e=e||self)["taiga-ui"]=e["taiga-ui"]||{},e["taiga-ui"].kit=e["taiga-ui"].kit||{},e["taiga-ui"].kit.directives=e["taiga-ui"].kit.directives||{},e["taiga-ui"].kit.directives["dropdown-context"]={}),e.ng.common,e.ng.core,e.cdk,e.core$1,e.rxjs,e.rxjs.operators)}(this,(function(e,t,o,n,r,i,c){"use strict";var u=function(e,t){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)};function s(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var u=e.length-1;u>=0;u--)(r=e[u])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c}function p(e,t){return function(o,n){t(o,n,e)}}Object.create;Object.create;var a=function(e){function a(t,o,r,u,s,p,a){var l=e.call(this,u,s,p,t,a)||this;return l.elementRef=t,l.documentRef=o,l.activeZone=a,l.lastClickedClientRect=n.EMPTY_CLIENT_RECT,l.content="",l.refresh$=i.EMPTY,l.context={close:function(){return l.closeDropdownBox()}},a.tuiActiveZoneChange.pipe(c.filter((function(e){return!e})),c.takeUntil(r)).subscribe((function(){return l.closeDropdownBox()})),l}var l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}(a,e),l=a,Object.defineProperty(a.prototype,"clientRect",{get:function(){return this.lastClickedClientRect},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"fixed",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"dropdownContent",{get:function(){var e,t;return(null===(t=null===(e=this.dropdownBoxRef)||void 0===e?void 0:e.instance.contentElementRef)||void 0===t?void 0:t.nativeElement)||null},enumerable:!0,configurable:!0}),a.prototype.onHostClick=function(){this.closeDropdownBox()},a.prototype.onContextMenu=function(e,t){this.closeDropdownBox(),this.openDropdown(e,t)},a.prototype.onAnotherContextOpen=function(e){!this.elementRef.nativeElement.contains(e)&&this.closeDropdownBox()},a.prototype.onArrow=function(e,t){var o=n.getNativeFocused(this.documentRef),r=o&&this.activeZone.contains(o);if(this.dropdownContent&&!r){e.preventDefault();var i=this.dropdownContent.nextElementSibling,c=t||!this.checkIsFocusableElement(i)?this.dropdownContent:i,u=n.getClosestFocusable(c,!t,this.dropdownContent);null!==u&&n.setNativeFocused(u)}},a.prototype.onKeyDownEsc=function(e){this.dropdownContent&&(e.stopPropagation(),this.closeDropdownBox())},a.prototype.openDropdown=function(e,t){this.lastClickedClientRect=n.tuiPointToClientRect(e,t),this.openDropdownBox()},a.prototype.checkIsFocusableElement=function(e){return!!e&&"focus"in e&&"blur"in e},a.ctorParameters=function(){return[{type:o.ElementRef},{type:Document,decorators:[{type:o.Inject,args:[t.DOCUMENT]}]},{type:i.Observable,decorators:[{type:o.Inject,args:[n.TuiDestroyService]}]},{type:o.ComponentFactoryResolver,decorators:[{type:o.Inject,args:[o.ComponentFactoryResolver]}]},{type:o.Injector,decorators:[{type:o.Inject,args:[o.Injector]}]},{type:n.TuiPortalService,decorators:[{type:o.Inject,args:[n.TuiPortalService]}]},{type:n.TuiActiveZoneDirective}]},s([o.Input("tuiDropdownContext"),n.tuiDefaultProp()],a.prototype,"content",void 0),s([o.HostListener("click")],a.prototype,"onHostClick",null),s([o.HostListener("contextmenu.prevent",["$event.clientX","$event.clientY"])],a.prototype,"onContextMenu",null),s([o.HostListener("document:contextmenu",["$event.target"])],a.prototype,"onAnotherContextOpen",null),s([o.HostListener("document:keydown.arrowDown",["$event","true"]),o.HostListener("document:keydown.arrowUp",["$event","false"])],a.prototype,"onArrow",null),s([o.HostListener("document:keydown.esc",["$event"])],a.prototype,"onKeyDownEsc",null),a=l=s([o.Directive({selector:"[tuiDropdownContext]",providers:[n.TuiDestroyService,n.TuiActiveZoneDirective,{provide:r.TUI_DROPDOWN_DIRECTIVE,useExisting:o.forwardRef((function(){return l}))}]}),p(1,o.Inject(t.DOCUMENT)),p(2,o.Inject(n.TuiDestroyService)),p(3,o.Inject(o.ComponentFactoryResolver)),p(4,o.Inject(o.Injector)),p(5,o.Inject(n.TuiPortalService))],a)}(r.AbstractTuiDropdown),l=function(){function e(){}return e=s([o.NgModule({imports:[r.TuiDropdownBoxModule],declarations:[a],exports:[a]})],e)}();e.TuiDropdownContextDirective=a,e.TuiDropdownContextModule=l,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=taiga-ui-kit-directives-dropdown-context.umd.min.js.map