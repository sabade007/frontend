!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms"),require("@taiga-ui/cdk"),require("@taiga-ui/core"),require("@taiga-ui/kit/constants"),require("@taiga-ui/kit/tokens"),require("@taiga-ui/kit/utils/mask"),require("@tinkoff/ng-polymorpheus"),require("rxjs"),require("rxjs/operators"),require("@taiga-ui/kit/providers"),require("@taiga-ui/kit/utils/miscellaneous"),require("@angular/common"),require("@taiga-ui/kit/components/calendar-range"),require("@taiga-ui/kit/directives"),require("angular2-text-mask")):"function"==typeof define&&define.amd?define("@taiga-ui/kit/components/input-date-range",["exports","@angular/core","@angular/forms","@taiga-ui/cdk","@taiga-ui/core","@taiga-ui/kit/constants","@taiga-ui/kit/tokens","@taiga-ui/kit/utils/mask","@tinkoff/ng-polymorpheus","rxjs","rxjs/operators","@taiga-ui/kit/providers","@taiga-ui/kit/utils/miscellaneous","@angular/common","@taiga-ui/kit/components/calendar-range","@taiga-ui/kit/directives","angular2-text-mask"],t):t(((e=e||self)["taiga-ui"]=e["taiga-ui"]||{},e["taiga-ui"].kit=e["taiga-ui"].kit||{},e["taiga-ui"].kit.components=e["taiga-ui"].kit.components||{},e["taiga-ui"].kit.components["input-date-range"]={}),e.ng.core,e.ng.forms,e.cdk,e.core$1,e["taiga-ui"].kit.constants,e["taiga-ui"].kit.tokens,e["taiga-ui"].kit.utils.mask,e.ngPolymorpheus,e.rxjs,e.rxjs.operators,e["taiga-ui"].kit.providers,e["taiga-ui"].kit.utils.miscellaneous,e.ng.common,e["taiga-ui"].kit.components["calendar-range"],e["taiga-ui"].kit.directives,e.angular2TextMask)}(this,(function(e,t,n,i,o,a,r,u,l,s,p,c,d,g,m,f,h){"use strict";var y=function(e,t){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function T(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}y(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function v(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r}function I(e,t){return function(n,i){t(n,i,e)}}Object.create;Object.create;var E=function(e,t){return d.TuiReplayControlValueChangesFactory(e,t)},_=[{provide:i.AbstractTuiControl,useExisting:t.forwardRef((function(){return b}))},{provide:i.TUI_FOCUSABLE_ITEM_ACCESSOR,useExisting:t.forwardRef((function(){return b}))},{provide:r.TUI_CALENDAR_DATA_STREAM,deps:[[new t.Optional,new t.Self,n.NgControl],[new t.Optional,t.forwardRef((function(){return r.TUI_DATE_RANGE_VALUE_TRANSFORMER}))]],useFactory:E},c.LEFT_ALIGNED_DROPDOWN_CONTROLLER_PROVIDER],b=function(e){function c(t,n,r,l,s,c,d,g,m,f,h,y){var T=e.call(this,t,n,y)||this;return T.injector=r,T.isMobile=l,T.dialogService=s,T.mobileCalendar=c,T.textfieldSize=d,T.textfieldExampleText=g,T.dateFormat=m,T.dateSeparator=f,T.dateTexts$=h,T.valueTransformer=y,T.textMaskOptions={mask:u.tuiCreateDateRangeMask(T.dateFormat,T.dateSeparator),pipe:u.tuiCreateAutoCorrectedDateRangePipe(T),guide:!1},T.disabledItemHandler=i.ALWAYS_FALSE_HANDLER,T.markerHandler=o.TUI_DEFAULT_MARKER_HANDLER,T.defaultViewedMonth=i.TuiMonth.currentLocal(),T.items=[],T.min=i.TUI_FIRST_DAY,T.max=i.TUI_LAST_DAY,T.minLength=null,T.maxLength=null,T.open=!1,T.maxLengthMapper=a.MAX_DAY_RANGE_LENGTH_MAPPER,T.dateFiller$=T.dateTexts$.pipe(p.map((function(e){return i.changeDateSeparator(e[T.dateFormat],T.dateSeparator)}))),T}return T(c,e),Object.defineProperty(c.prototype,"nativeFocusableElement",{get:function(){return this.textfield?this.textfield.nativeFocusableElement:null},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"focused",{get:function(){return!!this.textfield&&this.textfield.focused},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"computedMobile",{get:function(){return this.isMobile&&!!this.mobileCalendar},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"calendarIcon",{get:function(){return o.sizeBigger(this.textfieldSize.size)?"tuiIconCalendarLarge":"tuiIconCalendar"},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"canOpen",{get:function(){return this.interactive&&!this.computedMobile},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"computedExampleText",{get:function(){return this.items.length?this.textfieldExampleText.exampleText:""},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"computedMask",{get:function(){return this.activePeriod?a.EMPTY_MASK:this.textMaskOptions},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"activePeriod",{get:function(){var e=this;return this.items.find((function(t){return i.nullableSame(e.value,t.range,(function(t,n){return t.from.daySame(n.from.dayLimit(e.min,e.max))&&t.to.daySame(n.to.dayLimit(e.min,e.max))}))}))||null},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"computedValue",{get:function(){var e=this.value,t=this.nativeValue,n=this.activePeriod;return n?String(n):e?e.getFormattedDayRange(this.dateFormat,this.dateSeparator):t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"innerPseudoFocused",{get:function(){return!1!==this.pseudoFocused&&(!(!this.open&&!this.computedFocused)||null)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"nativeValue",{get:function(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""},set:function(e){this.nativeFocusableElement&&(this.nativeFocusableElement.value=e)},enumerable:!0,configurable:!0}),c.prototype.onClick=function(){this.isMobile||this.toggle()},c.prototype.getComputedRangeFiller=function(e){return this.activePeriod?"":this.getDateRangeFiller(e)},c.prototype.onMobileClick=function(){var e=this;this.mobileCalendar?this.dialogService.open(new l.PolymorpheusComponent(this.mobileCalendar,this.injector),{size:"fullscreen",closeable:!1,data:{single:!1,min:this.maxLengthMapper(this.min,this.value,this.maxLength,!0),max:this.maxLengthMapper(this.max,this.value,this.maxLength,!1),disabledItemHandler:this.disabledItemHandler}}).pipe(p.takeUntil(this.destroy$)).subscribe((function(t){e.updateValue(t)})):this.toggle()},c.prototype.onOpenChange=function(e){this.open=e},c.prototype.onValueChange=function(e){if(this.control&&this.control.updateValueAndValidity({emitEvent:!1}),e||this.onOpenChange(!0),e.length===i.DATE_RANGE_FILLER_LENGTH){var t=i.TuiDayRange.normalizeParse(e,this.dateFormat);this.updateValue(this.minLength||this.maxLength?this.clampValue(t):t)}else this.updateValue(null)},c.prototype.onRangeChange=function(e){this.toggle(),this.focusInput(),e||(this.nativeValue=""),i.nullableSame(this.value,e,(function(e,t){return e.daySame(t)}))||this.updateValue(e)},c.prototype.onItemSelect=function(e){this.toggle(),this.focusInput(),"string"==typeof e?null!==this.activePeriod&&(this.updateValue(null),this.nativeValue=""):this.updateValue(e.range.dayLimit(this.min,this.max))},c.prototype.onHovered=function(e){this.updateHovered(e)},c.prototype.onPressed=function(e){this.updatePressed(e)},c.prototype.onActiveZone=function(e){this.updateFocused(e),e||this.itemSelected||this.nativeValue.length!==i.DATE_FILLER_LENGTH&&this.nativeValue.length!==i.DATE_FILLER_LENGTH+i.RANGE_SEPARATOR_CHAR.length||this.updateValue(i.TuiDayRange.normalizeParse(this.nativeValue,this.dateFormat))},c.prototype.writeValue=function(t){e.prototype.writeValue.call(this,t),this.nativeValue=t?this.computedValue:""},Object.defineProperty(c.prototype,"itemSelected",{get:function(){var e=this;return-1!==this.items.findIndex((function(t){return String(t)===e.nativeValue}))},enumerable:!0,configurable:!0}),c.prototype.toggle=function(){this.open=!this.open},c.prototype.focusInput=function(e){void 0===e&&(e=!1),this.nativeFocusableElement&&i.setNativeFocused(this.nativeFocusableElement,!0,e)},c.prototype.clampValue=function(e){var t=this.minLength&&e.from.append(this.minLength).dayAfter(e.to)?new i.TuiDayRange(e.from,e.from.append(this.minLength).append({day:-1})):e,n=this.maxLength?t.from.append(this.maxLength).append({day:-1}):this.max;return t.to.dayAfter(n)?new i.TuiDayRange(t.from,n):t},c.prototype.getDateRangeFiller=function(e){return""+e+i.RANGE_SEPARATOR_CHAR+e},c.ctorParameters=function(){return[{type:n.NgControl,decorators:[{type:t.Optional},{type:t.Self},{type:t.Inject,args:[n.NgControl]}]},{type:t.ChangeDetectorRef,decorators:[{type:t.Inject,args:[t.ChangeDetectorRef]}]},{type:t.Injector,decorators:[{type:t.Inject,args:[t.Injector]}]},{type:Boolean,decorators:[{type:t.Inject,args:[i.TUI_IS_MOBILE]}]},{type:o.TuiDialogService,decorators:[{type:t.Inject,args:[o.TuiDialogService]}]},{type:t.Type,decorators:[{type:t.Optional},{type:t.Inject,args:[r.TUI_MOBILE_CALENDAR]}]},{type:o.TuiTextfieldSizeDirective,decorators:[{type:t.Inject,args:[o.TUI_TEXTFIELD_SIZE]}]},{type:o.TuiTextfieldExampleTextDirective,decorators:[{type:t.Inject,args:[o.TUI_TEXTFIELD_EXAMPLE_TEXT]}]},{type:void 0,decorators:[{type:t.Inject,args:[i.TUI_DATE_FORMAT]}]},{type:String,decorators:[{type:t.Inject,args:[i.TUI_DATE_SEPARATOR]}]},{type:s.Observable,decorators:[{type:t.Inject,args:[r.TUI_DATE_TEXTS]}]},{type:void 0,decorators:[{type:t.Optional},{type:t.Inject,args:[r.TUI_DATE_RANGE_VALUE_TRANSFORMER]}]}]},v([t.ViewChild(o.TuiPrimitiveTextfieldComponent)],c.prototype,"textfield",void 0),v([t.Input(),i.tuiDefaultProp()],c.prototype,"disabledItemHandler",void 0),v([t.Input(),i.tuiDefaultProp()],c.prototype,"markerHandler",void 0),v([t.Input(),i.tuiDefaultProp()],c.prototype,"defaultViewedMonth",void 0),v([t.Input(),i.tuiDefaultProp()],c.prototype,"items",void 0),v([t.Input(),i.tuiDefaultProp()],c.prototype,"min",void 0),v([t.Input(),i.tuiDefaultProp()],c.prototype,"max",void 0),v([t.Input(),i.tuiDefaultProp()],c.prototype,"minLength",void 0),v([t.Input(),i.tuiDefaultProp()],c.prototype,"maxLength",void 0),v([t.HostListener("click")],c.prototype,"onClick",null),c=v([t.Component({selector:"tui-input-date-range",template:'<tui-hosted-dropdown\n    class="t-hosted"\n    [canOpen]="canOpen"\n    [content]="dropdown"\n    [open]="open && canOpen"\n    (openChange)="onOpenChange($event)"\n    (tuiActiveZoneChange)="onActiveZone($event)"\n>\n    <tui-primitive-textfield\n        *tuiLet="dateFiller$ | async as dateFiller"\n        automation-id="tui-input-date-range__textfield"\n        tuiValueAccessor\n        tuiTextfieldInputMode="numeric"\n        class="t-textfield"\n        [pseudoFocused]="innerPseudoFocused"\n        [pseudoHovered]="pseudoHovered"\n        [pseudoPressed]="pseudoPressed"\n        [invalid]="computedInvalid"\n        [tuiTextfieldExampleText]="computedExampleText"\n        [nativeId]="nativeId"\n        [filler]="getComputedRangeFiller(dateFiller)"\n        [readOnly]="readOnly"\n        [iconContent]="computedMobile ? mobileIconContent : iconContent"\n        [disabled]="computedDisabled"\n        [textMask]="computedMask"\n        [value]="computedValue"\n        (valueChange)="onValueChange($event)"\n        (hoveredChange)="onHovered($event)"\n        (pressedChange)="onPressed($event)"\n    >\n        <ng-content></ng-content>\n        <ng-content\n            select="input"\n            ngProjectAs="input"\n        ></ng-content>\n    </tui-primitive-textfield>\n\n    <ng-template #mobileIconContent>\n        <tui-svg\n            automation-id="tui-input-date-range__icon"\n            [class.t-icon]="!computedDisabled"\n            [src]="calendarIcon"\n            (click)="onMobileClick()"\n        ></tui-svg>\n    </ng-template>\n\n    <ng-template #iconContent>\n        <tui-svg\n            [class.t-icon]="!computedDisabled"\n            [src]="calendarIcon"\n        ></tui-svg>\n    </ng-template>\n\n    <ng-template #dropdown>\n        <tui-calendar-range\n            [defaultViewedMonth]="defaultViewedMonth"\n            [disabledItemHandler]="disabledItemHandler"\n            [items]="items"\n            [min]="min"\n            [max]="max"\n            [markerHandler]="markerHandler"\n            [minLength]="minLength"\n            [maxLength]="maxLength"\n            [value]="value"\n            (valueChange)="onRangeChange($event)"\n        ></tui-calendar-range>\n    </ng-template>\n</tui-hosted-dropdown>\n',providers:_,styles:[":host{display:block;border-radius:var(--tui-radius-m);text-align:left}:host._disabled{pointer-events:none}.t-hosted{display:block;border-radius:inherit}.t-textfield{border-radius:inherit;text-align:inherit}.t-icon{pointer-events:auto}"]}),I(0,t.Optional()),I(0,t.Self()),I(0,t.Inject(n.NgControl)),I(1,t.Inject(t.ChangeDetectorRef)),I(2,t.Inject(t.Injector)),I(3,t.Inject(i.TUI_IS_MOBILE)),I(4,t.Inject(o.TuiDialogService)),I(5,t.Optional()),I(5,t.Inject(r.TUI_MOBILE_CALENDAR)),I(6,t.Inject(o.TUI_TEXTFIELD_SIZE)),I(7,t.Inject(o.TUI_TEXTFIELD_EXAMPLE_TEXT)),I(8,t.Inject(i.TUI_DATE_FORMAT)),I(9,t.Inject(i.TUI_DATE_SEPARATOR)),I(10,t.Inject(r.TUI_DATE_TEXTS)),I(11,t.Optional()),I(11,t.Inject(r.TUI_DATE_RANGE_VALUE_TRANSFORMER))],c)}(i.AbstractTuiNullableControl),x=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}var i;return T(n,e),i=n,Object.defineProperty(n.prototype,"value",{get:function(){return this.host.computedValue},enumerable:!0,configurable:!0}),n.prototype.onValueChange=function(e){this.host.onValueChange(e)},n.prototype.process=function(e){e.inputMode="numeric"},n=i=v([t.Directive({selector:"tui-input-date-range",providers:[{provide:o.TUI_TEXTFIELD_HOST,useExisting:t.forwardRef((function(){return i}))}]})],n)}(o.TuiAbstractTextfieldHost),A=function(){function e(){}return e=v([t.NgModule({imports:[g.CommonModule,h.TextMaskModule,i.TuiActiveZoneModule,i.TuiLetModule,l.PolymorpheusModule,o.TuiPrimitiveTextfieldModule,o.TuiTextfieldControllerModule,o.TuiHostedDropdownModule,o.TuiSvgModule,m.TuiCalendarRangeModule,f.TuiValueAccessorModule],declarations:[b,x],exports:[b,x,o.TuiTextfieldComponent]})],e)}();e.RANGE_STREAM_FACTORY=E,e.TUI_INPUT_DATE_RANGE_PROVIDERS=_,e.TuiInputDateRangeComponent=b,e.TuiInputDateRangeDirective=x,e.TuiInputDateRangeModule=A,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=taiga-ui-kit-components-input-date-range.umd.min.js.map