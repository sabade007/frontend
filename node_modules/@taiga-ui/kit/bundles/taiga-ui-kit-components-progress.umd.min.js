!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/core"),require("@taiga-ui/cdk"),require("@ng-web-apis/common"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@taiga-ui/kit/components/progress",["exports","@angular/common","@angular/core","@taiga-ui/cdk","@ng-web-apis/common","rxjs","rxjs/operators"],t):t(((e=e||self)["taiga-ui"]=e["taiga-ui"]||{},e["taiga-ui"].kit=e["taiga-ui"].kit||{},e["taiga-ui"].kit.components=e["taiga-ui"].kit.components||{},e["taiga-ui"].kit.components.progress={}),e.ng.common,e.ng.core,e.cdk,e.common$1,e.rxjs,e.rxjs.operators)}(this,(function(e,t,r,o,s,n,i){"use strict";var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function l(e,t,r,o){var s,n=arguments.length,i=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(n<3?s(i):n>3?s(t,r,i):s(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i}function u(e,t){return function(r,o){t(r,o,e)}}Object.create;Object.create;var p=function(){function e(){this.size="m"}return l([r.Input(),r.HostBinding("style.--tui-progress-color")],e.prototype,"color",void 0),l([r.Input(),r.HostBinding("attr.data-size"),o.tuiDefaultProp()],e.prototype,"size",void 0),e=l([r.Component({selector:"progress[tuiProgressBar]",template:"",changeDetection:r.ChangeDetectionStrategy.OnPush,styles:[":host{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;color:var(--tui-progress-color,currentColor);background-color:var(--tui-base-03);display:block;width:100%;color:var(--tui-primary);border-radius:var(--tui-radius-xs);overflow:hidden}:host::-webkit-progress-value{-webkit-transition:width var(--tui-duration) linear;transition:width var(--tui-duration) linear;background:var(--tui-progress-color,currentColor)}:host::-moz-progress-bar{background:var(--tui-progress-color,currentColor)}:host::-webkit-progress-bar{background-color:var(--tui-base-03)}:host[data-size='m']{height:1.5rem}:host[data-size='s']{border-radius:var(--tui-radius-xs);height:.5rem}:host[data-size='s']::-webkit-progress-value{border-radius:var(--tui-radius-xs)}:host[data-size='s']::-moz-progress-bar{border-radius:var(--tui-radius-xs)}:host-context(label[tuiProgressLabel]):not(:first-child){position:absolute;top:0;left:0;width:100%;height:100%;background-color:transparent}:host-context(label[tuiProgressLabel]):not(:first-child)::-webkit-progress-bar{background-color:transparent}"]})],e)}(),g=function(e,t){var r=Math.ceil(t/e.length);return"linear-gradient(to right "+e.reduce((function(e,t,s){return e+", "+t+" "+o.px(s*r)+" "+o.px((s+1)*r)}),"")+")"},d=function(){function e(e,t,r){this.elementRef=e,this.resize$=t,this.userAgent=r,this.isOldBrowsers=o.isEdgeOlderThan(o.CHROMIUM_EDGE_START_VERSION,this.userAgent)||o.isIE(this.userAgent),this.colors=[]}return Object.defineProperty(e.prototype,"calcSegments$",{get:function(){var e=this;return this.resize$.pipe(i.map((function(){return e.isOldBrowsers?e.colors[0]:g(e.colors,e.elementRef.nativeElement.offsetWidth)})))},enumerable:!0,configurable:!0}),e.ctorParameters=function(){return[{type:r.ElementRef,decorators:[{type:r.Inject,args:[r.ElementRef]}]},{type:n.Observable,decorators:[{type:r.Inject,args:[o.TuiResizeService]}]},{type:String,decorators:[{type:r.Inject,args:[s.USER_AGENT]}]}]},l([r.Input("tuiProgressColorSegments")],e.prototype,"colors",void 0),l([o.tuiPure],e.prototype,"calcSegments$",null),e=l([r.Directive({selector:"progress[tuiProgressBar][tuiProgressColorSegments]",host:{"[$.style.--tui-progress-color]":"calcSegments$","($.style.--tui-progress-color)":"0"},providers:[o.TuiDestroyService,o.TuiResizeService]}),u(0,r.Inject(r.ElementRef)),u(1,r.Inject(o.TuiResizeService)),u(2,r.Inject(s.USER_AGENT))],e)}(),h=function(){function e(e,t,r){this.userAgent=e,this.win=t,this.el=r,this.value=0,this.max=1,this.color=null,this.size="m",this.animationDelay$=n.of(!0).pipe(i.delay(0))}return Object.defineProperty(e.prototype,"progressPercentage",{get:function(){return this.value/this.max},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"oldEdgeRadiusFallback",{get:function(){if(!o.tuiIsEdgeOlderThan(o.CHROMIUM_EDGE_START_VERSION,this.userAgent))return null;var e=parseInt(this.win.getComputedStyle(this.progressCircle.nativeElement).strokeWidth,10);return(this.el.nativeElement.offsetWidth-e)/2},enumerable:!0,configurable:!0}),e.ctorParameters=function(){return[{type:String,decorators:[{type:r.Inject,args:[s.USER_AGENT]}]},{type:Window,decorators:[{type:r.Inject,args:[s.WINDOW]}]},{type:r.ElementRef,decorators:[{type:r.Inject,args:[r.ElementRef]}]}]},l([r.ViewChild("progressCircle",{static:!0})],e.prototype,"progressCircle",void 0),l([r.Input(),o.tuiDefaultProp()],e.prototype,"value",void 0),l([r.Input(),o.tuiDefaultProp()],e.prototype,"max",void 0),l([r.Input(),r.HostBinding("style.--tui-progress-color"),o.tuiDefaultProp()],e.prototype,"color",void 0),l([r.Input(),r.HostBinding("attr.data-size"),o.tuiDefaultProp()],e.prototype,"size",void 0),l([r.HostBinding("style.--progress-percentage")],e.prototype,"progressPercentage",null),e=l([r.Component({selector:"tui-progress-circle",template:'<progress\n    class="t-hidden-progress"\n    [value]="value"\n    [max]="max"\n></progress>\n\n<svg\n    height="100%"\n    width="100%"\n    aria-hidden="true"\n    class="t-svg"\n>\n    <circle\n        cx="50%"\n        cy="50%"\n        class="t-track"\n        [attr.r]="oldEdgeRadiusFallback"\n    ></circle>\n\n    <circle\n        #progressCircle\n        cx="50%"\n        cy="50%"\n        class="t-progress"\n        [class.t-progress_filled]="animationDelay$ | async"\n        [attr.r]="oldEdgeRadiusFallback"\n    ></circle>\n</svg>\n',changeDetection:r.ChangeDetectionStrategy.OnPush,styles:[":host{position:relative;display:block;color:var(--tui-primary);transform:rotate(-90deg);transform-origin:center;font-size:1rem}:host[data-size='s']{width:2em;height:2em}:host[data-size='s'] .t-track{\n  r: 0.75em;\n  stroke-width:.5em}:host[data-size='s'] .t-progress{\n  r: 0.75em;\n  stroke-width:.5em;stroke-dasharray:4.71238898em;stroke-dashoffset:4.71238898em}:host[data-size='s'] .t-progress_filled{transition:stroke-dashoffset var(--tui-duration) linear;stroke-dashoffset:calc(4.71238898em - var(--progress-percentage) * 4.71238898em)}:host[data-size='m']{width:3em;height:3em}:host[data-size='m'] .t-track{\n  r: 1.3125em;\n  stroke-width:.375em}:host[data-size='m'] .t-progress{\n  r: 1.3125em;\n  stroke-width:.375em;stroke-dasharray:8.24668072em;stroke-dashoffset:8.24668072em}:host[data-size='m'] .t-progress_filled{transition:stroke-dashoffset var(--tui-duration) linear;stroke-dashoffset:calc(8.24668072em - var(--progress-percentage) * 8.24668072em)}:host[data-size='l']{width:4em;height:4em}:host[data-size='l'] .t-track{\n  r: 1.8125em;\n  stroke-width:.375em}:host[data-size='l'] .t-progress{\n  r: 1.8125em;\n  stroke-width:.375em;stroke-dasharray:11.38827337em;stroke-dashoffset:11.38827337em}:host[data-size='l'] .t-progress_filled{transition:stroke-dashoffset var(--tui-duration) linear;stroke-dashoffset:calc(11.38827337em - var(--progress-percentage) * 11.38827337em)}:host[data-size=xl]{width:7em;height:7em}:host[data-size=xl] .t-track{\n  r: 3.3125em;\n  stroke-width:.375em}:host[data-size=xl] .t-progress{\n  r: 3.3125em;\n  stroke-width:.375em;stroke-dasharray:20.81305133em;stroke-dashoffset:20.81305133em}:host[data-size=xl] .t-progress_filled{transition:stroke-dashoffset var(--tui-duration) linear;stroke-dashoffset:calc(20.81305133em - var(--progress-percentage) * 20.81305133em)}.t-track{fill:transparent;stroke:var(--tui-base-03)}.t-progress{fill:transparent;stroke:var(--tui-progress-color,currentColor);stroke-linecap:round}.t-hidden-progress{position:absolute;clip:rect(1px,1px,1px,1px);-webkit-clip-path:inset(50%);clip-path:inset(50%);height:1px;width:1px;margin:-1px;overflow:hidden;padding:0}.t-svg{overflow:unset}"]}),u(0,r.Inject(s.USER_AGENT)),u(1,r.Inject(s.WINDOW)),u(2,r.Inject(r.ElementRef))],e)}(),m=function(){function e(){}return e=l([r.Component({selector:"label[tuiProgressLabel]",template:'<ng-content select="progress"></ng-content>\n<ng-content select="tui-progress-circle"></ng-content>\n<span class="t-label">\n    <ng-content></ng-content>\n</span>\n',changeDetection:r.ChangeDetectionStrategy.OnPush,styles:[":host{position:relative;display:inline-block}.t-label{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;font:var(--tui-font-text-s);color:var(--tui-text-01);flex-direction:column;justify-content:center;align-items:center}"]})],e)}();function f(e){return Number.isInteger(e)&&e>=0}function y(e){return Number.isInteger(e)&&e>0}var v=function(){function e(){this.value=0,this.max=1,this.size="m",this.colors="var(--tui-primary)"}return e.prototype.getActiveColor=function(e){return void 0===e&&(e=0),"string"==typeof this.colors?this.colors:this.colors[e]||this.colors[this.colors.length-1]},l([r.Input(),o.tuiDefaultProp(f,"Must be non-negative integer between 0 and max")],e.prototype,"value",void 0),l([r.Input(),o.tuiDefaultProp(y,"Must be positive integer")],e.prototype,"max",void 0),l([r.Input(),r.HostBinding("attr.data-size")],e.prototype,"size",void 0),l([r.Input(),o.tuiDefaultProp()],e.prototype,"colors",void 0),e=l([r.Component({selector:"tui-progress-segmented",template:'<progress\n    class="t-hidden-progress"\n    [value]="value"\n    [max]="max"\n></progress>\n\n<span\n    *tuiRepeatTimes="let index of max"\n    aria-hidden="true"\n    class="t-segment"\n    [style.background]="index < value ? getActiveColor(index) : null"\n></span>\n',changeDetection:r.ChangeDetectionStrategy.OnPush,styles:[":host{display:flex}.t-segment{transition-property:background-color;transition-duration:var(--tui-duration,300ms);transition-timing-function:ease-in-out;flex:1 1 100%;border-radius:var(--tui-radius-xs);background-color:var(--tui-base-03)}.t-segment:not(:last-child){margin-right:.25rem}:host[data-size='s'] .t-segment{height:.25rem}:host[data-size='m'] .t-segment{height:.5rem}.t-hidden-progress{position:absolute;clip:rect(1px,1px,1px,1px);-webkit-clip-path:inset(50%);clip-path:inset(50%);height:1px;width:1px;margin:-1px;overflow:hidden;padding:0}"]})],e)}(),b=function(){function e(e,t){this.userAgent=e,this.elementRef=t,this.isOldBrowsers=o.isEdgeOlderThan(o.CHROMIUM_EDGE_START_VERSION,this.userAgent)||o.isIE(this.userAgent)}return e.prototype.calculate=function(e){if(this.isOldBrowsers)return e[0];var t=this.elementRef.nativeElement.offsetWidth;return g(e,t)},e.ctorParameters=function(){return[{type:String,decorators:[{type:r.Inject,args:[s.USER_AGENT]}]},{type:r.ElementRef,decorators:[{type:r.Inject,args:[r.ElementRef]}]}]},e=l([r.Injectable(),u(0,r.Inject(s.USER_AGENT)),u(1,r.Inject(r.ElementRef))],e)}(),k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.transform=function(e){return this.calculate(e)},t=l([r.Pipe({name:"tuiProgressColorSegments"})],t)}(b),x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.transform=function(e){var t=this;return n.timer(0).pipe(i.map((function(){return t.calculate(e)})))},t=l([r.Pipe({name:"tuiProgressColorSegmentsAsync"})],t)}(b),w=function(){function e(){}return e=l([r.NgModule({imports:[t.CommonModule,o.TuiRepeatTimesModule],declarations:[p,d,k,x,h,m,v],exports:[p,h,d,k,x,m,v]})],e)}();e.AbstractTuiColorSegments=b,e.TuiProgressBarComponent=p,e.TuiProgressCircleComponent=h,e.TuiProgressColorSegmentsAsyncPipe=x,e.TuiProgressColorSegmentsDirective=d,e.TuiProgressColorSegmentsPipe=k,e.TuiProgressLabelComponent=m,e.TuiProgressModule=w,e.TuiProgressSegmentedComponent=v,e.nonNegativeInt=f,e.positiveInt=y,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=taiga-ui-kit-components-progress.umd.min.js.map