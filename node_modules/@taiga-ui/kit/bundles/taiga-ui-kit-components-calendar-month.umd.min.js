!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@taiga-ui/cdk"),require("@taiga-ui/kit/tokens"),require("rxjs"),require("@angular/common"),require("@taiga-ui/core")):"function"==typeof define&&define.amd?define("@taiga-ui/kit/components/calendar-month",["exports","@angular/core","@taiga-ui/cdk","@taiga-ui/kit/tokens","rxjs","@angular/common","@taiga-ui/core"],t):t(((e=e||self)["taiga-ui"]=e["taiga-ui"]||{},e["taiga-ui"].kit=e["taiga-ui"].kit||{},e["taiga-ui"].kit.components=e["taiga-ui"].kit.components||{},e["taiga-ui"].kit.components["calendar-month"]={}),e.ng.core,e.cdk,e["taiga-ui"].kit.tokens,e.rxjs,e.ng.common,e.core$1)}(this,(function(e,t,r,i,n,o,a){"use strict";function l(e,t,r,i){var n,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,i);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(a=(o<3?n(a):o>3?n(t,r,a):n(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a}Object.create;Object.create;var u=r.TuiDay.currentLocal(),s=function(){function e(e){this.months$=e,this.value=null,this.year=u,this.disabledItemHandler=r.ALWAYS_FALSE_HANDLER,this.min=r.TUI_FIRST_DAY,this.max=r.TUI_LAST_DAY,this.monthClick=new t.EventEmitter,this.hoveredItemChange=new t.EventEmitter,this.yearChange=new t.EventEmitter,this.isYearPickerShown=!1,this.hoveredItem=null,this.pressedItem=null}var o,a;return Object.defineProperty(e.prototype,"isSingle",{get:function(){return null!==this.value&&(this.value instanceof r.TuiMonth||this.value.isSingleMonth)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"previousYearDisabled",{get:function(){return this.year.yearSameOrBefore(this.min)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nextYearDisabled",{get:function(){return this.year.yearSameOrAfter(this.max)},enumerable:!0,configurable:!0}),e.prototype.getItemState=function(e){var t=this.disabledItemHandlerWithMinMax,r=this.pressedItem,i=this.hoveredItem;return t(e)?"disabled":(null==r?void 0:r.monthSame(e))?"pressed":(null==i?void 0:i.monthSame(e))?"hovered":null},e.prototype.getItemRange=function(e){var t=this.value,i=this.hoveredItem;if(null===t)return null;if(t instanceof r.TuiMonth)return t.monthSame(e)?"single":null;var n=t.from.monthSame(e)&&!t.isSingleMonth,o=(null==i?void 0:i.monthAfter(t.from))&&t.from.monthSame(e)&&t.isSingleMonth,a=(null==i?void 0:i.monthSame(e))&&(null==i?void 0:i.monthBefore(t.from))&&t.isSingleMonth;if(n||o||a)return"start";var l=t.to.monthSame(e)&&!t.isSingleMonth,u=t.to.monthSame(e)&&(null==i?void 0:i.monthBefore(t.to))&&t.isSingleMonth,s=(null==i?void 0:i.monthSame(e))&&(null==i?void 0:i.monthAfter(t.from))&&t.isSingleMonth;return l||u||s?"end":t.isSingleMonth&&t.from.monthSame(e)?"single":null},e.prototype.getTuiMonth=function(e,t){return new r.TuiMonth(t,e)},e.prototype.isItemToday=function(e){return u.monthSame(e)},e.prototype.isItemInsideRange=function(e){var t=this.value,i=this.hoveredItem;if(null===t||t instanceof r.TuiMonth)return!1;if(!t.isSingleMonth)return t.from.monthSameOrBefore(e)&&t.to.monthAfter(e);if(null===i)return!1;var n=r.TuiMonthRange.sort(t.from,i);return n.from.monthSameOrBefore(e)&&n.to.monthAfter(e)},e.prototype.onPickerYearClick=function(e){this.isYearPickerShown=!1,this.year.yearSame(e)||this.updateActiveYear(e)},e.prototype.onItemClick=function(e){this.disabledItemHandlerWithMinMax(e)||this.monthClick.emit(e)},e.prototype.onYearClick=function(){this.isYearPickerShown=!0},e.prototype.onNextYear=function(){this.updateActiveYear(this.year.append({year:1}))},e.prototype.onPreviousYear=function(){this.updateActiveYear(this.year.append({year:-1}))},e.prototype.onItemHovered=function(e,t){this.updateHoveredItem(e?t:null)},e.prototype.onItemPressed=function(e,t){this.updatePressedItem(e?t:null)},e.prototype.calculateDisabledItemHandlerWithMinMax=function(e,t,r,i){return function(n){return n.monthBefore(r)||n.monthAfter(i)||e(n,{value:t})}},Object.defineProperty(e.prototype,"disabledItemHandlerWithMinMax",{get:function(){return this.calculateDisabledItemHandlerWithMinMax(this.disabledItemHandler,this.value,this.min,this.max)},enumerable:!0,configurable:!0}),e.prototype.updateHoveredItem=function(e){r.nullableSame(this.hoveredItem,e,(function(e,t){return e.monthSame(t)}))||(this.hoveredItem=e,this.hoveredItemChange.emit(e))},e.prototype.updatePressedItem=function(e){this.pressedItem=e},e.prototype.updateActiveYear=function(e){this.year=e,this.yearChange.emit(e)},e.ctorParameters=function(){return[{type:n.Observable,decorators:[{type:t.Inject,args:[i.TUI_CALENDAR_MONTHS]}]}]},l([t.Input(),r.tuiDefaultProp()],e.prototype,"value",void 0),l([t.Input(),r.tuiDefaultProp()],e.prototype,"year",void 0),l([t.Input(),r.tuiDefaultProp()],e.prototype,"disabledItemHandler",void 0),l([t.Input(),r.tuiDefaultProp()],e.prototype,"min",void 0),l([t.Input(),r.tuiDefaultProp()],e.prototype,"max",void 0),l([t.Output()],e.prototype,"monthClick",void 0),l([t.Output()],e.prototype,"hoveredItemChange",void 0),l([t.Output()],e.prototype,"yearChange",void 0),l([t.HostBinding("class._single")],e.prototype,"isSingle",null),l([r.tuiPure],e.prototype,"calculateDisabledItemHandlerWithMinMax",null),e=l([t.Component({selector:"tui-calendar-month",template:'<tui-scrollbar\n    *ngIf="isYearPickerShown; else monthSelect"\n    class="t-scrollbar"\n>\n    <tui-primitive-year-picker\n        [min]="min"\n        [max]="max"\n        [initialItem]="year"\n        [value]="value"\n        (yearClick)="onPickerYearClick($event)"\n    ></tui-primitive-year-picker>\n</tui-scrollbar>\n<ng-template #monthSelect>\n    <tui-primitive-spin-button\n        [focusable]="false"\n        [leftDisabled]="previousYearDisabled"\n        [rightDisabled]="nextYearDisabled"\n        (leftClick)="onPreviousYear()"\n        (rightClick)="onNextYear()"\n    >\n        <button\n            tuiLink\n            automation-id="tui-calendar-month__active-year"\n            [tuiFocusable]="false"\n            (click)="onYearClick()"\n        >\n            {{ year.formattedYear }}\n        </button>\n    </tui-primitive-spin-button>\n    <div class="t-row">\n        <ng-container *ngFor="let month of months$ | async; let index = index">\n            <div\n                *tuiLet="getTuiMonth(index, year.year) as item"\n                class="t-cell"\n                [class.t-cell_today]="isItemToday(item)"\n                [class.t-cell_interval]="isItemInsideRange(item)"\n                [attr.data-range]="getItemRange(item)"\n                [attr.data-state]="getItemState(item)"\n                (tuiHoveredChange)="onItemHovered($event, item)"\n                (tuiPressedChange)="onItemHovered($event, item)"\n                (click)="onItemClick(item)"\n            >\n                <div class="t-item">{{ month }}</div>\n            </div>\n        </ng-container>\n    </div>\n</ng-template>\n',changeDetection:t.ChangeDetectionStrategy.OnPush,styles:[":host{font:var(--tui-font-text-m)}.t-row{position:relative;z-index:0;display:flex;justify-content:space-between;height:2.25rem}.t-item{position:relative;flex:1;line-height:2rem;border-radius:var(--tui-radius-m)}.t-item:after,.t-item:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell{position:relative;display:flex;align-items:center;justify-content:center;width:3.6875rem;text-align:center;outline:0;cursor:pointer;background-clip:content-box;box-sizing:border-box;border:2px solid transparent;box-sizing:content-box}.t-cell:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell_today:after{position:absolute;left:50%;transform:translate(-50%,0);content:'';bottom:.3125rem;height:.125rem;width:.75rem;border-radius:.375rem;background-color:var(--tui-text-02)}.t-cell_interval:before{background:var(--tui-base-02)}:host._single .t-cell_interval:before{background:var(--tui-secondary-hover)}.t-cell_interval:not(:last-child):before{right:-3.6875rem}.t-cell_interval:last-child:first-child:before{right:0}.t-cell_interval:first-child>.t-item{border-top-left-radius:var(--tui-radius-m);border-bottom-left-radius:var(--tui-radius-m)}.t-cell_interval:last-child>.t-item{border-top-right-radius:var(--tui-radius-m);border-bottom-right-radius:var(--tui-radius-m)}.t-cell_interval>.t-item{border-radius:0}.t-cell[data-range]:after{background-color:var(--tui-primary-text)}.t-cell[data-range]>.t-item{color:var(--tui-primary-text)}.t-cell[data-range]>.t-item:after,.t-cell[data-range]>.t-item:before{background-color:var(--tui-primary)}.t-cell[data-range][data-state=hovered]>.t-item:after,.t-cell[data-range][data-state=hovered]>.t-item:before{background-color:var(--tui-primary-hover)}.t-cell[data-range][data-state=pressed]>.t-item:after,.t-cell[data-range][data-state=pressed]>.t-item:before{background-color:var(--tui-primary-active)}.t-cell[data-range=end]>.t-item:before{left:.25rem}.t-cell[data-range=end]>.t-item:after{left:-2rem;right:100%;transform:translateX(1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-range=start]>.t-item:before{right:.25rem}.t-cell[data-range=start]>.t-item:after{left:100%;right:-2rem;transform:translateX(-1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-state=disabled]{pointer-events:none}.t-cell[data-state=disabled]>.t-item{opacity:.36}.t-cell[data-state=hovered]:hover:not([data-range])>.t-item{background-color:var(--tui-secondary-hover)}.t-cell[data-state=pressed]:hover:not([data-range])>.t-item{background-color:var(--tui-secondary-active)}:host{display:block;height:13.625rem;width:15.75rem;padding:1.125rem;box-sizing:content-box}.t-row{flex-wrap:wrap;margin-top:1.4375rem}.t-cell:nth-child(n+5){margin-top:1.75rem}.t-cell_interval:nth-child(4n):before{right:0}.t-scrollbar{height:inherit;width:inherit}"]}),(o=0,a=t.Inject(i.TUI_CALENDAR_MONTHS),function(e,t){a(e,t,o)})],e)}(),d=function(){function e(){}return e=l([t.NgModule({imports:[o.CommonModule,a.TuiPrimitiveYearPickerModule,a.TuiPrimitiveSpinButtonModule,a.TuiScrollbarModule,a.TuiLinkModule,r.TuiLetModule,r.TuiHoveredModule,r.TuiPressedModule,r.TuiFocusableModule],declarations:[s],exports:[s]})],e)}();e.TuiCalendarMonthComponent=s,e.TuiCalendarMonthModule=d,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=taiga-ui-kit-components-calendar-month.umd.min.js.map