!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/common"),require("@angular/core"),require("@angular/forms"),require("@taiga-ui/cdk"),require("@taiga-ui/kit/abstract"),require("@taiga-ui/kit/components/slider"),require("@taiga-ui/kit/constants"),require("@taiga-ui/kit/tokens"),require("@taiga-ui/kit/utils"),require("rxjs"),require("@taiga-ui/core"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@taiga-ui/kit/components/range",["exports","@angular/common","@angular/core","@angular/forms","@taiga-ui/cdk","@taiga-ui/kit/abstract","@taiga-ui/kit/components/slider","@taiga-ui/kit/constants","@taiga-ui/kit/tokens","@taiga-ui/kit/utils","rxjs","@taiga-ui/core","rxjs/operators"],e):e(((t=t||self)["taiga-ui"]=t["taiga-ui"]||{},t["taiga-ui"].kit=t["taiga-ui"].kit||{},t["taiga-ui"].kit.components=t["taiga-ui"].kit.components||{},t["taiga-ui"].kit.components.range={}),t.ng.common,t.ng.core,t.ng.forms,t.cdk,t["taiga-ui"].kit.abstract,t["taiga-ui"].kit.components.slider,t["taiga-ui"].kit.constants,t["taiga-ui"].kit.tokens,t["taiga-ui"].kit.utils,t.rxjs,t.core$1,t.rxjs.operators)}(this,(function(t,e,n,i,r,a,o,s,u,p,l,c,m){"use strict";var g=function(t,e){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function d(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}function f(t,e){return function(n,i){e(n,i,t)}}Object.create;function h(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,a=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(i=a.next()).done;)o.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o}Object.create;var y=function(){function t(){}return t=d([n.Directive({selector:"tui-range[new], tui-input-range[new]"})],t)}(),v=function(t){function c(e,n,i,a,o,s){var u=t.call(this,e,n,i,o)||this;return u.elementRef=a,u.isNew=s,u.min=0,u.max=1/0,u.steps=0,u.quantum=0,u.size="m",u.segments=0,u.keySteps=null,u.slidersRefs=r.EMPTY_QUERY,u.lastActiveThumb="right",u}var m;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}g(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(c,t),m=c,Object.defineProperty(c.prototype,"nativeFocusableElement",{get:function(){var t=h(this.slidersRefs,2),e=t[0],n=t[1];return!this.computedDisabled&&e&&n?this.isLeftFocusable?e.nativeElement:n.nativeElement:null},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"focused",{get:function(){return r.isNativeFocusedIn(this.elementRef.nativeElement)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"fractionStep",{get:function(){return this.steps?1/this.steps:this.quantum?this.quantum/(this.max-this.min):a.SLIDER_KEYBOARD_STEP},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"computedKeySteps",{get:function(){return this.computePureKeySteps(this.keySteps,this.min,this.max)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"left",{get:function(){return this.getPercentageFromValue(this.value[0])},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"right",{get:function(){return 100-this.getPercentageFromValue(this.value[1])},enumerable:!0,configurable:!0}),c.prototype.onFocused=function(t){this.updateFocused(t)},c.prototype.changeByStep=function(t,e){var n=h(this.slidersRefs,2),i=n[0],r=n[1],a=i.nativeElement,o=r.nativeElement,s=e===this.elementRef.nativeElement?"right"===this.lastActiveThumb:e===o,u=s?o:a,p=s?this.value[1]:this.value[0],l=this.getPercentageFromValue(p)/100+t*this.fractionStep;this.processValue(this.getValueFromFraction(l),s),u&&u.focus()},c.prototype.processValue=function(t,e){var n=this.valueGuard(t);e?this.updateEnd(n):this.updateStart(n),this.lastActiveThumb=e?"right":"left"},c.prototype.fractionGuard=function(t){return r.clamp(r.quantize(t,this.fractionStep),0,1)},c.prototype.getValueFromFraction=function(t){var e=100*this.fractionGuard(t);return p.tuiPercentageToKeyStepValue(e,this.computedKeySteps)},c.prototype.getPercentageFromValue=function(t){return p.tuiKeyStepValueToPercentage(t,this.computedKeySteps)},c.prototype.valueGuard=function(t){return r.clamp(this.quantum?r.round(Math.round(t/this.quantum)*this.quantum,s.TUI_FLOATING_PRECISION):t,this.min,this.max)},c.prototype.getFallbackValue=function(){return[0,0]},c.prototype.computePureKeySteps=function(t,e,n){return t&&p.tuiCheckKeyStepsHaveMinMaxPercents(t)?t:(r.tuiAssert.assert(!t,"\nInput property [keySteps] should contain min and max percents.\nWe have taken [min] and [max] properties of your component for now (but it will not work in v3.0).\nSee example how properly use [keySteps]: https://taiga-ui.dev/components/range#key-steps"),function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(h(arguments[e]));return t}([[0,e]],t||[],[[100,n]]))},c.prototype.updateStart=function(t){this.updateValue([Math.min(t,this.value[1]),this.value[1]])},c.prototype.updateEnd=function(t){this.updateValue([this.value[0],Math.max(t,this.value[0])])},c.ctorParameters=function(){return[{type:i.NgControl,decorators:[{type:n.Optional},{type:n.Self},{type:n.Inject,args:[i.NgControl]}]},{type:n.ChangeDetectorRef,decorators:[{type:n.Inject,args:[n.ChangeDetectorRef]}]},{type:Document,decorators:[{type:n.Inject,args:[e.DOCUMENT]}]},{type:n.ElementRef,decorators:[{type:n.Inject,args:[n.ElementRef]}]},{type:l.Observable,decorators:[{type:n.Inject,args:[u.TUI_FROM_TO_TEXTS]}]},{type:y,decorators:[{type:n.Optional},{type:n.Inject,args:[y]}]}]},d([n.Input(),r.tuiDefaultProp()],c.prototype,"min",void 0),d([n.Input(),r.tuiDefaultProp()],c.prototype,"max",void 0),d([n.Input(),r.tuiDefaultProp()],c.prototype,"steps",void 0),d([n.Input(),r.tuiDefaultProp(r.nonNegativeFiniteAssertion,"Quantum must be a non-negative number")],c.prototype,"quantum",void 0),d([n.Input(),n.HostBinding("attr.data-size"),r.tuiDefaultProp()],c.prototype,"size",void 0),d([n.Input(),r.tuiDefaultProp()],c.prototype,"segments",void 0),d([n.Input(),r.tuiDefaultProp()],c.prototype,"keySteps",void 0),d([n.ViewChildren(o.TuiSliderComponent,{read:n.ElementRef})],c.prototype,"slidersRefs",void 0),d([n.HostBinding("style.--left.%")],c.prototype,"left",null),d([n.HostBinding("style.--right.%")],c.prototype,"right",null),d([n.HostListener("focusin",["true"]),n.HostListener("focusout",["false"])],c.prototype,"onFocused",null),d([n.HostListener("keydown.arrowUp.prevent",["1","$event.target"]),n.HostListener("keydown.arrowRight.prevent",["1","$event.target"]),n.HostListener("keydown.arrowLeft.prevent",["-1","$event.target"]),n.HostListener("keydown.arrowDown.prevent",["-1","$event.target"])],c.prototype,"changeByStep",null),d([r.tuiPure],c.prototype,"computePureKeySteps",null),c=m=d([n.Component({selector:"tui-range",template:'<div class="t-track">\n    <input\n        tuiSlider\n        readonly\n        type="range"\n        step="any"\n        automation-id="tui-range__left"\n        class="t-thumb"\n        [min]="min"\n        [max]="max"\n        [ngModel]="value[0]"\n        [size]="size"\n        [keySteps]="computedKeySteps"\n        [tuiFocusable]="focusable"\n        [attr.disabled]="computedDisabled || null"\n    />\n    <input\n        tuiSlider\n        readonly\n        type="range"\n        step="any"\n        automation-id="tui-range__right"\n        class="t-thumb"\n        [min]="min"\n        [max]="max"\n        [ngModel]="value[1]"\n        [size]="size"\n        [keySteps]="computedKeySteps"\n        [tuiFocusable]="focusable"\n        [attr.disabled]="computedDisabled || null"\n    />\n</div>\n\n\x3c!-- TODO backward compatibility only (remove in v3.0) --\x3e\n<div\n    *ngIf="segments > 0"\n    class="t-segments"\n>\n    <span\n        *tuiRepeatTimes="let tickIndex of segments + 1"\n        automation-id="tui-slider__segment"\n        class="t-segment"\n    >\n        <ng-container *ngIf="fromToTexts$ | async as fromToText">\n            <span\n                *ngIf="!isNew"\n                class="t-number"\n            >\n                {{ getSegmentPrefix(tickIndex, fromToText) }}\n                {{ tickIndex | tuiSliderTickLabel: segments:computedKeySteps | tuiFormatNumber }}\n                <span *ngIf="pluralizeMap">\n                    {{ tickIndex | tuiSliderTickLabel: segments:computedKeySteps | i18nPlural: pluralizeMap }}\n                </span>\n            </span>\n        </ng-container>\n    </span>\n</div>\n',changeDetection:n.ChangeDetectionStrategy.OnPush,host:{"[attr.tabindex]":"-1","[attr.aria-disabled]":"computedDisabled"},providers:[{provide:r.TUI_FOCUSABLE_ITEM_ACCESSOR,useExisting:n.forwardRef((function(){return m}))}],styles:[":host{position:relative;display:block;height:.125rem;border-radius:var(--tui-radius-m);background:var(--tui-base-03);cursor:pointer;outline:0;margin:.4375rem 0;touch-action:pan-x}:host:active{cursor:ew-resize}:host:after{content:'';position:absolute;top:-.4375rem;bottom:-.4375rem;width:100%}:host._disabled{opacity:var(--tui-disabled-opacity);cursor:auto}:host[data-size='s'] .t-track{position:relative;margin:0 .25rem;height:100%}:host[data-size='s'] .t-track:after{content:'';position:absolute;top:0;left:var(--left);right:var(--right);height:100%;background:var(--tui-primary);margin:0 -.25rem}:host[data-size='m'] .t-track{position:relative;margin:0 .5rem;height:100%}:host[data-size='m'] .t-track:after{content:'';position:absolute;top:0;left:var(--left);right:var(--right);height:100%;background:var(--tui-primary);margin:0 -.5rem}.t-thumb{pointer-events:none;position:absolute;top:.0625rem;left:0;right:0;z-index:1;transform:translate(0,-50%)}.t-thumb::-webkit-slider-thumb{pointer-events:all}.t-thumb::-moz-range-thumb{pointer-events:all}input[type=range].t-thumb::-webkit-slider-runnable-track{background:0 0}input[type=range].t-thumb::-moz-range-track{background:0 0}input[type=range].t-thumb::-moz-range-progress{background:0 0}input[type=range].t-thumb::-ms-track{background:0 0}input[type=range].t-thumb::-ms-fill-lower{background:0 0}.t-thumb:last-of-type::-webkit-slider-thumb{transform:translate(50%,0)}.t-thumb:first-of-type::-webkit-slider-thumb{transform:translate(-50%,0)}.t-thumb:last-of-type::-moz-range-thumb{transform:translate(50%,0)}.t-thumb:first-of-type::-moz-range-thumb{transform:translate(-50%,0)}:host._disabled .t-thumb{opacity:1}.t-segments{position:absolute;top:0;left:0;bottom:0;right:0}:host[data-size='s'] .t-segments{display:flex;margin:0 .25rem;font:var(--tui-font-text-s);padding:0 .25rem}:host[data-size='s'] .t-segments>*{position:relative;flex:2;text-align:center}:host[data-size='s'] .t-segments>:first-child{left:-.25rem;flex:1;text-align:left}:host[data-size='s'] .t-segments>:last-child{right:-.25rem;flex:1;text-align:right}tui-input-slider+:host[data-size='s'] .t-segments{margin-left:calc(var(--tui-radius-m)/ 2 + .25rem)}tui-input-range+:host[data-size='s'] .t-segments,tui-range+:host[data-size='s'] .t-segments{margin-left:.5rem;margin-right:.5rem}tui-input-range+:host[data-size='s'] .t-segments>:first-child,tui-range+:host[data-size='s'] .t-segments>:first-child{left:-.5rem}tui-input-range+:host[data-size='s'] .t-segments>:last-child,tui-range+:host[data-size='s'] .t-segments>:last-child{right:-.5rem}:host[data-size='m'] .t-segments{display:flex;margin:0 .5rem;font:var(--tui-font-text-s);padding:0 .5rem}:host[data-size='m'] .t-segments>*{position:relative;flex:2;text-align:center}:host[data-size='m'] .t-segments>:first-child{left:-.5rem;flex:1;text-align:left}:host[data-size='m'] .t-segments>:last-child{right:-.5rem;flex:1;text-align:right}tui-input-slider+:host[data-size='m'] .t-segments{margin-left:calc(var(--tui-radius-m)/ 2 + .5rem)}tui-input-range+:host[data-size='m'] .t-segments,tui-range+:host[data-size='m'] .t-segments{margin-left:1rem;margin-right:1rem}tui-input-range+:host[data-size='m'] .t-segments>:first-child,tui-range+:host[data-size='m'] .t-segments>:first-child{left:-1rem}tui-input-range+:host[data-size='m'] .t-segments>:last-child,tui-range+:host[data-size='m'] .t-segments>:last-child{right:-1rem}.t-segment:not(:last-of-type):not(:first-of-type):before{content:'';position:absolute;left:0;right:0;margin:auto;background:var(--tui-base-07);width:.25rem;height:100%}.t-segment:last-of-type .t-number{margin-right:-.5rem}.t-segment:first-of-type .t-number{margin-left:-.5rem}.t-number{display:inline-block;margin-top:.5rem}"]}),f(0,n.Optional()),f(0,n.Self()),f(0,n.Inject(i.NgControl)),f(1,n.Inject(n.ChangeDetectorRef)),f(2,n.Inject(e.DOCUMENT)),f(3,n.Inject(n.ElementRef)),f(4,n.Inject(u.TUI_FROM_TO_TEXTS)),f(5,n.Optional()),f(5,n.Inject(y))],c)}(a.AbstractTuiSlider),b=function(){function t(t,e,i,a){var o,s=this;this.documentRef=t,this.elementRef=e,this.range=i,this.pointerDown$=l.merge(r.typedFromEvent(this.elementRef.nativeElement,"touchstart",{passive:!0}).pipe(m.filter((function(t){return 1===t.touches.length})),m.map((function(t){return t.touches[0]}))),r.typedFromEvent(this.elementRef.nativeElement,"mousedown",{passive:!0})),this.pointerMove$=l.merge(r.typedFromEvent(this.documentRef,"touchmove").pipe(m.filter((function(t){return 1===t.touches.length})),m.map((function(t){return t.touches[0]}))),r.typedFromEvent(this.documentRef,"mousemove")),this.pointerUp$=l.merge(r.typedFromEvent(this.documentRef,"touchend",{passive:!0}),r.typedFromEvent(this.documentRef,"mouseup",{passive:!0})),this.activeThumbChange=new n.EventEmitter,this.pointerDown$.pipe(m.tap((function(t){var n=t.clientX,i=t.target;o=s.detectActiveThumb(n,i),s.activeThumbChange.emit(o),s.range.focusable&&e.nativeElement.focus()})),m.switchMap((function(t){return s.pointerMove$.pipe(m.startWith(t))})),m.map((function(t){var e=t.clientX;return r.clamp(s.getFractionFromEvents(e),0,1)})),m.takeUntil(this.pointerUp$),m.repeat(),m.takeUntil(a)).subscribe((function(t){var e=s.range.getValueFromFraction(s.range.fractionGuard(t));s.range.processValue(e,"right"===o)}))}return t.prototype.getFractionFromEvents=function(t){var e=this.elementRef.nativeElement.getBoundingClientRect(),n=t-e.left,i=e.width;return r.round(n/i,s.TUI_FLOATING_PRECISION)},t.prototype.detectActiveThumb=function(t,e){var n=h(this.range.slidersRefs,2),i=n[0],r=n[1];switch(e){case i.nativeElement:return"left";case r.nativeElement:return"right";default:return this.findNearestActiveThumb(t)}},t.prototype.findNearestActiveThumb=function(t){var e=this.getFractionFromEvents(t),n=100*e-this.range.left,i=100*e-100+this.range.right;return Math.abs(n)>Math.abs(i)||i>0||0===this.range.left&&100===this.range.right?"right":"left"},t.ctorParameters=function(){return[{type:Document,decorators:[{type:n.Inject,args:[e.DOCUMENT]}]},{type:n.ElementRef,decorators:[{type:n.Inject,args:[n.ElementRef]}]},{type:v,decorators:[{type:n.Inject,args:[v]}]},{type:l.Observable,decorators:[{type:n.Inject,args:[r.TuiDestroyService]}]}]},d([n.Output()],t.prototype,"activeThumbChange",void 0),t=d([n.Directive({selector:"tui-range",providers:[r.TuiDestroyService]}),f(0,n.Inject(e.DOCUMENT)),f(1,n.Inject(n.ElementRef)),f(2,n.Inject(v)),f(3,n.Inject(r.TuiDestroyService))],t)}(),k=function(){function t(){}return t=d([n.NgModule({imports:[e.CommonModule,r.TuiRepeatTimesModule,r.TuiFocusableModule,c.TuiFormatNumberPipeModule,o.TuiSliderModule,i.FormsModule],declarations:[v,b,y],exports:[v,b,y]})],t)}();t.TuiNewRangeDirective=y,t.TuiRangeChangeDirective=b,t.TuiRangeComponent=v,t.TuiRangeModule=k,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=taiga-ui-kit-components-range.umd.min.js.map