!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@taiga-ui/cdk"),require("@ng-web-apis/common"),require("rxjs"),require("rxjs/operators"),require("@angular/common"),require("@ng-web-apis/intersection-observer"),require("@taiga-ui/core")):"function"==typeof define&&define.amd?define("@taiga-ui/kit/components/carousel",["exports","@angular/core","@taiga-ui/cdk","@ng-web-apis/common","rxjs","rxjs/operators","@angular/common","@ng-web-apis/intersection-observer","@taiga-ui/core"],t):t(((e=e||self)["taiga-ui"]=e["taiga-ui"]||{},e["taiga-ui"].kit=e["taiga-ui"].kit||{},e["taiga-ui"].kit.components=e["taiga-ui"].kit.components||{},e["taiga-ui"].kit.components.carousel={}),e.ng.core,e.cdk,e.common,e.rxjs,e.rxjs.operators,e.ng.common,e.intersectionObserver,e.core$1)}(this,(function(e,t,n,o,r,i,s,a,u){"use strict";var l=function(e,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function c(e,t,n,o){var r,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s}function p(e,t){return function(n,o){t(n,o,e)}}Object.create;function d(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s}Object.create;var f=function(){function e(e,o,r){this.changeDetectorRef=e,this.elementRef=o,this.isMobile=r,this.translate=0,this.draggable=!1,this.itemsCount=1,this.index=0,this.indexChange=new t.EventEmitter,this.items=n.EMPTY_QUERY,this.transitioned=!0}return Object.defineProperty(e.prototype,"transform",{get:function(){return"translateX("+100*(this.transitioned?this.computedTranslate:this.translate)+"%)"},enumerable:!0,configurable:!0}),e.prototype.onTransitioned=function(e){this.transitioned=e,e||(this.translate=this.computedTranslate)},e.prototype.getStyle=function(e){var t=100/e+"%";return{flexBasis:t,minWidth:t,maxWidth:t}},e.prototype.next=function(){this.updateIndex(this.index+1)},e.prototype.prev=function(){this.updateIndex(this.index-1)},e.prototype.isDisabled=function(e){return e<this.index||e>this.index+this.itemsCount},e.prototype.onIntersection=function(e,t){var n=e.intersectionRatio;n&&1!==n&&!this.transitioned&&this.updateIndex(t-Math.floor(this.itemsCount/2))},e.prototype.onScroll=function(e){this.isMobile||this.updateIndex(this.index+e)},e.prototype.onPan=function(e){if(this.computedDraggable){var t=this.elementRef.nativeElement.clientWidth,o=1-this.items.length/this.itemsCount;this.translate=n.clamp(e/t+this.translate,o,0)}},e.prototype.onSwipe=function(e){"left"===e?this.next():"right"===e&&this.prev()},e.prototype.onAutoscroll=function(){this.updateIndex(this.index===this.items.length-1?0:this.index+1)},Object.defineProperty(e.prototype,"computedTranslate",{get:function(){return-this.index/this.itemsCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"computedDraggable",{get:function(){return this.isMobile||this.draggable},enumerable:!0,configurable:!0}),e.prototype.updateIndex=function(e){this.index=n.clamp(e,0,this.items.length-1),this.indexChange.emit(this.index),this.changeDetectorRef.markForCheck()},e.ctorParameters=function(){return[{type:t.ChangeDetectorRef,decorators:[{type:t.Inject,args:[t.ChangeDetectorRef]}]},{type:t.ElementRef,decorators:[{type:t.Inject,args:[t.ElementRef]}]},{type:Boolean,decorators:[{type:t.Inject,args:[n.TUI_IS_MOBILE]}]}]},c([t.Input(),t.HostBinding("class._draggable"),n.tuiDefaultProp()],e.prototype,"draggable",void 0),c([t.Input(),n.tuiDefaultProp()],e.prototype,"itemsCount",void 0),c([t.Input(),n.tuiDefaultProp()],e.prototype,"index",void 0),c([t.Output()],e.prototype,"indexChange",void 0),c([t.ContentChildren(n.TuiItemDirective,{read:t.TemplateRef})],e.prototype,"items",void 0),c([t.HostBinding("class._transitioned")],e.prototype,"transitioned",void 0),c([t.HostListener("touchstart",["false"]),t.HostListener("touchend",["true"]),t.HostListener("mousedown",["false"]),t.HostListener("document:mouseup.silent",["true"])],e.prototype,"onTransitioned",null),c([n.tuiPure],e.prototype,"getStyle",null),e=c([t.Component({selector:"tui-carousel",template:'<ng-container *ngIf="items.changes | async"></ng-container>\n<div\n    class="t-scroller"\n    (tuiCarouselScroll)="onScroll($event)"\n>\n    <div\n        waIntersectionRoot\n        waIntersectionObserver\n        waIntersectionThreshold="0,1"\n        waIntersectionRootMargin="100px 1000000px 100px -51%"\n        class="t-wrapper"\n    >\n        <div\n            class="t-items"\n            [style.transform]="transform"\n            (tuiPan)="onPan($event[0])"\n            (tuiSwipe)="onSwipe($event.direction)"\n            (tuiCarouselAutoscroll)="onAutoscroll()"\n        >\n            <fieldset\n                *ngFor="let item of items; let i = index"\n                class="t-item"\n                [disabled]="isDisabled(i)"\n                [ngStyle]="getStyle(itemsCount)"\n                (waIntersectionObservee)="onIntersection($event[0], i)"\n            >\n                <ng-container [ngTemplateOutlet]="item"></ng-container>\n            </fieldset>\n        </div>\n    </div>\n</div>\n',changeDetection:t.ChangeDetectionStrategy.OnPush,styles:[":host{position:relative;display:block;overflow:hidden}:host._draggable{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}:host._draggable:hover{cursor:-webkit-grab;cursor:grab}:host._draggable:active{cursor:-webkit-grabbing;cursor:grabbing}.t-items{display:flex}:host._transitioned .t-items{transition-property:transform;transition-duration:var(--tui-duration,300ms);transition-timing-function:ease-in-out}.t-item{display:flex;flex-direction:column;justify-content:center;padding:0 1.25rem;flex:1;min-width:100%;max-width:100%;box-sizing:border-box;border:none;margin:0}.t-wrapper{position:-webkit-sticky;position:sticky;left:0;right:0;min-width:100%;overflow:hidden}.t-scroller{scrollbar-width:none;-ms-overflow-style:none;display:flex;overflow:auto;overscroll-behavior-x:none;padding-bottom:2rem;margin-bottom:-2rem}.t-scroller::-webkit-scrollbar,.t-scroller::-webkit-scrollbar-thumb{background:0 0;width:0;height:0}.t-scroller:after,.t-scroller:before{content:'';display:block;min-width:1rem}"]}),p(0,t.Inject(t.ChangeDetectorRef)),p(1,t.Inject(t.ElementRef)),p(2,t.Inject(n.TUI_IS_MOBILE))],e)}(),m=function(e){function s(t,o){var s=e.call(this,(function(e){return s.output$.subscribe(e)}))||this;return s.elementRef=t,s.visible$=o,s.duration$=new r.BehaviorSubject(0),s.running$=r.merge(n.typedFromEvent(s.elementRef.nativeElement,"mouseenter").pipe(i.mapTo(!1)),n.typedFromEvent(s.elementRef.nativeElement,"touchstart").pipe(i.mapTo(!1)),n.typedFromEvent(s.elementRef.nativeElement,"touchend").pipe(i.mapTo(!0)),n.typedFromEvent(s.elementRef.nativeElement,"mouseleave").pipe(i.mapTo(!0)),s.visible$),s.output$=r.combineLatest([s.duration$,s.running$]).pipe(i.switchMap((function(e){var t=d(e,2),n=t[0],o=t[1];return n&&o?r.interval(n):r.EMPTY}))),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(s,e),Object.defineProperty(s.prototype,"duration",{set:function(e){this.duration$.next(e)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"index",{set:function(e){this.duration$.next(this.duration$.value)},enumerable:!0,configurable:!0}),s.ctorParameters=function(){return[{type:t.ElementRef,decorators:[{type:t.Inject,args:[t.ElementRef]}]},{type:r.Observable,decorators:[{type:t.Inject,args:[o.PAGE_VISIBILITY]}]}]},c([t.Input()],s.prototype,"duration",null),c([t.Input()],s.prototype,"index",null),s=c([t.Directive({selector:"tui-carousel"}),p(0,t.Inject(t.ElementRef)),p(1,t.Inject(o.PAGE_VISIBILITY))],s)}(r.Observable),h=function(){function e(e){this.tuiCarouselAutoscroll=e}return e.ctorParameters=function(){return[{type:r.Observable,decorators:[{type:t.Inject,args:[m]}]}]},e=c([t.Directive({selector:"[tuiCarouselAutoscroll]",outputs:["tuiCarouselAutoscroll"]}),p(0,t.Inject(m))],e)}(),g={appearance:"secondary",shape:"rounded",size:"m"},y=function(){function e(){}return e=c([t.Directive({selector:"[tuiCarouselButtons]",providers:[{provide:u.TUI_BUTTON_OPTIONS,useValue:g}]})],e)}(),b=function(){function e(e){var t=this;this.elementRef=e,this.tuiCarouselScroll=n.typedFromEvent(this.elementRef.nativeElement,"wheel").pipe(i.filter((function(e){var t=e.deltaX;return Math.abs(t)>20})),i.throttleTime(500),i.map((function(e){var t=e.deltaX;return Math.sign(t)})),i.tap((function(){t.elementRef.nativeElement.scrollLeft=10})))}return e.ctorParameters=function(){return[{type:t.ElementRef,decorators:[{type:t.Inject,args:[t.ElementRef]}]}]},c([t.Output()],e.prototype,"tuiCarouselScroll",void 0),e=c([t.Directive({selector:"[tuiCarouselScroll]"}),p(0,t.Inject(t.ElementRef))],e)}(),v=function(){function e(){}return e=c([t.NgModule({imports:[s.CommonModule,a.IntersectionObserverModule,n.TuiPanModule,n.TuiSwipeModule,n.TuiItemModule],declarations:[f,m,y,h,b],exports:[f,m,y,n.TuiItemDirective]})],e)}();e.CAROUSEL_BUTTON_OPTIONS=g,e.TuiCarouselAutoscrollDirective=h,e.TuiCarouselButtonsDirective=y,e.TuiCarouselComponent=f,e.TuiCarouselDirective=m,e.TuiCarouselModule=v,e.TuiCarouselScrollDirective=b,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=taiga-ui-kit-components-carousel.umd.min.js.map