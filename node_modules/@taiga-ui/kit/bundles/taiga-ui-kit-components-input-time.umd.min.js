!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms"),require("@taiga-ui/cdk"),require("@taiga-ui/core"),require("@taiga-ui/kit/providers"),require("@taiga-ui/kit/tokens"),require("@taiga-ui/kit/utils/mask"),require("rxjs"),require("rxjs/operators"),require("@taiga-ui/kit/constants"),require("@angular/common"),require("@taiga-ui/kit/directives"),require("angular2-text-mask")):"function"==typeof define&&define.amd?define("@taiga-ui/kit/components/input-time",["exports","@angular/core","@angular/forms","@taiga-ui/cdk","@taiga-ui/core","@taiga-ui/kit/providers","@taiga-ui/kit/tokens","@taiga-ui/kit/utils/mask","rxjs","rxjs/operators","@taiga-ui/kit/constants","@angular/common","@taiga-ui/kit/directives","angular2-text-mask"],t):t(((e=e||self)["taiga-ui"]=e["taiga-ui"]||{},e["taiga-ui"].kit=e["taiga-ui"].kit||{},e["taiga-ui"].kit.components=e["taiga-ui"].kit.components||{},e["taiga-ui"].kit.components["input-time"]={}),e.ng.core,e.ng.forms,e.cdk,e.core$1,e["taiga-ui"].kit.providers,e["taiga-ui"].kit.tokens,e["taiga-ui"].kit.utils.mask,e.rxjs,e.rxjs.operators,e["taiga-ui"].kit.constants,e.ng.common,e["taiga-ui"].kit.directives,e.angular2TextMask)}(this,(function(e,t,i,n,o,r,u,a,s,l,p,c,d,f){"use strict";var m=function(e,t){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)};var h=function(){return(h=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function g(e,t,i,n){var o,r=arguments.length,u=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(u=(r<3?o(u):r>3?o(t,i,u):o(t,i))||u);return r>3&&u&&Object.defineProperty(t,i,u),u}function v(e,t){return function(i,n){t(i,n,e)}}Object.create;Object.create;var y=function(e){return"s"===e.$implicit?"tuiIconTime":"tuiIconTimeLarge"},b={icon:y,mode:"HH:MM",postfix:"",maxValues:p.MAX_TIME_VALUES,itemSize:"m"},T=new t.InjectionToken("Default parameters for input time component",{factory:function(){return b}}),I=function(e){function p(t,i,o,r){var u=e.call(this,t,i)||this;return u.timeTexts$=o,u.options=r,u.disabledItemHandler=n.ALWAYS_FALSE_HANDLER,u.items=[],u.itemSize=u.options.itemSize,u.strict=!1,u.mode=u.options.mode,u.postfix=u.options.postfix,u.open=!1,u}var c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}m(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}(p,e),c=p,Object.defineProperty(p.prototype,"nativeFocusableElement",{get:function(){return this.textfield?this.textfield.nativeFocusableElement:null},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"focused",{get:function(){return n.isNativeFocused(this.nativeFocusableElement)},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"filtered",{get:function(){return this.filter(this.items,this.mode,this.computedSearch)},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"textMaskOptions",{get:function(){return this.calculateMask(this.mode)},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"computedValue",{get:function(){return this.value?this.value.toString(this.mode):this.nativeValue},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"computedSearch",{get:function(){return this.computedValue.length!==this.mode.length?this.computedValue:""},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"innerPseudoFocused",{get:function(){return!1!==this.pseudoFocused&&(!(!this.open&&!this.computedFocused)||null)},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"icon",{get:function(){return this.options.icon},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"nativeValue",{get:function(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""},set:function(e){this.nativeFocusableElement&&(this.nativeFocusableElement.value=e)},enumerable:!0,configurable:!0}),p.prototype.getFiller$=function(e){return this.timeTexts$.pipe(l.map((function(t){return t[e]})))},p.prototype.onClick=function(){this.open=!this.open},p.prototype.onValueChange=function(e){this.open=!!this.items.length,this.control&&this.control.updateValueAndValidity({emitEvent:!1});var t=this.getMatch(e);if(void 0===t)if(e.length===this.mode.length){var i=n.TuiTime.fromString(e);this.updateValue(this.strict?this.findNearestTimeFromItems(i):i)}else this.updateValue(null);else this.updateValue(t)},p.prototype.onFocused=function(e){var t=this;if(this.updateFocused(e),!e&&null===this.value&&""!==this.nativeValue&&"HH:MM"!==this.mode){var i=n.TuiTime.fromString(this.nativeValue);this.updateValue(i),setTimeout((function(){(t.nativeValue.endsWith(".")||t.nativeValue.endsWith(":"))&&(t.nativeValue=t.nativeValue.slice(0,-1))}))}},p.prototype.onHovered=function(e){this.updateHovered(e)},p.prototype.onArrowUp=function(e){this.items.length||this.processArrow(e,1)},p.prototype.onArrowDown=function(e){this.items.length||this.processArrow(e,-1)},p.prototype.onMenuClick=function(e){this.focusInput(),this.updateValue(e)},p.prototype.onOpen=function(e){this.open=e},p.prototype.writeValue=function(t){e.prototype.writeValue.call(this,t),this.nativeValue=t?this.computedValue:""},p.prototype.calculateMask=function(e){return{mask:a.tuiCreateTimeMask(e,this.options.maxValues),pipe:a.tuiCreateAutoCorrectedTimePipe(e,this.options.maxValues),guide:!1}},p.prototype.filter=function(e,t,i){return e.filter((function(e){return e.toString(t).includes(i)}))},p.prototype.findNearestTimeFromItems=function(e){return this.items.reduce((function(t,i){return Math.abs(i.toAbsoluteMilliseconds()-e.toAbsoluteMilliseconds())<Math.abs(t.toAbsoluteMilliseconds()-e.toAbsoluteMilliseconds())?i:t}))},p.prototype.getMatch=function(e){return this.items.find((function(t){return n.TUI_STRICT_MATCHER(t,e)}))},p.prototype.close=function(){this.open=!1},p.prototype.processArrow=function(e,t){var i=e.target;if(!this.readOnly&&i instanceof HTMLInputElement){var n=i.selectionStart||0;this.shiftTime(this.calculateShift(n,t)),i.setSelectionRange(n,n),e.preventDefault()}},p.prototype.calculateShift=function(e,t){return e<=2?{hours:t}:e<=5?{minutes:t}:e<=8?{seconds:t}:{ms:t}},p.prototype.shiftTime=function(e){if(null!==this.value){var t=this.value.shift(e);this.nativeValue=t.toString(this.mode),this.updateValue(t)}},p.prototype.focusInput=function(e){void 0===e&&(e=!1),this.nativeFocusableElement&&(n.setNativeFocused(this.nativeFocusableElement,!0,e),this.close())},p.ctorParameters=function(){return[{type:i.NgControl,decorators:[{type:t.Optional},{type:t.Self},{type:t.Inject,args:[i.NgControl]}]},{type:t.ChangeDetectorRef,decorators:[{type:t.Inject,args:[t.ChangeDetectorRef]}]},{type:s.Observable,decorators:[{type:t.Inject,args:[u.TUI_TIME_TEXTS]}]},{type:void 0,decorators:[{type:t.Inject,args:[T]}]}]},g([t.ViewChild(o.TuiPrimitiveTextfieldComponent)],p.prototype,"textfield",void 0),g([t.Input(),n.tuiDefaultProp()],p.prototype,"disabledItemHandler",void 0),g([t.Input(),n.tuiDefaultProp()],p.prototype,"items",void 0),g([t.Input(),n.tuiDefaultProp()],p.prototype,"itemSize",void 0),g([t.Input(),n.tuiDefaultProp()],p.prototype,"strict",void 0),g([t.Input(),n.tuiDefaultProp()],p.prototype,"mode",void 0),g([t.Input(),n.tuiDefaultProp()],p.prototype,"postfix",void 0),g([n.tuiPure],p.prototype,"getFiller$",null),g([t.HostListener("click")],p.prototype,"onClick",null),g([n.tuiPure],p.prototype,"calculateMask",null),g([n.tuiPure],p.prototype,"filter",null),p=c=g([t.Component({selector:"tui-input-time",template:'<tui-hosted-dropdown\n    class="t-wrapper"\n    [canOpen]="interactive && !!filtered.length"\n    [content]="dropdownContent"\n    [open]="interactive && open && !!filtered.length"\n    (openChange)="onOpen($event)"\n    (focusedChange)="onFocused($event)"\n>\n    <tui-primitive-textfield\n        tuiValueAccessor\n        tuiTextfieldInputMode="numeric"\n        class="t-textfield"\n        [filler]="(getFiller$(mode) | async) || \'\'"\n        [nativeId]="nativeId"\n        [pseudoFocused]="innerPseudoFocused"\n        [pseudoHovered]="pseudoHovered"\n        [pseudoPressed]="pseudoPressed"\n        [invalid]="computedInvalid"\n        [focusable]="focusable"\n        [disabled]="disabled"\n        [readOnly]="readOnly"\n        [textMask]="textMaskOptions"\n        [iconContent]="icon"\n        [value]="computedValue"\n        [postfix]="postfix"\n        (valueChange)="onValueChange($event)"\n        (hoveredChange)="onHovered($event)"\n        (keydown.arrowUp)="onArrowUp($event)"\n        (keydown.arrowDown)="onArrowDown($event)"\n    >\n        <ng-content></ng-content>\n    </tui-primitive-textfield>\n</tui-hosted-dropdown>\n<ng-template #dropdownContent>\n    <tui-data-list automation-id="tui-input-time__dropdown">\n        <button\n            *ngFor="let item of filtered"\n            tuiOption\n            automation-id="tui-input-time__item"\n            [size]="itemSize"\n            [disabled]="disabledItemHandler(item)"\n            (click)="onMenuClick(item)"\n        >\n            {{ item }}\n        </button>\n    </tui-data-list>\n</ng-template>\n',changeDetection:t.ChangeDetectionStrategy.OnPush,providers:[{provide:n.TUI_FOCUSABLE_ITEM_ACCESSOR,useExisting:t.forwardRef((function(){return c}))},r.FIXED_DROPDOWN_CONTROLLER_PROVIDER],styles:[":host{display:block;border-radius:var(--tui-radius-m);text-align:left}:host._disabled{pointer-events:none}.t-wrapper{display:block;border-radius:inherit}.t-textfield{border-radius:inherit;text-align:inherit}"]}),v(0,t.Optional()),v(0,t.Self()),v(0,t.Inject(i.NgControl)),v(1,t.Inject(t.ChangeDetectorRef)),v(2,t.Inject(u.TUI_TIME_TEXTS)),v(3,t.Inject(T))],p)}(n.AbstractTuiNullableControl),k=function(){function e(){}return e=g([t.NgModule({imports:[c.CommonModule,f.TextMaskModule,o.TuiDataListModule,o.TuiHostedDropdownModule,o.TuiPrimitiveTextfieldModule,d.TuiValueAccessorModule,o.TuiTextfieldControllerModule],declarations:[I],exports:[I]})],e)}();e.INPUT_TIME_ICON=y,e.TUI_INPUT_TIME_DEFAULT_OPTIONS=b,e.TUI_INPUT_TIME_OPTIONS=T,e.TuiInputTimeComponent=I,e.TuiInputTimeModule=k,e.tuiInputTimeOptionsProvider=function(e){return{provide:T,useValue:h(h({},b),e)}},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=taiga-ui-kit-components-input-time.umd.min.js.map