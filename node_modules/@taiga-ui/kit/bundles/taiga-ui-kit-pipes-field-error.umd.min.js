!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common"),require("@angular/forms"),require("@taiga-ui/cdk"),require("@taiga-ui/kit/tokens"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@taiga-ui/kit/pipes/field-error",["exports","@angular/core","@angular/common","@angular/forms","@taiga-ui/cdk","@taiga-ui/kit/tokens","rxjs","rxjs/operators"],e):e(((r=r||self)["taiga-ui"]=r["taiga-ui"]||{},r["taiga-ui"].kit=r["taiga-ui"].kit||{},r["taiga-ui"].kit.pipes=r["taiga-ui"].kit.pipes||{},r["taiga-ui"].kit.pipes["field-error"]={}),r.ng.core,r.ng.common,r.ng.forms,r.cdk,r["taiga-ui"].kit.tokens,r.rxjs,r.rxjs.operators)}(this,(function(r,e,t,o,n,i,a,u){"use strict";function c(r,e,t,o){var n,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(r,e,t,o);else for(var u=r.length-1;u>=0;u--)(n=r[u])&&(a=(i<3?n(a):i>3?n(e,t,a):n(e,t))||a);return i>3&&a&&Object.defineProperty(e,t,a),a}function p(r,e){return function(t,o){e(t,o,r)}}Object.create;Object.create;var l={},s=function(){function r(r,e,t,o,n){this.ngControl=r,this.formArrayName=e,this.formGroupName=t,this.formGroup=o,this.validationErrors=n,this.order=[],this.ngControl&&!this.ngControl.valueAccessor&&(this.ngControl.valueAccessor=this)}return r.prototype.transform=function(r){return this.order=r,this.computedError},Object.defineProperty(r.prototype,"computedError",{get:function(){return this.invalid&&this.touched&&this.error||a.of(null)},enumerable:!0,configurable:!0}),r.prototype.registerOnChange=function(){},r.prototype.registerOnTouched=function(){},r.prototype.setDisabledState=function(){},r.prototype.writeValue=function(){},Object.defineProperty(r.prototype,"error",{get:function(){var r=this.errorId;if(!r)return null;var e=this.controlErrors[r],t=this.validationErrors[r];return this.getError(e,t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"invalid",{get:function(){var r;return!!(null===(r=this.control)||void 0===r?void 0:r.invalid)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"touched",{get:function(){var r;return!!(null===(r=this.control)||void 0===r?void 0:r.touched)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"control",{get:function(){var r,e,t,o;return(null===(r=this.ngControl)||void 0===r?void 0:r.control)||(null===(e=this.formArrayName)||void 0===e?void 0:e.control)||(null===(t=this.formGroupName)||void 0===t?void 0:t.control)||(null===(o=this.formGroup)||void 0===o?void 0:o.control)||null},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"errorId",{get:function(){return this.getErrorId(this.order,this.controlErrors)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"controlErrors",{get:function(){var r;return(null===(r=this.control)||void 0===r?void 0:r.errors)||l},enumerable:!0,configurable:!0}),r.prototype.getErrorId=function(r,e){var t=null==r?void 0:r.find((function(r){return e[r]})),o=Object.keys(e)[0];return t||o||""},r.prototype.getError=function(r,e){return r instanceof n.TuiValidationError?a.of(r):void 0===e&&"string"==typeof r?a.of(new n.TuiValidationError(r)):a.isObservable(e)?e.pipe(u.map((function(e){return new n.TuiValidationError(e||"",r)}))):a.of(new n.TuiValidationError(e||"",r))},r.ctorParameters=function(){return[{type:o.NgControl,decorators:[{type:e.Optional},{type:e.Self},{type:e.Inject,args:[o.NgControl]}]},{type:o.FormArrayName,decorators:[{type:e.Optional},{type:e.Self},{type:e.Inject,args:[o.FormArrayName]}]},{type:o.FormGroupName,decorators:[{type:e.Optional},{type:e.Self},{type:e.Inject,args:[o.FormGroupName]}]},{type:o.FormGroupDirective,decorators:[{type:e.Optional},{type:e.Self},{type:e.Inject,args:[o.FormGroupDirective]}]},{type:void 0,decorators:[{type:e.Inject,args:[i.TUI_VALIDATION_ERRORS]}]}]},c([n.tuiPure],r.prototype,"getErrorId",null),c([n.tuiPure],r.prototype,"getError",null),r=c([e.Pipe({name:"tuiFieldError",pure:!1}),p(0,e.Optional()),p(0,e.Self()),p(0,e.Inject(o.NgControl)),p(1,e.Optional()),p(1,e.Self()),p(1,e.Inject(o.FormArrayName)),p(2,e.Optional()),p(2,e.Self()),p(2,e.Inject(o.FormGroupName)),p(3,e.Optional()),p(3,e.Self()),p(3,e.Inject(o.FormGroupDirective)),p(4,e.Inject(i.TUI_VALIDATION_ERRORS))],r)}(),f=function(){function r(r){this.injector=r,this.localInjector=e.Injector.create({providers:[{provide:t.AsyncPipe},{provide:s}],parent:this.injector}),this.asyncPipe=this.localInjector.get(t.AsyncPipe),this.fieldErrorPipe=this.localInjector.get(s)}return r.prototype.transform=function(r){return this.getErrorContent(r)},r.prototype.ngOnDestroy=function(){this.asyncPipe.ngOnDestroy()},r.prototype.getErrorContent=function(r){var e=this.asyncPipe.transform(this.fieldErrorPipe.transform(r));return e?"function"==typeof e.message?e.message(e.context):e.message:""},r.ctorParameters=function(){return[{type:e.Injector,decorators:[{type:e.Inject,args:[e.Injector]}]}]},r=c([e.Pipe({name:"tuiFieldErrorContent",pure:!1}),p(0,e.Inject(e.Injector))],r)}(),d=function(){function r(){}return r=c([e.NgModule({declarations:[s,f],exports:[s,f]})],r)}();r.TuiFieldErrorContentPipe=f,r.TuiFieldErrorPipe=s,r.TuiFieldErrorPipeModule=d,Object.defineProperty(r,"__esModule",{value:!0})}));
//# sourceMappingURL=taiga-ui-kit-pipes-field-error.umd.min.js.map