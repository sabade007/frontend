!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/core"),require("@angular/forms"),require("@taiga-ui/cdk"),require("@taiga-ui/core"),require("@taiga-ui/kit/abstract"),require("@taiga-ui/kit/components/input-number"),require("@taiga-ui/kit/components/slider"),require("@taiga-ui/kit/constants"),require("@taiga-ui/kit/tokens"),require("rxjs"),require("@tinkoff/ng-polymorpheus")):"function"==typeof define&&define.amd?define("@taiga-ui/kit/components/input-slider",["exports","@angular/common","@angular/core","@angular/forms","@taiga-ui/cdk","@taiga-ui/core","@taiga-ui/kit/abstract","@taiga-ui/kit/components/input-number","@taiga-ui/kit/components/slider","@taiga-ui/kit/constants","@taiga-ui/kit/tokens","rxjs","@tinkoff/ng-polymorpheus"],t):t(((e=e||self)["taiga-ui"]=e["taiga-ui"]||{},e["taiga-ui"].kit=e["taiga-ui"].kit||{},e["taiga-ui"].kit.components=e["taiga-ui"].kit.components||{},e["taiga-ui"].kit.components["input-slider"]={}),e.ng.common,e.ng.core,e.ng.forms,e.cdk,e.core$1,e["taiga-ui"].kit.abstract,e["taiga-ui"].kit.components["input-number"],e["taiga-ui"].kit.components.slider,e["taiga-ui"].kit.constants,e["taiga-ui"].kit.tokens,e.rxjs,e.ngPolymorpheus)}(this,(function(e,t,n,i,o,r,u,a,l,s,p,c,d){"use strict";var m=function(e,t){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function f(e,t,n,i){var o,r=arguments.length,u=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(u=(r<3?o(u):r>3?o(t,n,u):o(t,n))||u);return r>3&&u&&Object.defineProperty(t,n,u),u}function g(e,t){return function(n,i){t(n,i,e)}}Object.create;Object.create;var y=function(){function e(){}return e=f([n.Directive({selector:"tui-input-slider[new]"})],e)}(),h=function(e){function u(t,n,i,o,r,u){var a=e.call(this,t,n)||this;return a.controller=i,a.fromToTexts$=o,a.isNew=r,a.i18nPlural=u,a.min=0,a.max=1/0,a.quantum=1,a.steps=0,a.segments=0,a.keySteps=null,a.valueContent="",a.prefix="",a.postfix="",a.secondary="",a}var d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}m(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(u,e),d=u,Object.defineProperty(u.prototype,"nativeFocusableElement",{get:function(){var e;return!(null===(e=this.inputNumberRef)||void 0===e?void 0:e.nativeFocusableElement)||this.computedDisabled?null:this.inputNumberRef.nativeFocusableElement},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"focused",{get:function(){var e;return o.isNativeFocused(this.nativeFocusableElement)||o.isNativeFocused((null===(e=this.sliderRef)||void 0===e?void 0:e.nativeElement)||null)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"computedSteps",{get:function(){return this.steps||(this.max-this.min)/this.quantum},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"precision",{get:function(){return r.getFractionPartPadded(this.quantum).length},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"decimal",{get:function(){return this.precision?"not-zero":"never"},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"showValueContent",{get:function(){return Boolean(this.computedValueContent&&!this.focused)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"computedSize",{get:function(){return this.isNew?(o.tuiAssert.assert("s"!==this.controller.size,"Size 's' is not supported by this input."),"l"===this.controller.size?"l":"m"):this.size},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"computedValueContent",{get:function(){return this.minLabel||this.maxLabel?(t=(e=this).min,n=e.max,i=e.minLabel,o=e.maxLabel,r=e.i18nPlural,u=e.pluralizeMap,function(e){var a=e.$implicit,l=a+" "+(u?r.transform(a,u):"");switch(a){case t:return i||l;case n:return o||l;default:return l}}):this.valueContent;var e,t,n,i,o,r,u},enumerable:!0,configurable:!0}),u.prototype.focusTextInput=function(){var e,t=null===(e=this.inputNumberRef)||void 0===e?void 0:e.nativeFocusableElement;t&&o.setNativeFocused(t)},u.prototype.safelyUpdateValue=function(e){this.updateValue(this.valueGuard(null!=e?e:this.safeCurrentValue))},u.prototype.onVerticalArrowKeyDown=function(e){if(!this.readOnly&&this.step){var t=this.value+e*this.step;t!==this.value&&this.safelyUpdateValue(t),this.updateTextInputValue(this.valueGuard(t))}},u.prototype.onSliderChange=function(e){this.safelyUpdateValue(e),this.updateTextInputValue(this.value)},u.prototype.onFocused=function(e){var t=this.value,n=this.textInputValue,i=this.safeCurrentValue,o=this.inputNumberRef;e||n===(null==o?void 0:o.getFormattedValue(t))||this.updateTextInputValue(null!=t?t:i),this.updateFocused(e)},u.prototype.onPressed=function(e){this.updatePressed(e)},u.prototype.onHovered=function(e){this.updateHovered(e)},Object.defineProperty(u.prototype,"textInputValue",{get:function(){var e;return(null===(e=this.inputNumberRef)||void 0===e?void 0:e.nativeValue)||""},enumerable:!0,configurable:!0}),u.prototype.getFallbackValue=function(){return 0},u.prototype.valueGuard=function(e){var t=o.round(Math.round(e/this.quantum)*this.quantum,s.TUI_FLOATING_PRECISION);return o.clamp(t,this.min,this.max)},u.prototype.updateTextInputValue=function(e){this.inputNumberRef&&(this.inputNumberRef.nativeValue=this.inputNumberRef.getFormattedValue(e))},u.ctorParameters=function(){return[{type:i.NgControl,decorators:[{type:n.Optional},{type:n.Self},{type:n.Inject,args:[i.NgControl]}]},{type:n.ChangeDetectorRef,decorators:[{type:n.Inject,args:[n.ChangeDetectorRef]}]},{type:r.TuiTextfieldController,decorators:[{type:n.Inject,args:[r.TUI_TEXTFIELD_WATCHED_CONTROLLER]}]},{type:c.Observable,decorators:[{type:n.Inject,args:[p.TUI_FROM_TO_TEXTS]}]},{type:y,decorators:[{type:n.Optional},{type:n.Inject,args:[y]}]},{type:t.I18nPluralPipe,decorators:[{type:n.Inject,args:[t.I18nPluralPipe]}]}]},f([n.ViewChild(a.TuiInputNumberComponent)],u.prototype,"inputNumberRef",void 0),f([n.ViewChild(l.TuiSliderComponent,{read:n.ElementRef})],u.prototype,"sliderRef",void 0),f([n.Input(),o.tuiDefaultProp()],u.prototype,"min",void 0),f([n.Input(),o.tuiDefaultProp()],u.prototype,"max",void 0),f([n.Input(),o.tuiDefaultProp(v,"Quantum must be positive")],u.prototype,"quantum",void 0),f([n.Input(),o.tuiDefaultProp()],u.prototype,"steps",void 0),f([n.Input(),o.tuiDefaultProp()],u.prototype,"segments",void 0),f([n.Input(),o.tuiDefaultProp()],u.prototype,"keySteps",void 0),f([n.Input(),o.tuiDefaultProp()],u.prototype,"valueContent",void 0),f([n.Input(),o.tuiDefaultProp()],u.prototype,"prefix",void 0),f([n.Input(),o.tuiDefaultProp()],u.prototype,"postfix",void 0),f([n.Input(),o.tuiDefaultProp()],u.prototype,"secondary",void 0),u=d=f([n.Component({selector:"tui-input-slider",template:'<tui-input-number\n    [min]="min"\n    [max]="max"\n    [precision]="precision"\n    [decimal]="decimal"\n    [prefix]="showValueContent ? \'\' : prefix"\n    [postfix]="showValueContent ? \'\' : postfix || (value | i18nPlural: pluralizeMap || pluralizeMapFallback)"\n    [tuiTextfieldCustomContent]="controller.customContent || deprecatedSecondary"\n    [tuiTextfieldSize]="computedSize"\n    [tuiTextfieldLabelOutside]="computedSize !== \'l\'"\n    [disabled]="computedDisabled"\n    [readOnly]="readOnly"\n    [pseudoFocused]="computedFocused"\n    [pseudoHovered]="computedHovered"\n    [pseudoPressed]="computedPressed"\n    [pseudoInvalid]="pseudoInvalid"\n    [ngModel]="value"\n    (ngModelChange)="safelyUpdateValue($event)"\n    (focusedChange)="onFocused($event)"\n    (hoveredChange)="onHovered($event)"\n    (pressedChange)="onPressed($event)"\n    (keydown.arrowUp.prevent)="onVerticalArrowKeyDown(1)"\n    (keydown.arrowDown.prevent)="onVerticalArrowKeyDown(-1)"\n>\n    <ng-content></ng-content>\n    <div\n        *ngIf="showValueContent"\n        polymorpheus-outlet\n        automation-id="tui-input-slider__value-content"\n        [content]="computedValueContent"\n        [context]="{$implicit: value}"\n    ></div>\n</tui-input-number>\n\n\x3c!--TODO: remove in v3.0--\x3e\n<ng-template #deprecatedSecondary>{{ secondary }}</ng-template>\n\n\x3c!--TODO: remove wrapper + ticks labels (leave only slider) in v3.0--\x3e\n<div class="t-slider-wrapper">\n    <input\n        tuiSlider\n        type="range"\n        [tuiFocusable]="false"\n        [max]="computedSteps"\n        [segments]="segments"\n        [keySteps]="computedKeySteps"\n        [attr.disabled]="readOnly || computedDisabled || null"\n        [ngModel]="value"\n        (keyStepsInput)="onSliderChange($event)"\n        (click)="focusTextInput()"\n    />\n\n    \x3c!--TODO delete ticks labels in v3.0--\x3e\n    <div\n        *ngIf="segments && !isNew"\n        class="t-ticks-labels"\n    >\n        <span\n            *tuiRepeatTimes="let tickIndex of segments + 1"\n            automation-id="tui-slider__segment"\n        >\n            <span *ngIf="fromToTexts$ | async as fromToText">\n                {{ getTickPrefix(tickIndex, segments, fromToText) }}\n                {{ tickIndex | tuiSliderTickLabel: segments:computedKeySteps | tuiFormatNumber }}\n                <span *ngIf="segmentsPluralizeMap">\n                    {{ tickIndex | tuiSliderTickLabel: segments:computedKeySteps | i18nPlural: segmentsPluralizeMap }}\n                </span>\n            </span>\n        </span>\n    </div>\n</div>\n',host:{"[class._show-ticks-labels]":"!isNew"},changeDetection:n.ChangeDetectionStrategy.OnPush,providers:[t.I18nPluralPipe,{provide:o.TUI_FOCUSABLE_ITEM_ACCESSOR,useExisting:n.forwardRef((function(){return d}))},l.tuiSliderOptionsProvider({trackColor:"transparent"}),r.HINT_CONTROLLER_PROVIDER,r.TEXTFIELD_CONTROLLER_PROVIDER],styles:[":host{position:relative;z-index:0;display:block;height:-webkit-max-content;height:-moz-max-content;height:max-content}:host._segmented._show-ticks-labels{border-bottom:26px solid transparent}.t-slider-wrapper{position:absolute;top:100%;left:calc(var(--tui-radius-m)/ 2);right:0;margin:-.5625rem 0 0}input[type=range]{border-top-left-radius:0;border-bottom-left-radius:calc(var(--tui-radius-m) * 5) calc(var(--tui-radius-m) * 1.5)}.t-ticks-labels{display:flex;margin:0 .5rem;font:var(--tui-font-text-s);color:var(--tui-text-02)}.t-ticks-labels>*{position:relative;flex:2;text-align:center}.t-ticks-labels>:first-child{left:-.5rem;flex:1;text-align:left}.t-ticks-labels>:last-child{right:-.5rem;flex:1;text-align:right}tui-input-slider+.t-ticks-labels{margin-left:calc(var(--tui-radius-m)/ 2 + .5rem)}tui-input-range+.t-ticks-labels,tui-range+.t-ticks-labels{margin-left:1rem;margin-right:1rem}tui-input-range+.t-ticks-labels>:first-child,tui-range+.t-ticks-labels>:first-child{left:-1rem}tui-input-range+.t-ticks-labels>:last-child,tui-range+.t-ticks-labels>:last-child{right:-1rem}"]}),g(0,n.Optional()),g(0,n.Self()),g(0,n.Inject(i.NgControl)),g(1,n.Inject(n.ChangeDetectorRef)),g(2,n.Inject(r.TUI_TEXTFIELD_WATCHED_CONTROLLER)),g(3,n.Inject(p.TUI_FROM_TO_TEXTS)),g(4,n.Optional()),g(4,n.Inject(y)),g(5,n.Inject(t.I18nPluralPipe))],u)}(u.AbstractTuiInputSlider);function v(e){return e>0}var b=function(){function e(){}return e=f([n.NgModule({imports:[t.CommonModule,i.FormsModule,i.ReactiveFormsModule,o.TuiFocusableModule,l.TuiSliderModule,r.TuiFormatNumberPipeModule,o.TuiRepeatTimesModule,d.PolymorpheusModule,a.TuiInputNumberModule,r.TuiTextfieldControllerModule],declarations:[h,y],exports:[h,y]})],e)}();e.TuiInputSliderComponent=h,e.TuiInputSliderModule=b,e.TuiNewInputSliderDirective=y,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=taiga-ui-kit-components-input-slider.umd.min.js.map