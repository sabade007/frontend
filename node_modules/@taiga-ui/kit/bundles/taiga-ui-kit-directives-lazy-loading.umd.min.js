!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@ng-web-apis/intersection-observer"),require("@taiga-ui/cdk"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@taiga-ui/kit/directives/lazy-loading",["exports","@angular/core","@ng-web-apis/intersection-observer","@taiga-ui/cdk","rxjs","rxjs/operators"],t):t(((e=e||self)["taiga-ui"]=e["taiga-ui"]||{},e["taiga-ui"].kit=e["taiga-ui"].kit||{},e["taiga-ui"].kit.directives=e["taiga-ui"].kit.directives||{},e["taiga-ui"].kit.directives["lazy-loading"]={}),e.ng.core,e.intersectionObserver,e.cdk,e.rxjs,e.rxjs.operators)}(this,(function(e,t,r,n,i,o){"use strict";var c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function a(e,t,r,n){var i,o=arguments.length,c=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(o<3?i(c):o>3?i(t,r,c):i(t,r))||c);return o>3&&c&&Object.defineProperty(t,r,c),c}function s(e,t){return function(r,n){t(r,n,e)}}Object.create;function u(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)c.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return c}Object.create;var l=function(e){function l(t,r,c){var a=e.call(this,(function(e){return a.src$.pipe(o.switchMap((function(e){return c.pipe(o.filter((function(e){return u(e,1)[0].isIntersecting})),o.mapTo(e),o.catchError((function(){return i.of(e)})),n.watch(t),o.take(1))})),o.takeUntil(r)).subscribe(e)}))||this;return a.src$=new i.Subject,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(l,e),l.prototype.next=function(e){this.src$.next(e)},l.ctorParameters=function(){return[{type:t.ChangeDetectorRef,decorators:[{type:t.Inject,args:[t.ChangeDetectorRef]}]},{type:i.Observable,decorators:[{type:t.Inject,args:[n.TuiDestroyService]}]},{type:i.Observable,decorators:[{type:t.Inject,args:[r.IntersectionObserverService]}]}]},l=a([t.Injectable(),s(0,t.Inject(t.ChangeDetectorRef)),s(1,t.Inject(n.TuiDestroyService)),s(2,t.Inject(r.IntersectionObserverService))],l)}(i.Observable),p=function(){function e(e,t){var r=this;this.src$=e,this.elementRef=t,this.animation="tuiSkeletonVibe ease-in-out 1s infinite alternate",this.background="var(--tui-clear-hover)",this.src=null,this.supported||this.src$.subscribe((function(e){r.src=e}))}return Object.defineProperty(e.prototype,"srcSetter",{set:function(e){this.src=this.supported?e:null,this.src$.next(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"supported",{get:function(){return"loading"in this.elementRef.nativeElement},enumerable:!0,configurable:!0}),e.prototype.onLoad=function(){this.background="",this.animation=""},e.ctorParameters=function(){return[{type:l,decorators:[{type:t.Inject,args:[l]}]},{type:t.ElementRef,decorators:[{type:t.Inject,args:[t.ElementRef]}]}]},a([t.Input("src")],e.prototype,"srcSetter",null),a([t.HostBinding("style.animation")],e.prototype,"animation",void 0),a([t.HostBinding("style.background")],e.prototype,"background",void 0),a([t.HostBinding("attr.src")],e.prototype,"src",void 0),a([t.HostListener("load")],e.prototype,"onLoad",null),e=a([t.Directive({selector:'img[loading="lazy"]',providers:[l,r.IntersectionObserverService,n.TuiDestroyService]}),s(0,t.Inject(l)),s(1,t.Inject(t.ElementRef))],e)}(),f=function(){function e(){}return e=a([t.NgModule({declarations:[p],exports:[p]})],e)}();e.TuiLazyLoadingDirective=p,e.TuiLazyLoadingModule=f,e.TuiLazyLoadingService=l,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=taiga-ui-kit-directives-lazy-loading.umd.min.js.map