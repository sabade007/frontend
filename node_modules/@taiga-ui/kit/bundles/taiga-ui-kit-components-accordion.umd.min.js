!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@taiga-ui/cdk"),require("rxjs"),require("rxjs/operators"),require("@taiga-ui/core"),require("@tinkoff/ng-polymorpheus"),require("@angular/common")):"function"==typeof define&&define.amd?define("@taiga-ui/kit/components/accordion",["exports","@angular/core","@taiga-ui/cdk","rxjs","rxjs/operators","@taiga-ui/core","@tinkoff/ng-polymorpheus","@angular/common"],e):e(((t=t||self)["taiga-ui"]=t["taiga-ui"]||{},t["taiga-ui"].kit=t["taiga-ui"].kit||{},t["taiga-ui"].kit.components=t["taiga-ui"].kit.components||{},t["taiga-ui"].kit.components.accordion={}),t.ng.core,t.cdk,t.rxjs,t.rxjs.operators,t.core$1,t.ngPolymorpheus,t.ng.common)}(this,(function(t,e,o,n,r,i,a,s){"use strict";var d=function(t,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)};function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}function u(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a}function p(t,e){return function(o,n){e(o,n,t)}}Object.create;function l(t,e){var o="function"==typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){r={error:t}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a}Object.create;var h=function(t){function o(e,o){return t.call(this,e,o)||this}return c(o,t),o.ctorParameters=function(){return[{type:e.TemplateRef,decorators:[{type:e.Inject,args:[e.TemplateRef]},{type:e.Self}]},{type:e.ChangeDetectorRef,decorators:[{type:e.Inject,args:[e.ChangeDetectorRef]}]}]},o=u([e.Directive({selector:"ng-template[tuiAccordionItemContent]"}),p(0,e.Inject(e.TemplateRef)),p(0,e.Self()),p(1,e.Inject(e.ChangeDetectorRef))],o)}(a.PolymorpheusTemplate),f=function(){function t(){}return t=u([e.Directive({selector:"[tuiAccordionItemContent]:not(ng-template)"})],t)}(),g=function(t){function r(o,n){var r=t.call(this)||this;return r.changeDetectorRef=o,r.mode$=n,r.noPadding=!1,r.showArrow=!0,r.borders="all",r.size="m",r.disabled=!1,r.disableHover=!1,r.open=!1,r.async=!1,r.openChange=new e.EventEmitter,r}var a;return c(r,t),a=r,Object.defineProperty(r.prototype,"nativeFocusableElement",{get:function(){return this.disabled||!this.focusableElement?null:this.focusableElement.nativeElement},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"focused",{get:function(){return o.isNativeFocused(this.nativeFocusableElement)},enumerable:!0,configurable:!0}),r.prototype.onHovered=function(t){this.disableHover||this.updateHovered(t)},r.prototype.onFocused=function(t){this.updateFocused(t)},r.prototype.onFocusVisible=function(t){this.updateFocusVisible(t)},r.prototype.onRowToggle=function(){this.disabled||this.updateOpen(!this.open)},r.prototype.onItemKeyDownEsc=function(t){this.focused&&this.open&&(t.stopPropagation(),this.updateOpen(!1))},r.prototype.onItemKeyDownSpace=function(t){this.focused&&(t.preventDefault(),this.onRowToggle())},r.prototype.close=function(){this.updateOpen(!1),this.changeDetectorRef.markForCheck()},r.prototype.updateOpen=function(t){this.open!==t&&(this.open=t,this.openChange.emit(t))},r.ctorParameters=function(){return[{type:e.ChangeDetectorRef,decorators:[{type:e.Inject,args:[e.ChangeDetectorRef]}]},{type:n.Observable,decorators:[{type:e.Inject,args:[i.TUI_MODE]}]}]},u([e.ViewChild("focusableElement")],r.prototype,"focusableElement",void 0),u([e.Input(),e.HostBinding("class._no-padding"),o.tuiDefaultProp()],r.prototype,"noPadding",void 0),u([e.Input(),e.HostBinding("class._has-arrow"),o.tuiDefaultProp()],r.prototype,"showArrow",void 0),u([e.Input(),e.HostBinding("attr.data-tui-host-borders"),o.tuiDefaultProp()],r.prototype,"borders",void 0),u([e.Input(),e.HostBinding("attr.data-size"),o.tuiDefaultProp()],r.prototype,"size",void 0),u([e.Input(),e.HostBinding("class._disabled"),o.tuiDefaultProp()],r.prototype,"disabled",void 0),u([e.Input(),o.tuiDefaultProp()],r.prototype,"disableHover",void 0),u([e.Input(),o.tuiDefaultProp()],r.prototype,"open",void 0),u([e.Input(),o.tuiDefaultProp()],r.prototype,"async",void 0),u([e.Output()],r.prototype,"openChange",void 0),u([e.ContentChild(f)],r.prototype,"eagerContent",void 0),u([e.ContentChild(h)],r.prototype,"lazyContent",void 0),r=a=u([e.Component({selector:"tui-accordion-item",template:'<div\n    #focusableElement\n    automation-id="tui-accordion__item-wrapper"\n    class="t-wrapper"\n    [tuiFocusable]="computedFocusable"\n    (tuiFocusVisibleChange)="onFocusVisible($event)"\n    (tuiFocusedChange)="onFocused($event)"\n    (keydown.space)="onItemKeyDownSpace($event)"\n    (keydown.enter)="onItemKeyDownSpace($event)"\n    (keydown.esc)="onItemKeyDownEsc($event)"\n>\n    <div\n        automation-id="tui-accordion__item-header"\n        class="t-header"\n        [class.t-header_open]="open"\n        [class.t-header_hoverable]="!disableHover"\n        (tuiHoveredChange)="onHovered($event)"\n        (click)="onRowToggle()"\n    >\n        <div\n            automation-id="tui-accordion__item-title"\n            class="t-title"\n        >\n            <ng-content></ng-content>\n        </div>\n        <tui-svg\n            *ngIf="showArrow"\n            automation-id="tui-accordion__item-arrow"\n            src="tuiIconChevronDownLarge"\n            class="t-icon"\n            [class.t-icon_open]="open"\n        ></tui-svg>\n    </div>\n    <tui-expand\n        [async]="async"\n        [expanded]="open"\n    >\n        <div\n            *ngIf="eagerContent"\n            class="t-content"\n        >\n            <ng-content select="[tuiAccordionItemContent]"></ng-content>\n        </div>\n        <ng-template tuiExpandContent>\n            <div\n                *ngIf="lazyContent"\n                polymorpheus-outlet\n                automation-id="tui-accordion__item-content"\n                class="t-content"\n                [content]="lazyContent"\n            ></div>\n        </ng-template>\n    </tui-expand>\n</div>\n',changeDetection:e.ChangeDetectionStrategy.OnPush,providers:[{provide:o.TUI_FOCUSABLE_ITEM_ACCESSOR,useExisting:e.forwardRef((function(){return a}))},i.MODE_PROVIDER],host:{"($.data-mode.attr)":"mode$"},styles:[":host{position:relative;display:block;overflow:hidden;border-radius:var(--tui-radius-l)}:host[data-tui-host-borders=top-bottom]{border-radius:0!important}.t-wrapper{position:relative;border-radius:inherit}.t-wrapper:focus{outline:0}.t-wrapper:after{position:absolute;top:0;left:0;width:100%;height:100%;content:'';box-sizing:border-box;border-radius:inherit;border:1px solid var(--tui-base-04);pointer-events:none}:host:not([data-tui-host-borders]) .t-wrapper:after{border-width:0}:host[data-tui-host-borders=all] .t-wrapper:after{border-width:1px}:host[data-tui-host-borders=top-bottom] .t-wrapper:after{border-left-width:0;border-right-width:0}:host[data-tui-host-borders=top] .t-wrapper:after{border-left-width:0;border-right-width:0;border-bottom-width:0}:host[data-tui-host-borders=bottom] .t-wrapper:after{border-left-width:0;border-right-width:0;border-top-width:0}:host[data-mode=onDark] .t-wrapper:after{border-color:var(--tui-base-03)}:host[data-mode=onLight] .t-wrapper:after{border-color:var(--tui-text-01)}:host._focus-visible .t-wrapper:after{border:2px solid var(--tui-focus)}:host:not([data-mode]) .t-wrapper{background:var(--tui-base-01)}.t-header{transition-property:background;transition-duration:var(--tui-duration,300ms);transition-timing-function:ease-in-out;display:flex;font:var(--tui-font-text-l);align-items:center;box-sizing:border-box;border-bottom:1px solid var(--tui-base-04);min-height:var(--tui-height-l);padding:.75rem 1.25rem;color:var(--tui-text-01);cursor:pointer}:host[data-mode=onDark] .t-header{color:var(--tui-text-01-night);border-color:var(--tui-base-03)}:host[data-mode=onLight] .t-header{border-color:var(--tui-text-01)}:host:not([data-tui-host-borders]) .t-header{border-bottom-width:0;box-shadow:none}:host._has-arrow .t-header{padding-right:.75rem}:host[data-mode=onDark] .t-header_open{background:var(--tui-clear-inverse)}:host[data-mode=onLight] .t-header_open{background:var(--tui-clear)}:host[data-size='s'] .t-header{font:var(--tui-font-text-m);min-height:var(--tui-height-m);padding:.625rem .75rem .625rem 1rem}:host._no-padding .t-header{padding-left:0;padding-right:0}:host._disabled .t-header{cursor:default}:host:hover:not([data-mode]) .t-header_hoverable{background:var(--tui-base-02)}:host:hover[data-mode=onDark] .t-header_hoverable{background:var(--tui-clear-inverse)}:host:hover[data-mode=onLight] .t-header_hoverable{background:var(--tui-clear)}.t-title{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-right:0;flex-grow:1}:host._has-arrow .t-title{margin-right:.5rem}.t-icon{transition-property:transform,color;transition-duration:var(--tui-duration,300ms);transition-timing-function:ease-in-out;width:1.5rem;height:1.5rem;margin-left:auto;color:var(--tui-base-06)}.t-icon_open{transform:rotate(180deg)}:host[data-mode] .t-icon{opacity:var(--tui-disabled-opacity)}:host:hover[data-mode] .t-icon{opacity:.8}:host[data-mode=onDark] .t-icon{color:var(--tui-text-01-night)}:host[data-mode=onLight] .t-icon{color:var(--tui-text-01)}:host:hover:not([data-mode]) .t-icon{color:var(--tui-base-07)}.t-content{font:var(--tui-font-text-m);padding:1.25rem;word-wrap:break-word}:host[data-size='s'] .t-content{font:var(--tui-font-text-s);padding:1rem}"]}),p(0,e.Inject(e.ChangeDetectorRef)),p(1,e.Inject(i.TUI_MODE))],r)}(o.AbstractTuiInteractive),m=function(){function t(t){this.destroy$=t,this.closeOthers=!0,this.rounded=!0,this.accordionItems=o.EMPTY_QUERY}return t.prototype.ngAfterContentInit=function(){var t=this,e=this.accordionItems,i=o.itemsQueryListObservable(e),a=i.pipe(r.pairwise(),r.map((function(t){var e=l(t,2),o=e[0];return e[1].find((function(t){return!o.includes(t)&&t.open}))})),r.filter(o.isPresent));n.merge(i.pipe(r.switchMap((function(t){return n.merge.apply(void 0,function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(l(arguments[e]));return t}(t.map((function(t){return t.openChange.pipe(r.filter(n.identity),r.mapTo(t))}))))}))),a).pipe(r.filter((function(){return t.closeOthers})),r.takeUntil(this.destroy$)).subscribe((function(t){e.forEach((function(e){t!==e&&e.close()}))}))},t.ctorParameters=function(){return[{type:o.TuiDestroyService,decorators:[{type:e.Inject,args:[o.TuiDestroyService]}]}]},u([e.Input(),o.tuiDefaultProp()],t.prototype,"closeOthers",void 0),u([e.Input(),o.tuiDefaultProp()],t.prototype,"rounded",void 0),u([e.ContentChildren(g)],t.prototype,"accordionItems",void 0),t=u([e.Component({selector:"tui-accordion",template:'\x3c!--TODO: Unnecessary nesting, probably accordion can be a directive--\x3e\n<div\n    tuiGroup\n    automation-id="tui-accordion__group"\n    orientation="vertical"\n    size="l"\n    class="t-group"\n    [collapsed]="true"\n    [rounded]="rounded"\n>\n    <ng-content select="tui-accordion-item"></ng-content>\n</div>\n',changeDetection:e.ChangeDetectionStrategy.OnPush,providers:[o.TuiDestroyService],styles:[":host{display:block}.t-group{display:flex}"]}),p(0,e.Inject(o.TuiDestroyService))],t)}(),v=function(){function t(){}return t=u([e.NgModule({imports:[s.CommonModule,o.TuiFocusedModule,o.TuiFocusVisibleModule,o.TuiFocusableModule,o.TuiHoveredModule,a.PolymorpheusModule,i.TuiSvgModule,i.TuiGroupModule,i.TuiExpandModule],declarations:[m,g,h,f],exports:[m,g,h,f]})],t)}();t.TuiAccordionComponent=m,t.TuiAccordionItemComponent=g,t.TuiAccordionItemContentDirective=h,t.TuiAccordionItemEagerContentDirective=f,t.TuiAccordionModule=v,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=taiga-ui-kit-components-accordion.umd.min.js.map