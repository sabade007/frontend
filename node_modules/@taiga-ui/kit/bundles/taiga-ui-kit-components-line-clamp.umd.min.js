!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@taiga-ui/cdk"),require("@tinkoff/ng-polymorpheus"),require("rxjs"),require("rxjs/operators"),require("@angular/common"),require("@taiga-ui/core")):"function"==typeof define&&define.amd?define("@taiga-ui/kit/components/line-clamp",["exports","@angular/core","@taiga-ui/cdk","@tinkoff/ng-polymorpheus","rxjs","rxjs/operators","@angular/common","@taiga-ui/core"],t):t(((e=e||self)["taiga-ui"]=e["taiga-ui"]||{},e["taiga-ui"].kit=e["taiga-ui"].kit||{},e["taiga-ui"].kit.components=e["taiga-ui"].kit.components||{},e["taiga-ui"].kit.components["line-clamp"]={}),e.ng.core,e.cdk,e.ngPolymorpheus,e.rxjs,e.rxjs.operators,e.ng.common,e.core$1)}(this,(function(e,t,n,i,o,r,a,l){"use strict";var u=function(){return(u=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function s(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a}function p(e,t){return function(n,i){t(n,i,e)}}Object.create;function c(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}Object.create;var f={showHint:!0},d=new t.InjectionToken("Default parameters for line-clamp component",{factory:function(){return f}}),h=function(){function e(e,t,n,i,a){this.elementRef=e,this.renderer=t,this.cd=n,this.ngZone=i,this.options=a,this.linesLimit$=new o.BehaviorSubject(1),this.isOverflown$=new o.Subject,this.initialized=!1,this.lineHeight=24,this.content="",this.overflownChange=this.isOverflown$.pipe(r.distinctUntilChanged()),this.skipInitialTransition()}return Object.defineProperty(e.prototype,"linesLimit",{set:function(e){this.linesLimit$.next(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineClamp$",{get:function(){var e=this;return this.linesLimit$.pipe(r.startWith(1),r.pairwise(),r.switchMap((function(t){var i=c(t,2),a=i[0],l=i[1];return l>=a?o.of(l):n.typedFromEvent(e.elementRef.nativeElement,"transitionend").pipe(r.filter(n.isCurrentTarget),r.mapTo(l))})))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"overflown",{get:function(){if(!this.outlet)return!1;var e=this.outlet.nativeElement,t=e.scrollHeight,n=e.scrollWidth,i=this.elementRef.nativeElement,o=i.clientHeight,r=i.clientWidth;return t-o>4||n-r>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"computedContent",{get:function(){return this.options.showHint&&this.overflown?this.content:""},enumerable:!0,configurable:!0}),e.prototype.updateView=function(){this.cd.detectChanges()},e.prototype.ngAfterViewInit=function(){this.initialized=!0},e.prototype.ngDoCheck=function(){this.update(),this.isOverflown$.next(this.overflown)},e.prototype.skipInitialTransition=function(){var e=this;this.ngZone.runOutsideAngular((function(){setTimeout((function(){e.renderer.addClass(e.elementRef.nativeElement,"_initialized"),e.cd.detectChanges()}))}))},e.prototype.update=function(){this.outlet&&this.renderer.setStyle(this.elementRef.nativeElement,"height",n.tuiPx(this.outlet.nativeElement.scrollHeight+4)),this.initialized&&this.renderer.setStyle(this.elementRef.nativeElement,"max-height",n.tuiPx(this.lineHeight*this.linesLimit$.value))},e.ctorParameters=function(){return[{type:t.ElementRef,decorators:[{type:t.Inject,args:[t.ElementRef]}]},{type:t.Renderer2,decorators:[{type:t.Inject,args:[t.Renderer2]}]},{type:t.ChangeDetectorRef,decorators:[{type:t.Inject,args:[t.ChangeDetectorRef]}]},{type:t.NgZone,decorators:[{type:t.Inject,args:[t.NgZone]}]},{type:void 0,decorators:[{type:t.Inject,args:[d]}]}]},s([t.ViewChild(i.PolymorpheusOutletComponent,{read:t.ElementRef})],e.prototype,"outlet",void 0),s([t.Input(),n.tuiDefaultProp()],e.prototype,"linesLimit",null),s([t.Input(),n.tuiDefaultProp()],e.prototype,"lineHeight",void 0),s([t.Input(),n.tuiDefaultProp()],e.prototype,"content",void 0),s([t.Output()],e.prototype,"overflownChange",void 0),s([n.tuiPure],e.prototype,"lineClamp$",null),s([t.HostListener("transitionend")],e.prototype,"updateView",null),e=s([t.Component({selector:"tui-line-clamp",template:'<div\n    *tuiLet="lineClamp$ | async as lineClamp"\n    polymorpheus-outlet\n    tuiHintId="unnecessary"\n    tuiHintMode="overflow"\n    class="t-wrapper"\n    [tuiHint]="computedContent"\n    [content]="content"\n    [style.-webkit-line-clamp]="lineClamp"\n    [style.word-break]="lineClamp > 1 ? \'break-word\' : \'break-all\'"\n    (tuiResize)="updateView()"\n></div>\n',changeDetection:t.ChangeDetectionStrategy.OnPush,styles:[":host{position:relative;display:block;overflow:hidden}:host._initialized{transition-property:max-height;transition-duration:var(--tui-duration,300ms);transition-timing-function:ease-in-out}.t-wrapper{display:-webkit-box;-webkit-box-orient:vertical;overflow:hidden}"]}),p(0,t.Inject(t.ElementRef)),p(1,t.Inject(t.Renderer2)),p(2,t.Inject(t.ChangeDetectorRef)),p(3,t.Inject(t.NgZone)),p(4,t.Inject(d))],e)}(),m=function(){function e(){}return e=s([t.NgModule({imports:[a.CommonModule,i.PolymorpheusModule,l.TuiHintModule,n.TuiResizeModule,n.TuiLetModule],declarations:[h],exports:[h]})],e)}();e.TUI_LINE_CLAMP_DEFAULT_OPTIONS=f,e.TUI_LINE_CLAMP_OPTIONS=d,e.TuiLineClampComponent=h,e.TuiLineClampModule=m,e.tuiLineClampOptionsProvider=function(e){return{provide:d,useValue:u(u({},f),e)}},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=taiga-ui-kit-components-line-clamp.umd.min.js.map