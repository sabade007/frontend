!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/forms"),require("@taiga-ui/cdk"),require("@taiga-ui/core"),require("@taiga-ui/i18n"),require("@taiga-ui/kit/components/arrow"),require("@taiga-ui/kit/components/input-phone"),require("@taiga-ui/kit/pipes"),require("@taiga-ui/kit/providers"),require("@taiga-ui/kit/tokens"),require("@taiga-ui/kit/utils"),require("rxjs"),require("@angular/common"),require("@tinkoff/ng-polymorpheus")):"function"==typeof define&&define.amd?define("@taiga-ui/kit/components/input-phone-international",["exports","@angular/core","@angular/forms","@taiga-ui/cdk","@taiga-ui/core","@taiga-ui/i18n","@taiga-ui/kit/components/arrow","@taiga-ui/kit/components/input-phone","@taiga-ui/kit/pipes","@taiga-ui/kit/providers","@taiga-ui/kit/tokens","@taiga-ui/kit/utils","rxjs","@angular/common","@tinkoff/ng-polymorpheus"],e):e(((t=t||self)["taiga-ui"]=t["taiga-ui"]||{},t["taiga-ui"].kit=t["taiga-ui"].kit||{},t["taiga-ui"].kit.components=t["taiga-ui"].kit.components||{},t["taiga-ui"].kit.components["input-phone-international"]={}),t.ng.core,t.ng.forms,t.cdk,t.core$1,t.i18n,t["taiga-ui"].kit.components.arrow,t["taiga-ui"].kit.components["input-phone"],t["taiga-ui"].kit.pipes,t["taiga-ui"].kit.providers,t["taiga-ui"].kit.tokens,t["taiga-ui"].kit.utils,t.rxjs,t.ng.common,t.ngPolymorpheus)}(this,(function(t,e,o,n,i,r,u,a,s,p,c,l,d,g,f){"use strict";var y=function(t,e){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)};var h=function(){return(h=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function C(t,e,o,n){var i,r=arguments.length,u=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(u=(r<3?i(u):r>3?i(e,o,u):i(e,o))||u);return r>3&&u&&Object.defineProperty(e,o,u),u}function m(t,e){return function(o,n){e(o,n,t)}}Object.create;Object.create;var v={countries:[],countryIsoCode:r.TuiCountryIsoCode.RU},I=new e.InjectionToken("Default parameters for input phone international component",{factory:function(){return v}});function T(t){var e;return t instanceof DragEvent?(null===(e=t.dataTransfer)||void 0===e?void 0:e.getData("text/plain"))||"":n.getClipboardDataText(t)}var P=T,b=function(t){function g(o,n,i,r,a,s,p){var c=t.call(this,o,n)||this;return c.countriesNames$=i,c.countriesMasks=r,c.options=a,c.flagPipe=s,c.extractCountryCodePipe=p,c.countries=c.options.countries,c.countryIsoCodeChange=new e.EventEmitter,c.countryIsoCode=c.options.countryIsoCode,c.open=!1,c.arrow=u.TUI_ARROW,c.isoToCountryCodeMapper=function(t){return l.tuiIsoToCountryCode(c.countriesMasks,t)},c}var f;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}y(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}(g,t),f=g,Object.defineProperty(g.prototype,"isoCode",{set:function(t){var e;null===(e=this.inputPhoneComponent)||void 0===e||e.writeValue(this.value),this.countryIsoCode=t},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"nativeFocusableElement",{get:function(){return this.inputPhoneComponent&&!this.computedDisabled?this.inputPhoneComponent.nativeFocusableElement:null},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"focused",{get:function(){return!!this.primitiveTextfield&&this.primitiveTextfield.focused||!!this.inputPhoneComponent&&this.inputPhoneComponent.focused},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"inputPhoneCountryCode",{get:function(){return l.tuiIsoToCountryCode(this.countriesMasks,this.countryIsoCode)},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"phoneMaskAfterCountryCode",{get:function(){var t=this.inputPhoneCountryCode;return this.calculateMaskAfterCountryCode(this.countriesMasks[this.countryIsoCode],t)},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"countryFlagPath",{get:function(){return this.getFlagPath(this.countryIsoCode)},enumerable:!0,configurable:!0}),g.prototype.onPaste=function(t){var e=P(t).replace(i.TUI_NON_DIGITS_REGEXP,""),o=this.extractCountryCodePipe.transform(e,this.countries);o?(o===r.TuiCountryIsoCode.RU&&(e=e.replace(/^8/,"7")),this.updateCountryIsoCode(o),this.updateValue(""+n.CHAR_PLUS+e)):this.updateValue((""+this.inputPhoneCountryCode+e).replace(i.TUI_MASK_SYMBOLS_REGEXP,"").slice(0,l.tuiGetMaxAllowedPhoneLength(this.countriesMasks,this.countryIsoCode)))},g.prototype.getFlagPath=function(t){return this.flagPipe.transform(t)},g.prototype.onItemClick=function(t){this.open=!1,this.updateCountryIsoCode(t),this.changeDetectorRef.detectChanges();var e=l.tuiGetMaxAllowedPhoneLength(this.countriesMasks,t);this.value.length>e&&this.updateValue(this.value.slice(0,e)),this.nativeFocusableElement&&n.setNativeFocused(this.nativeFocusableElement)},g.prototype.setDisabledState=function(){t.prototype.setDisabledState.call(this),this.close()},g.prototype.isoToCountryCode=function(t){return l.tuiIsoToCountryCode(this.countriesMasks,t)},g.prototype.onModelChange=function(t){this.updateValue(t)},g.prototype.onActiveZone=function(t){this.updateFocused(t)},g.prototype.getFallbackValue=function(){return""},g.prototype.calculateMaskAfterCountryCode=function(t,e){return t.replace(e,"").trim()},g.prototype.close=function(){this.open=!1},g.prototype.updateCountryIsoCode=function(t){this.countryIsoCode=t,this.countryIsoCodeChange.emit(t)},g.ctorParameters=function(){return[{type:o.NgControl,decorators:[{type:e.Optional},{type:e.Self},{type:e.Inject,args:[o.NgControl]}]},{type:e.ChangeDetectorRef,decorators:[{type:e.Inject,args:[e.ChangeDetectorRef]}]},{type:d.Observable,decorators:[{type:e.Inject,args:[c.TUI_COUNTRIES]}]},{type:void 0,decorators:[{type:e.Inject,args:[c.TUI_COUNTRIES_MASKS]}]},{type:void 0,decorators:[{type:e.Inject,args:[I]}]},{type:i.TuiFlagPipe,decorators:[{type:e.Inject,args:[i.TuiFlagPipe]}]},{type:s.TuiToCountryCodePipe,decorators:[{type:e.Inject,args:[s.TuiToCountryCodePipe]}]}]},C([e.ViewChild(a.TuiInputPhoneComponent)],g.prototype,"inputPhoneComponent",void 0),C([e.ViewChild(i.TuiPrimitiveTextfieldComponent)],g.prototype,"primitiveTextfield",void 0),C([e.Input("countryIsoCode"),n.tuiDefaultProp()],g.prototype,"isoCode",null),C([e.Input()],g.prototype,"countries",void 0),C([e.Output()],g.prototype,"countryIsoCodeChange",void 0),C([e.HostListener("paste.capture.prevent.stop",["$event"]),e.HostListener("drop.capture.prevent.stop",["$event"])],g.prototype,"onPaste",null),C([n.tuiPure],g.prototype,"calculateMaskAfterCountryCode",null),g=f=C([e.Component({selector:"tui-input-phone-international",template:'<tui-hosted-dropdown\n    *ngIf="countriesNames$ | async as countriesNames"\n    class="t-hosted-dropdown"\n    [content]="dropdown"\n    [canOpen]="!readOnly"\n    [(open)]="open"\n    (tuiActiveZoneChange)="onActiveZone($event)"\n>\n    <div tuiGroup>\n        <tui-primitive-textfield\n            tuiHostedDropdownHost\n            class="t-country-select tui-group__auto-width-item"\n            [tuiTextfieldCustomContent]="countryValueContent"\n            [tuiTextfieldLabelOutside]="true"\n            [disabled]="disabled"\n            [focusable]="focusable"\n            [editable]="false"\n            [iconContent]="arrow"\n            [pseudoFocused]="open || null"\n            [readOnly]="readOnly"\n            [tuiHintContent]="null"\n        ></tui-primitive-textfield>\n        <tui-input-phone\n            tuiTextfieldAutocomplete="off"\n            class="t-input-phone tui-group__auto-width-item"\n            [ngModel]="value"\n            [disabled]="disabled"\n            [focusable]="focusable"\n            [countryCode]="inputPhoneCountryCode"\n            [phoneMaskAfterCountryCode]="phoneMaskAfterCountryCode"\n            [readOnly]="readOnly"\n            [pseudoInvalid]="computedInvalid"\n            [pseudoFocused]="pseudoFocused"\n            [pseudoHovered]="pseudoHovered"\n            (ngModelChange)="onModelChange($event)"\n        >\n            <ng-content></ng-content>\n        </tui-input-phone>\n    </div>\n\n    <ng-template #dropdown>\n        <tui-data-list>\n            <button\n                *ngFor="let isoCode of countries"\n                tuiOption\n                (click)="onItemClick(isoCode)"\n            >\n                <img\n                    alt=""\n                    class="t-country-item-flag"\n                    [src]="getFlagPath(isoCode)"\n                />\n                <span class="t-country-item-name">\n                    {{ countriesNames[isoCode] }}\n                </span>\n                <span class="t-country-item-code">\n                    {{ isoCode | tuiMapper: isoToCountryCodeMapper }}\n                </span>\n            </button>\n        </tui-data-list>\n    </ng-template>\n\n    <ng-template #countryValueContent>\n        <img\n            class="t-flag"\n            [alt]="countriesNames[countryIsoCode]"\n            [src]="countryFlagPath"\n        />\n    </ng-template>\n</tui-hosted-dropdown>\n',changeDetection:e.ChangeDetectionStrategy.OnPush,providers:[{provide:n.TUI_FOCUSABLE_ITEM_ACCESSOR,useExisting:e.forwardRef((function(){return f}))},p.FIXED_DROPDOWN_CONTROLLER_PROVIDER,i.TuiFlagPipe,s.TuiToCountryCodePipe],styles:[":host{display:block}:host._disabled{pointer-events:none}.t-hosted-dropdown{display:block}.t-country-select{width:5.625rem}.t-country-select:not(._readonly) ::ng-deep input:not(:disabled){cursor:pointer}.t-country-select._readonly ::ng-deep input{cursor:default}.t-arrow-icon{transition-duration:var(--tui-duration,300ms);transition-timing-function:ease-in-out;display:flex;width:1.5rem;height:1.5rem;align-items:center;justify-content:center;color:var(--tui-text-03);position:relative;box-sizing:border-box;cursor:pointer;transition-property:color,transform}.t-arrow-icon:hover{color:var(--tui-text-02)}:host._disabled .t-arrow-icon,:host._readonly .t-arrow-icon{pointer-events:none}:host[data-mode=onDark] .t-arrow-icon{color:var(--tui-text-03-night)}:host[data-mode=onDark] .t-arrow-icon:hover{color:var(--tui-text-01-night)}.t-arrow-icon_open{transform:rotate(180deg)}.t-input-phone{flex:1}.t-flag{width:1.75rem;height:1.25rem;margin-left:-.5rem}.t-country-item-flag{width:1.75rem;height:1.25rem}.t-country-item-name{margin-left:.75rem;margin-right:auto}.t-country-item-code{color:var(--tui-text-02);margin-right:.25rem}"]}),m(0,e.Optional()),m(0,e.Self()),m(0,e.Inject(o.NgControl)),m(1,e.Inject(e.ChangeDetectorRef)),m(2,e.Inject(c.TUI_COUNTRIES)),m(3,e.Inject(c.TUI_COUNTRIES_MASKS)),m(4,e.Inject(I)),m(5,e.Inject(i.TuiFlagPipe)),m(6,e.Inject(s.TuiToCountryCodePipe))],g)}(n.AbstractTuiControl),O=function(){function t(){}return t=C([e.NgModule({imports:[g.CommonModule,o.FormsModule,f.PolymorpheusModule,i.TuiSvgModule,a.TuiInputPhoneModule,i.TuiGroupModule,i.TuiPrimitiveTextfieldModule,i.TuiTextfieldControllerModule,i.TuiHintControllerModule,i.TuiHostedDropdownModule,i.TuiDataListModule,u.TuiArrowModule,i.TuiFlagPipeModule,n.TuiMapperPipeModule,n.TuiActiveZoneModule],declarations:[b],exports:[b]})],t)}();t.TUI_INPUT_PHONE_INTERNATIONAL_DEFAULT_OPTIONS=v,t.TUI_INPUT_PHONE_INTERNATIONAL_OPTIONS=I,t.TuiInputPhoneInternationalComponent=b,t.TuiInputPhoneInternationalModule=O,t.extractValueFromEvent=T,t.tuiExtractValueFromEvent=P,t.tuiInputPhoneInternationalOptionsProvider=function(t){return{provide:I,useValue:h(h({},v),t)}},Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=taiga-ui-kit-components-input-phone-international.umd.min.js.map