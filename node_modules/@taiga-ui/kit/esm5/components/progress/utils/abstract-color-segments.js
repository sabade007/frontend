import { __decorate, __param } from "tslib";
import { ElementRef, Inject, Injectable, PipeTransform } from '@angular/core';
import { USER_AGENT } from '@ng-web-apis/common';
import { CHROMIUM_EDGE_START_VERSION, isEdgeOlderThan, isIE } from '@taiga-ui/cdk';
import { calculateColorSegments } from './calculate-color-segments';
// TODO: 3.0 delete
var AbstractTuiColorSegments = /** @class */ (function () {
    function AbstractTuiColorSegments(userAgent, elementRef) {
        this.userAgent = userAgent;
        this.elementRef = elementRef;
        this.isOldBrowsers = isEdgeOlderThan(CHROMIUM_EDGE_START_VERSION, this.userAgent) ||
            isIE(this.userAgent);
    }
    AbstractTuiColorSegments.prototype.calculate = function (colors) {
        if (this.isOldBrowsers) {
            return colors[0];
        }
        var elementWidth = this.elementRef.nativeElement.offsetWidth;
        return calculateColorSegments(colors, elementWidth);
    };
    AbstractTuiColorSegments.ctorParameters = function () { return [
        { type: String, decorators: [{ type: Inject, args: [USER_AGENT,] }] },
        { type: ElementRef, decorators: [{ type: Inject, args: [ElementRef,] }] }
    ]; };
    AbstractTuiColorSegments = __decorate([
        Injectable(),
        __param(0, Inject(USER_AGENT)),
        __param(1, Inject(ElementRef))
    ], AbstractTuiColorSegments);
    return AbstractTuiColorSegments;
}());
export { AbstractTuiColorSegments };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWJzdHJhY3QtY29sb3Itc2VnbWVudHMuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AdGFpZ2EtdWkva2l0L2NvbXBvbmVudHMvcHJvZ3Jlc3MvIiwic291cmNlcyI6WyJ1dGlscy9hYnN0cmFjdC1jb2xvci1zZWdtZW50cy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUFDLFVBQVUsRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLGFBQWEsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUM1RSxPQUFPLEVBQUMsVUFBVSxFQUFDLE1BQU0scUJBQXFCLENBQUM7QUFDL0MsT0FBTyxFQUFDLDJCQUEyQixFQUFFLGVBQWUsRUFBRSxJQUFJLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFFakYsT0FBTyxFQUFDLHNCQUFzQixFQUFDLE1BQU0sNEJBQTRCLENBQUM7QUFFbEUsbUJBQW1CO0FBRW5CO0lBS0ksa0NBQ3lDLFNBQWlCLEVBQ2pCLFVBQW1DO1FBRG5DLGNBQVMsR0FBVCxTQUFTLENBQVE7UUFDakIsZUFBVSxHQUFWLFVBQVUsQ0FBeUI7UUFOM0Qsa0JBQWEsR0FDMUIsZUFBZSxDQUFDLDJCQUEyQixFQUFFLElBQUksQ0FBQyxTQUFTLENBQUM7WUFDNUQsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUt0QixDQUFDO0lBSU0sNENBQVMsR0FBbkIsVUFBb0IsTUFBZ0I7UUFDaEMsSUFBSSxJQUFJLENBQUMsYUFBYSxFQUFFO1lBQ3BCLE9BQU8sTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ3BCO1FBRUQsSUFBTSxZQUFZLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxhQUFhLENBQUMsV0FBVyxDQUFDO1FBRS9ELE9BQU8sc0JBQXNCLENBQUMsTUFBTSxFQUFFLFlBQVksQ0FBQyxDQUFDO0lBQ3hELENBQUM7OzZDQWRJLE1BQU0sU0FBQyxVQUFVO2dCQUMrQixVQUFVLHVCQUExRCxNQUFNLFNBQUMsVUFBVTs7SUFQSix3QkFBd0I7UUFEN0MsVUFBVSxFQUFFO1FBT0osV0FBQSxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUE7UUFDbEIsV0FBQSxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUE7T0FQTCx3QkFBd0IsQ0FxQjdDO0lBQUQsK0JBQUM7Q0FBQSxBQXJCRCxJQXFCQztTQXJCcUIsd0JBQXdCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtFbGVtZW50UmVmLCBJbmplY3QsIEluamVjdGFibGUsIFBpcGVUcmFuc2Zvcm19IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtVU0VSX0FHRU5UfSBmcm9tICdAbmctd2ViLWFwaXMvY29tbW9uJztcbmltcG9ydCB7Q0hST01JVU1fRURHRV9TVEFSVF9WRVJTSU9OLCBpc0VkZ2VPbGRlclRoYW4sIGlzSUV9IGZyb20gJ0B0YWlnYS11aS9jZGsnO1xuXG5pbXBvcnQge2NhbGN1bGF0ZUNvbG9yU2VnbWVudHN9IGZyb20gJy4vY2FsY3VsYXRlLWNvbG9yLXNlZ21lbnRzJztcblxuLy8gVE9ETzogMy4wIGRlbGV0ZVxuQEluamVjdGFibGUoKVxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEFic3RyYWN0VHVpQ29sb3JTZWdtZW50czxUPiBpbXBsZW1lbnRzIFBpcGVUcmFuc2Zvcm0ge1xuICAgIHByaXZhdGUgcmVhZG9ubHkgaXNPbGRCcm93c2VycyA9XG4gICAgICAgIGlzRWRnZU9sZGVyVGhhbihDSFJPTUlVTV9FREdFX1NUQVJUX1ZFUlNJT04sIHRoaXMudXNlckFnZW50KSB8fFxuICAgICAgICBpc0lFKHRoaXMudXNlckFnZW50KTtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBASW5qZWN0KFVTRVJfQUdFTlQpIHByaXZhdGUgcmVhZG9ubHkgdXNlckFnZW50OiBzdHJpbmcsXG4gICAgICAgIEBJbmplY3QoRWxlbWVudFJlZikgcHJpdmF0ZSByZWFkb25seSBlbGVtZW50UmVmOiBFbGVtZW50UmVmPEhUTUxFbGVtZW50PixcbiAgICApIHt9XG5cbiAgICBhYnN0cmFjdCB0cmFuc2Zvcm0oY29sb3JzOiBzdHJpbmdbXSk6IFQ7XG5cbiAgICBwcm90ZWN0ZWQgY2FsY3VsYXRlKGNvbG9yczogc3RyaW5nW10pOiBzdHJpbmcge1xuICAgICAgICBpZiAodGhpcy5pc09sZEJyb3dzZXJzKSB7XG4gICAgICAgICAgICByZXR1cm4gY29sb3JzWzBdO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZWxlbWVudFdpZHRoID0gdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQub2Zmc2V0V2lkdGg7XG5cbiAgICAgICAgcmV0dXJuIGNhbGN1bGF0ZUNvbG9yU2VnbWVudHMoY29sb3JzLCBlbGVtZW50V2lkdGgpO1xuICAgIH1cbn1cbiJdfQ==