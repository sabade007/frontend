import { __decorate } from "tslib";
import { Directive, Input } from '@angular/core';
import { tuiDefaultProp } from '@taiga-ui/cdk';
import { TUI_TREE_CONTROLLER } from '../misc/tree.tokens';
var TuiTreeItemControllerDirective = /** @class */ (function () {
    function TuiTreeItemControllerDirective() {
        this.map = new WeakMap();
        this.fallback = true;
    }
    TuiTreeItemControllerDirective_1 = TuiTreeItemControllerDirective;
    TuiTreeItemControllerDirective.prototype.isExpanded = function (item) {
        var _a;
        return (_a = this.map.get(item)) !== null && _a !== void 0 ? _a : this.fallback;
    };
    TuiTreeItemControllerDirective.prototype.toggle = function (item) {
        this.map.set(item, !this.isExpanded(item));
    };
    var TuiTreeItemControllerDirective_1;
    __decorate([
        Input('tuiTreeController'),
        tuiDefaultProp()
    ], TuiTreeItemControllerDirective.prototype, "fallback", void 0);
    TuiTreeItemControllerDirective = TuiTreeItemControllerDirective_1 = __decorate([
        Directive({
            selector: '[tuiTreeController]:not([map])',
            exportAs: 'tuiTreeController',
            providers: [
                {
                    provide: TUI_TREE_CONTROLLER,
                    useExisting: TuiTreeItemControllerDirective_1,
                },
            ],
        })
    ], TuiTreeItemControllerDirective);
    return TuiTreeItemControllerDirective;
}());
export { TuiTreeItemControllerDirective };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJlZS1pdGVtLWNvbnRyb2xsZXIuZGlyZWN0aXZlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHRhaWdhLXVpL2tpdC9jb21wb25lbnRzL3RyZWUvIiwic291cmNlcyI6WyJkaXJlY3RpdmVzL3RyZWUtaXRlbS1jb250cm9sbGVyLmRpcmVjdGl2ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUFDLFNBQVMsRUFBRSxLQUFLLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFDL0MsT0FBTyxFQUFDLGNBQWMsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUk3QyxPQUFPLEVBQUMsbUJBQW1CLEVBQUMsTUFBTSxxQkFBcUIsQ0FBQztBQVl4RDtJQUFBO1FBQ3FCLFFBQUcsR0FBRyxJQUFJLE9BQU8sRUFBaUMsQ0FBQztRQUlwRSxhQUFRLEdBQUcsSUFBSSxDQUFDO0lBU3BCLENBQUM7dUNBZFksOEJBQThCO0lBT3ZDLG1EQUFVLEdBQVYsVUFBVyxJQUEwQjs7UUFDakMsYUFBTyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsbUNBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQztJQUMvQyxDQUFDO0lBRUQsK0NBQU0sR0FBTixVQUFPLElBQTBCO1FBQzdCLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUMvQyxDQUFDOztJQVJEO1FBRkMsS0FBSyxDQUFDLG1CQUFtQixDQUFDO1FBQzFCLGNBQWMsRUFBRTtvRUFDRDtJQUxQLDhCQUE4QjtRQVYxQyxTQUFTLENBQUM7WUFDUCxRQUFRLEVBQUUsZ0NBQWdDO1lBQzFDLFFBQVEsRUFBRSxtQkFBbUI7WUFDN0IsU0FBUyxFQUFFO2dCQUNQO29CQUNJLE9BQU8sRUFBRSxtQkFBbUI7b0JBQzVCLFdBQVcsRUFBRSxnQ0FBOEI7aUJBQzlDO2FBQ0o7U0FDSixDQUFDO09BQ1csOEJBQThCLENBYzFDO0lBQUQscUNBQUM7Q0FBQSxBQWRELElBY0M7U0FkWSw4QkFBOEIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0RpcmVjdGl2ZSwgSW5wdXR9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHt0dWlEZWZhdWx0UHJvcH0gZnJvbSAnQHRhaWdhLXVpL2Nkayc7XG5cbmltcG9ydCB7VHVpVHJlZUl0ZW1Db21wb25lbnR9IGZyb20gJy4uL2NvbXBvbmVudHMvdHJlZS1pdGVtL3RyZWUtaXRlbS5jb21wb25lbnQnO1xuaW1wb3J0IHtUdWlUcmVlQ29udHJvbGxlcn0gZnJvbSAnLi4vbWlzYy90cmVlLmludGVyZmFjZXMnO1xuaW1wb3J0IHtUVUlfVFJFRV9DT05UUk9MTEVSfSBmcm9tICcuLi9taXNjL3RyZWUudG9rZW5zJztcblxuQERpcmVjdGl2ZSh7XG4gICAgc2VsZWN0b3I6ICdbdHVpVHJlZUNvbnRyb2xsZXJdOm5vdChbbWFwXSknLFxuICAgIGV4cG9ydEFzOiAndHVpVHJlZUNvbnRyb2xsZXInLFxuICAgIHByb3ZpZGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgICBwcm92aWRlOiBUVUlfVFJFRV9DT05UUk9MTEVSLFxuICAgICAgICAgICAgdXNlRXhpc3Rpbmc6IFR1aVRyZWVJdGVtQ29udHJvbGxlckRpcmVjdGl2ZSxcbiAgICAgICAgfSxcbiAgICBdLFxufSlcbmV4cG9ydCBjbGFzcyBUdWlUcmVlSXRlbUNvbnRyb2xsZXJEaXJlY3RpdmUgaW1wbGVtZW50cyBUdWlUcmVlQ29udHJvbGxlciB7XG4gICAgcHJpdmF0ZSByZWFkb25seSBtYXAgPSBuZXcgV2Vha01hcDxUdWlUcmVlSXRlbUNvbXBvbmVudCwgYm9vbGVhbj4oKTtcblxuICAgIEBJbnB1dCgndHVpVHJlZUNvbnRyb2xsZXInKVxuICAgIEB0dWlEZWZhdWx0UHJvcCgpXG4gICAgZmFsbGJhY2sgPSB0cnVlO1xuXG4gICAgaXNFeHBhbmRlZChpdGVtOiBUdWlUcmVlSXRlbUNvbXBvbmVudCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXAuZ2V0KGl0ZW0pID8/IHRoaXMuZmFsbGJhY2s7XG4gICAgfVxuXG4gICAgdG9nZ2xlKGl0ZW06IFR1aVRyZWVJdGVtQ29tcG9uZW50KTogdm9pZCB7XG4gICAgICAgIHRoaXMubWFwLnNldChpdGVtLCAhdGhpcy5pc0V4cGFuZGVkKGl0ZW0pKTtcbiAgICB9XG59XG4iXX0=