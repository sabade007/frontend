import { __decorate, __param } from "tslib";
import { Directive, ElementRef, Inject, Output } from '@angular/core';
import { typedFromEvent } from '@taiga-ui/cdk';
import { filter, map, tap, throttleTime } from 'rxjs/operators';
var TuiCarouselScrollDirective = /** @class */ (function () {
    function TuiCarouselScrollDirective(elementRef) {
        var _this = this;
        this.elementRef = elementRef;
        this.tuiCarouselScroll = typedFromEvent(this.elementRef.nativeElement, 'wheel').pipe(filter(function (_a) {
            var deltaX = _a.deltaX;
            return Math.abs(deltaX) > 20;
        }), throttleTime(500), map(function (_a) {
            var deltaX = _a.deltaX;
            return Math.sign(deltaX);
        }), tap(function () {
            // So we always have space to scroll and overflow-behavior saves us from back nav
            _this.elementRef.nativeElement.scrollLeft = 10;
        }));
    }
    TuiCarouselScrollDirective.ctorParameters = function () { return [
        { type: ElementRef, decorators: [{ type: Inject, args: [ElementRef,] }] }
    ]; };
    __decorate([
        Output()
    ], TuiCarouselScrollDirective.prototype, "tuiCarouselScroll", void 0);
    TuiCarouselScrollDirective = __decorate([
        Directive({
            selector: '[tuiCarouselScroll]',
        }),
        __param(0, Inject(ElementRef))
    ], TuiCarouselScrollDirective);
    return TuiCarouselScrollDirective;
}());
export { TuiCarouselScrollDirective };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2Fyb3VzZWwtc2Nyb2xsLmRpcmVjdGl2ZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0B0YWlnYS11aS9raXQvY29tcG9uZW50cy9jYXJvdXNlbC8iLCJzb3VyY2VzIjpbImNhcm91c2VsLXNjcm9sbC5kaXJlY3RpdmUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBQyxTQUFTLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFDcEUsT0FBTyxFQUFDLGNBQWMsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUM3QyxPQUFPLEVBQUMsTUFBTSxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsWUFBWSxFQUFDLE1BQU0sZ0JBQWdCLENBQUM7QUFLOUQ7SUFlSSxvQ0FDeUMsVUFBbUM7UUFENUUsaUJBRUk7UUFEcUMsZUFBVSxHQUFWLFVBQVUsQ0FBeUI7UUFkbkUsc0JBQWlCLEdBQUcsY0FBYyxDQUN2QyxJQUFJLENBQUMsVUFBVSxDQUFDLGFBQWEsRUFDN0IsT0FBTyxDQUNWLENBQUMsSUFBSSxDQUNGLE1BQU0sQ0FBQyxVQUFDLEVBQVE7Z0JBQVAsa0JBQU07WUFBTSxPQUFBLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEdBQUcsRUFBRTtRQUFyQixDQUFxQixDQUFDLEVBQzNDLFlBQVksQ0FBQyxHQUFHLENBQUMsRUFDakIsR0FBRyxDQUFDLFVBQUMsRUFBUTtnQkFBUCxrQkFBTTtZQUFNLE9BQUEsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7UUFBakIsQ0FBaUIsQ0FBQyxFQUNwQyxHQUFHLENBQUM7WUFDQSxpRkFBaUY7WUFDakYsS0FBSSxDQUFDLFVBQVUsQ0FBQyxhQUFhLENBQUMsVUFBVSxHQUFHLEVBQUUsQ0FBQztRQUNsRCxDQUFDLENBQUMsQ0FDTCxDQUFDO0lBSUMsQ0FBQzs7Z0JBRGlELFVBQVUsdUJBQTFELE1BQU0sU0FBQyxVQUFVOztJQWR0QjtRQURDLE1BQU0sRUFBRTt5RUFZUDtJQWJPLDBCQUEwQjtRQUh0QyxTQUFTLENBQUM7WUFDUCxRQUFRLEVBQUUscUJBQXFCO1NBQ2xDLENBQUM7UUFpQk8sV0FBQSxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUE7T0FoQmQsMEJBQTBCLENBa0J0QztJQUFELGlDQUFDO0NBQUEsQUFsQkQsSUFrQkM7U0FsQlksMEJBQTBCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtEaXJlY3RpdmUsIEVsZW1lbnRSZWYsIEluamVjdCwgT3V0cHV0fSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7dHlwZWRGcm9tRXZlbnR9IGZyb20gJ0B0YWlnYS11aS9jZGsnO1xuaW1wb3J0IHtmaWx0ZXIsIG1hcCwgdGFwLCB0aHJvdHRsZVRpbWV9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcblxuQERpcmVjdGl2ZSh7XG4gICAgc2VsZWN0b3I6ICdbdHVpQ2Fyb3VzZWxTY3JvbGxdJyxcbn0pXG5leHBvcnQgY2xhc3MgVHVpQ2Fyb3VzZWxTY3JvbGxEaXJlY3RpdmUge1xuICAgIEBPdXRwdXQoKVxuICAgIHJlYWRvbmx5IHR1aUNhcm91c2VsU2Nyb2xsID0gdHlwZWRGcm9tRXZlbnQoXG4gICAgICAgIHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LFxuICAgICAgICAnd2hlZWwnLFxuICAgICkucGlwZShcbiAgICAgICAgZmlsdGVyKCh7ZGVsdGFYfSkgPT4gTWF0aC5hYnMoZGVsdGFYKSA+IDIwKSxcbiAgICAgICAgdGhyb3R0bGVUaW1lKDUwMCksXG4gICAgICAgIG1hcCgoe2RlbHRhWH0pID0+IE1hdGguc2lnbihkZWx0YVgpKSxcbiAgICAgICAgdGFwKCgpID0+IHtcbiAgICAgICAgICAgIC8vIFNvIHdlIGFsd2F5cyBoYXZlIHNwYWNlIHRvIHNjcm9sbCBhbmQgb3ZlcmZsb3ctYmVoYXZpb3Igc2F2ZXMgdXMgZnJvbSBiYWNrIG5hdlxuICAgICAgICAgICAgdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQuc2Nyb2xsTGVmdCA9IDEwO1xuICAgICAgICB9KSxcbiAgICApO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIEBJbmplY3QoRWxlbWVudFJlZikgcHJpdmF0ZSByZWFkb25seSBlbGVtZW50UmVmOiBFbGVtZW50UmVmPEhUTUxFbGVtZW50PixcbiAgICApIHt9XG59XG4iXX0=